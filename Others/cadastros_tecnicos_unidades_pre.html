<!doctype html>
<html>
    <head>
      <title>Unidades - Valgroup</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
      <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/table.css">
        <meta name="viewport" content="width=944">
        <meta name="robots" content="noindex, follow">
	<link rel="Shortcut icon" href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/favicon.ico" type="image/x-icon">
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon.png" rel="apple-touch-icon" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
        <link rel="stylesheet" href="fonts/fontawesome-all.min.css">
        <link rel="stylesheet" href="fonts/font-awesome.min.css">
        <link rel="stylesheet" href="fonts/fontawesome5-overrides.min.css">
        <script src="js/popper.js"></script>
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
          <script src="js/jscolor.js"></script>
    
        <script src="/portal.cgi/PP_FILE_STORE/Sistema/assets/js/vendor/modernizr-2.6.2.min.js"></script>
      	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-1.8.3.min.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-ui-1.9.2.custom.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.cookie.js'></script>
    <!-- portal.js -->
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-linedtextarea.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/codemirror.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/javascript.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.tmpl.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-regex.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/sitemapstyler.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/date.format.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.iframe-transport.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.fileupload.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.notify.min.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.event.drag-2.2.js'></script>
        <script type='text/javascript' src='/portal.cgi?api=js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/portal/js/nixps-portal-api.js'></script>
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.i18n.js'></script>
       
       <script>
           function logout () {
        	$.cookie('user_id','', { expires: -1, path: '/' });
        	$.cookie('user_hash','', { expires: -1, path: '/' });
        	$.cookie('expiration_date','', { expires: -1, path: '/' });
        	$.cookie('customer_id','', { expires: -1, path: '/' });
        	$.cookie('customer_name', '', { expires: -1 , path: '/' });
       		$.cookie('username', '', { expires: -1 , path: '/' });
        	$.cookie('scope', '', { expires: -1 , path: '/' });
        	window.location = 'http://35.232.192.44:9090/portal.cgi/PP_FILE_STORE/Public/Login/login.html';
    	  }
		

      </script>
    

    </head>


    <body>

  		<div class="wrapper d-flex align-items-stretch">
  			<nav id="sidebar">
  				<div class="p-4 pt-5">
            <img>
  		  		<img src="./logo/logo_valgroup.png" style="width: 90%; margin-bottom: 50px;">
  	   <ul class="active components mb-5">
                   <li  class="active" style="list-style-type: none">
                    <a href="prepress_dash_sp1.html"><img src="./Icons/global_on.png" width="30px" style="margin-right: 10px;"><span  style="color: black; font-size: 1em">Dashboard</span></a>
                    </li>
                    <li  style="list-style-type: none">
                    <a href="lista_premeet_prepress.html"><img src="./Icons/premeet.png" width="30px" style="margin-right: 10px;"><span  style="color: black; font-size: 1em">Lista Pré Meet</span></a>
                    </li>
        <li id="mostra_upload_menu" style="display: none;">
              <a href="#homeSubmenu4" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><img src="./Icons/uploadedownload.png" width="26px" style="margin-right: 10px">Servidor de Arquivos</a>
           <li  style="list-style-type: none;">
               <ul class="collapse list-unstyled" id="homeSubmenu4">
               <li  style="list-style-type: none">
               <a href="upload_artes.html"><img src="./Icons/upload.png" width="22px" style="margin-right: 10px">Upload Artes</a>
          </li> 
          <li  style="list-style-type: none">
               <a href="download_artes.html"><img src="./Icons/download.png" width="22px" style="margin-right: 10px">Download Artes</a>
          </li> 
          <li  style="list-style-type: none">
               <a href="http://35.232.192.44:9090/portal.cgi?asset=X"><img src="./Icons/assets.png" width="22px" style="margin-right: 10px">Assets</a>
          </li> 
        </ul>
        </li>
                     
                <li>
              <a href="#homeSubmenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><img src="./Icons/fornecedores.png" width="30px" style="margin-right: 10px">Fornecedores</a>
           <li  style="list-style-type: none">
               <ul class="collapse list-unstyled" id="homeSubmenu2">
               <li class="active" style="list-style-type: none">
               <a href="cadastros_fornecedores_flexo_pre.html"><img src="./Icons/flexo.png" width="20px" style="margin-right: 10px">Flexo</a>
          </li>
          <li  style="list-style-type: none">
               <a href="cadastros_fornecedores_roto_pre.html"><img src="./Icons/roto.png" width="20px" style="margin-right: 10px">Roto</a>
          </li>
          <li  style="list-style-type: none">
               <a href="cadastros_fornecedores_anilox_pre.html"><img src="./Icons/anilox.png" width="20px" style="margin-right: 10px">Anilox</a>
          </li>
          <li  style="list-style-type: none">
               <a href="cadastros_fornecedores_pc_pre.html"><img src="./Icons/porta_cliche.png" width="20px" style="margin-right: 10px">Porta Clichê</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastros_fornecedores_prepress_pre.html"><img src="./Icons/prepress.png" width="20px" style="margin-right: 10px">Prepress</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastros_fornecedores_materiaprima_pre.html"><img src="./Icons/material.png" width="20px" style="margin-right: 10px">Matéria Prima</a>
          </li>
          </ul>
          
          <li >
              <a  href="#homeSubmenu3" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><img src="./Icons/tecnicos.png" width="30px" style="margin-right: 10px">Cadastros Técnicos</a>
           <li style="list-style-type: none">
               <ul class="collapse list-unstyled" id="homeSubmenu3">
              
          <li  style="list-style-type: none">
               <a href="cadastros_tecnicos_unidades_pre.html"><img src="./Icons/unidades.png" width="20px" style="margin-right: 10px">Unidades</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastros_tecnicos_tipotrabalho_pre.html"><img src="./Icons/tipo_trabalho.png" width="20px" style="margin-right: 10px">Tipo de Trabalho</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastros_tecnicos_finalidade_pre.html"><img src="./Icons/finalidade.png" width="20px" style="margin-right: 10px">Finalidade</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastros_tecnicos_segmentos_pre.html"><img src="./Icons/segmentos.png" width="20px" style="margin-right: 10px">Segmentos</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastros_tecnicos_testform_pre.html"><img src="./Icons/testform.png" width="20px" style="margin-right: 10px">Test Form</a>
          </li>
          </ul>
          
              
                <li>
              <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><img src="./Icons/sequencia.png" width="30px" style="margin-right: 10px">Sequência Padrão</a>
              <ul class="collapse list-unstyled" id="homeSubmenu">
              <li  style="list-style-type: none">
               <a href="receita_tintas_pre.html"><img src="./Icons/contagotas.png" width="20px" style="margin-right: 10px">Criar Sequência</a>
              </li>
              <li  style="list-style-type: none">
               <a href="lista_receitas_pre.html"><img src="./Icons/listasequencia.png" width="20px" style="margin-right: 10px">Lista Sequências</a>
              </li>
              <li style="list-style-type: none">
               <a href="cadastros_tintas_pre.html"><img src="./Icons/novasequencia.png" width="20px" style="margin-right: 10px">Lista de Cores</a>
              </li>
              </ul>
          </li>
              </ul>   
   
  	        <div class="footer">
  	        	<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0.
  						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a>
  						   Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
  	        </div>
  	      </div>
      	</nav>

          <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5">

          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">

              <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
              </button>
              <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <i class="fa fa-bars"></i>
              </button>
              <div id="bemvindo" style="margin-left: 20px;"></div>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav ml-auto">
                  <li class="nav-item">
                  <div class="input-icons">
                     <i class="fa fa-search icon"></i>
                    <input id="filtrarTabela" class="input-field form-control" onkeyup="filtro_tabela()" style="width: 400px;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                    </div>
                    </li>
                  <li class="nav-item">
                      <a class="nav-link" href="alterar_senha.html" target="_Blank">Alterar Senha</a>
                  </li>
                   <li class="nav-item">
                      <div class="nav-link" onclick="logout()" style="cursor: pointer">Logout</div>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div>
        
        
        <div  class="form-group col-md-11" style="display:inline-block;">
       
       
            <div id="tipo_alteracao" style="display:none"></div>
            <div id="id_tipo_trabalho" style="display:none"></div>
            <div id="id_finalidade" style="display:none"></div>
            <div id="id_substrato" style="display:none"></div>
             <div id="id_detalhe" style="display:none"></div>
             <div id="id_situacaoanilox" style="display:none"></div>
             <div id="id_portacliche" style="display:none"></div>
             <div id="qual_cilindro" style="display:none"></div>
             <div id="id_lavagemanilox" style="display:none"></div>
             
             <div id="id_segmento" style="display:none"></div>
             <div id="id_planta" style="display:none"></div>
             <div id="id_dupla" style="display:none"></div>
             <div id="id_maquina" style="display:none"></div>
             <div id="id_tinta" style="display:none"></div>
             <div id="id_estrutura" style="display:none"></div>
            <div id="id_familia" style="display:none"></div>
        <h4 id="que_estou_fazendo"></h4>
        <div id="nome_tabela" style="display: none"></div>
            
    
  
       
            
            <h5 id="a_div_planta"><i id="plantaArrow" class="fas fa-plus-square" onclick="mostraPlantas()" style="margin-right: 5px; cursor:pointer;"></i>Nova Unidade</h5>
                 
           <div class="form-group"  style="display:inline-block; vertical-align: top; width: 25%">
               <p><i>Cadastro das unidades produtivas da Valgroup</i></p>
             <div id="info_planta" class="form-group" style="display: none">
 
                 <div  class="form-group" style="display:inline-block; width: 100%">
                <label for="planta">Unidade</label>
                  <input type="text" class="form-control" onkeyup="this.value=this.value.toUpperCase()"  id="planta" name="planta">
                 </div>
                
                
                 <button class="btn btn-primary" onclick="salvar_planta()" style="cursor: pointer">Salvar Unidade</button>
                 <button class="btn btn-secondary" onclick="cancelar_planta()" style="cursor: pointer;margin-top: 15px;">Cancelar</button>
                
                 
           </div>  
               
             </div>
            <div class="form-group"  style="display:inline-block; vertical-align: top; width: 70%">
            
            <table id="tabela_plantas" class="table custom-table"  style="display: inline-block">
          <thead>
            <tr>
             
             
              <th class="th-sm" style="width:250px">Unidade<!--<br><span  style="margin-left: 5px; display: inline-block; vertical-align: top;"><input id="input_nomelocal" type="text" onkeyup="filtro_localtarja()"></span>-->
              </th>
               <th class="th-sm" style="width:50px; vertical-align: top;">Editar
            </th>
              <th class="th-sm" style="width:50px; vertical-align: top;">Apagar
            </th>
           
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        </div>
           
             
             
             
      
            
             
          
            
            <!-- terminar mostra locais e começa mostra registro -->
            
          
          
           
                <br>
                  <div id="info_update" style="color: green"></div>
              
            </div>
        
     
  	
  		
  	
  	<script>
  	    // funcoes de apoio
  	    
  	    	    
  	    var usuario = api.auth.get_current_user()  
 document.getElementById("bemvindo").innerText = "Bem vindo, "+usuario.fullname
 
 
 if (usuario.scope_name != undefined){
    var nome_scope = usuario.scope_name[0].split("_")
   
}


if (usuario.active_scope_name == "prepress_sp1"){
    document.getElementById("mostra_upload_menu").style.display = "block"
    

}
  	    
      function clearTable(table) {
  var rows = table.rows;
  var i = rows.length;
  while (--i) {
    rows[i].parentNode.removeChild(rows[i]);
    // or
    // table.deleteRow(i);
  }
}

function onlyUnique(value, index, self) {
  return self.indexOf(value) === index;
}



function cmyk2rgb(c, m, y, k, normalized){
    c = (c / 100);
    m = (m / 100);
    y = (y / 100);
    k = (k / 100);
    
    c = c * (1 - k) + k;
    m = m * (1 - k) + k;
    y = y * (1 - k) + k;
    
    var r = 1 - c;
    var g = 1 - m;
    var b = 1 - y;
    
    if(!normalized){
        r = Math.round(255 * r);
        g = Math.round(255 * g);
        b = Math.round(255 * b);
    }
    
    return {
        r: r,
        g: g,
        b: b
    }
}

function rgb2cmyk(r, g, b, normalized){
    var c = 1 - (r / 255);
    var m = 1 - (g / 255);
    var y = 1 - (b / 255);
    var k = Math.min(c, Math.min(m, y));
    
    c = (c - k) / (1 - k);
    m = (m - k) / (1 - k);
    y = (y - k) / (1 - k);
    
    if(!normalized){
        c = Math.round(c * 10000) / 100;
        m = Math.round(m * 10000) / 100;
        y = Math.round(y * 10000) / 100;
        k = Math.round(k * 10000) / 100;
    }
    
    c = isNaN(c) ? 0 : c;
    m = isNaN(m) ? 0 : m;
    y = isNaN(y) ? 0 : y;
    k = isNaN(k) ? 0 : k;
    
    return {
        c: c,
        m: m,
        y: y,
        k: k
    }
}

var usuario = api.auth.get_current_user()

if (usuario.username != "admin"){
    if (usuario.scope_name[0].indexOf("_") != -1){
        var scopo =  usuario.scope_name[0]
        var scopo_array = scopo.split("_")
        var planta = (scopo_array[scopo_array.length-1]).toUpperCase()
       
    } 
}


  	</script>
  	
   <script>
      function filtro_tabela() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("filtrarTabela");
      filter = input.value.toUpperCase();
      table = document.getElementById("tabela_plantas");
      tr = table.getElementsByTagName("tr");
      for (i = 1; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td || td2) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
  
    
    </script>
  	
  	
  
  
<script>
    function reply_delete_contato(){
    var linha = event.srcElement.id
    console.log(linha)
    for (i=0;i<contatos.length;i++){
        console.log(contatos[i].nome)
        if (contatos[i].nome == linha){
            console.log("vou tirar")
            var tira = contatos.splice(i,1)
    }
   
    }
      preenche_tabela_contatos()
    }
</script>
     

      
 
<script>
    function verifica_cliente(){
        var codigo_pedido = document.getElementById("busca_cliente").value
        var existe_codigo = api.custom_objects.list_with_options("BR-ROTOC_customers",["FANTASIA","equal to",codigo_pedido]).results
        if (existe_codigo.length === 0){
            document.getElementById("error_busca_cliente").innerText = "Para adicinar um novo cleinte, clique no icone ao lado"
            document.getElementById("imagem_adiciona_cliente").style = "display:inline-block; cursor: pointer; margin-top: 38px"
        } else {
            document.getElementById("error_busca_cliente").innerText = ""
            document.getElementById("imagem_adiciona_cliente").style = "display:none;"
        }
    }
</script>


<script>

  
       
     
    function preenche_planta(){
         var as_plantas = api.custom_objects.list_with_options("BR-VALFI_plantas").results
    
        clearTable(document.getElementById("tabela_plantas"))
          
          
         var table = document.getElementById("tabela_plantas")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_plantas.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_plantas[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div><img id="'+as_plantas[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_planta()" style="cursor: pointer;"></div>'
            cell3.innerHTML = '<div><img id="'+as_plantas[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_planta()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_planta(){
    if (confirm("Deseja mesmo apagar essa planta? Todos os usuários relacionados com essa planta serão apagados!") === true){     
    var linha = event.srcElement.id
    var busca_nome_planta = api.custom_objects.list_with_options("BR-VALFI_plantas",["_id","equal to",linha]).results[0]
    var busca_usuarios = api.users.list_with_options(["scope_name","contains text like",busca_nome_planta.nome]).results
    for (i=0;i<busca_usuarios.length;i++){
        api.users.delete(busca_usuarios._id)
    }
    var busca_scopes = api.scope.list_with_options(["name","contains text like",busca_nome_planta.nome]).results
    for (i=0;i<busca_scopes.length;i++){
        api.scope.delete(busca_scopes[i]._id)
    }
    
    api.custom_objects.delete("BR-VALFI_plantas",linha)
    preenche_planta()    
    }
     }
    
     function editar_planta(){
     var linha = event.srcElement.id
     document.getElementById("id_planta").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_plantas",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_planta").style = "display: inline-block; width: 100%;"
    document.getElementById("planta").value = busca_tipo.nome
    
    
    
    }
    
    function cancelar_planta(){
     document.getElementById("planta").value = ""
     clearTable(document.getElementById("tabela_plantas"))
     setTimeout(function(){mostraPlantas()},1000)
     
    }
    
    
      
</script>


<script>

  
       
     
    function preenche_tipo_trabalho(){
         var os_tipos_trabalho = api.custom_objects.list_with_options("BR-VALFI_TipoTrabalho").results
    
        clearTable(document.getElementById("tabela_tipo_trabalho"))
          
          
         var table = document.getElementById("tabela_tipo_trabalho")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_tipos_trabalho.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
          
          
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_tipos_trabalho[i].tipo.toUpperCase()+'</div>'
             cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_tipos_trabalho[i].plantas.toUpperCase()+'</div>'
           
            cell3.innerHTML = '<div><img id="'+os_tipos_trabalho[i]._id+'" src="Icons/edit.png" height="30px" onclick="editartipo_trabalho()" style="cursor: pointer;"></div>'
            cell4.innerHTML = '<div><img id="'+os_tipos_trabalho[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagartipo_trabalho()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
  
    }
    
     function apagartipo_trabalho(){
    if (confirm("Deseja mesmo apagar esse tipo de trabalho?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_TipoTrabalho",linha)
    preenche_tipo_trabalho()    
    }
     }
    
     function editartipo_trabalho(){
     var linha = event.srcElement.id
     document.getElementById("id_tipo_trabalho").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_TipoTrabalho",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_tipo").style = "display: inline-block; width: 100%;"
    document.getElementById("tipo_trabalho").value = busca_tipo.tipo
    document.getElementById("as_planta_tipo").value = busca_tipo.plantas
    
    
    
    }
    
    function cancelar_tipo_trabalho(){
     document.getElementById("tipo_trabalho").value = ""
     document.getElementById("as_planta_tipo").value = ""
     clearTable(document.getElementById("tabela_tipo_trabalho"))
     setTimeout(function(){mostraTipo()},1000)
     
    }
    
    
      
</script>


<script>

  
       
     
    function preenche_finalidade(){
         var as_finalidades = api.custom_objects.list_with_options("BR-VALFI_filmes").results
    
        clearTable(document.getElementById("tabela_finalidade"))
          
          
         var table = document.getElementById("tabela_finalidade")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_finalidades.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
          
          
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_finalidades[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_finalidades[i].plantas.toUpperCase()+'</div>'
            
            cell3.innerHTML = '<div><img id="'+as_finalidades[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_finalidade()" style="cursor: pointer;"></div>'
            cell4.innerHTML = '<div><img id="'+as_finalidades[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_finalidade()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
  
    }
    
     function apagar_finalidade(){
    if (confirm("Deseja mesmo apagar essa finalidade?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_filmes",linha)
    preenche_finalidade()    
    }
     }
    
     function editar_finalidade(){
     var linha = event.srcElement.id
     document.getElementById("id_finalidade").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_filmes",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_finalidade").style = "display: inline-block; width: 100%;"
    document.getElementById("finalidade").value = busca_tipo.nome
    document.getElementById("as_planta_finalidade").value = busca_tipo.plantas
    
    
    }
    
    function cancelar_finalidade(){
     document.getElementById("finalidade").value = ""
     document.getElementById("as_planta_finalidade").value = ""
     clearTable(document.getElementById("tabela_finalidade"))
     setTimeout(function(){mostraFinalidade()},1000)
     
    }
    
    
      
</script>

<script>
     function preenche_familia(){
         var as_familias = api.custom_objects.list_with_options("BR-VALFI_familiasProduto").results
    
        clearTable(document.getElementById("tabela_familia"))
          
          
         var table = document.getElementById("tabela_familia")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_familias.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
          
          
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_familias[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_familias[i].plantas.toUpperCase()+'</div>'
            
            cell3.innerHTML = '<div><img id="'+as_familias[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_familia()" style="cursor: pointer;"></div>'
            cell4.innerHTML = '<div><img id="'+as_familias[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_familia()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
  
    }
    
     function apagar_familia(){
    if (confirm("Deseja mesmo apagar essa familia?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_familiasProduto",linha)
    preenche_familia()    
    }
     }
    
     function editar_familia(){
     var linha = event.srcElement.id
     document.getElementById("id_familia").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_familiasProduto",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_familia").style = "display: inline-block; width: 100%;"
    document.getElementById("familia").value = busca_tipo.nome
    document.getElementById("as_planta_familia").value = busca_tipo.plantas
    
    
    }
    
    
    
    
</script>



<script>

  
       
     
    function preenche_tinta(){
         var as_finalidades = api.custom_objects.list_with_options("BR-VALFI_tintas").results
    
        clearTable(document.getElementById("tabela_tintas"))
          
          
         var table = document.getElementById("tabela_tintas")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_finalidades.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
        
          
          
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_finalidades[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_finalidades[i].plantas.toUpperCase()+'</div>'
         
            cell3.innerHTML = '<div><img id="'+as_finalidades[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_tinta()" style="cursor: pointer;"></div>'
            cell4.innerHTML = '<div><img id="'+as_finalidades[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_tinta()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
  
    }
    
     function apagar_tinta(){
    if (confirm("Deseja mesmo apagar essa tinta?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_tintas",linha)
    preenche_tinta()    
    }
     }
    
     function editar_tinta(){
     var linha = event.srcElement.id
     document.getElementById("id_tinta").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_tintas",["_id","equal to",linha]).results[0]
    
    document.getElementById("nome_tinta").value = busca_tipo.nome
    document.getElementById("as_planta_tinta").value = busca_tipo.plantas
    
    
    }
    
        function cancelar_tipo_tinta(){
     document.getElementById("nome_tinta").value = ""
     document.getElementById("as_planta_tinta").value = ""
     clearTable(document.getElementById("tabela_tintas"))
     setTimeout(function(){mostraTintas()},1000)
     
    }
    
    
      
</script>


<script>

  
       
     
    function preenche_substratos(){
         var os_substratos = api.custom_objects.list_with_options("BR-VALFI_substratos").results
    
        clearTable(document.getElementById("tabela_substratos"))
          
          
         var table = document.getElementById("tabela_substratos")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_substratos.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
          
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_substratos[i].tipo.toUpperCase()+'</div>'
            cell3.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_substratos[i].plantas+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_substratos[i].tintas.toString()+'</div>'
            
            cell4.innerHTML = '<div><img id="'+os_substratos[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_substrato()" style="cursor: pointer;"></div>'
            cell5.innerHTML = '<div><img id="'+os_substratos[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_substrato()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
   
    }
    
     function apagar_substrato(){
    if (confirm("Deseja mesmo apagar esse substrato?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_substratos",linha)
    preenche_substratos()    
    }
     }
    
     function editar_substrato(){
     var linha = event.srcElement.id
     document.getElementById("id_substrato").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_substratos",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_substratos").style = "display: inline-block; width: 100%;"
    document.getElementById("tipo_substrato").value = busca_tipo.tipo
    document.getElementById("as_planta_substrato").value = busca_tipo.plantas
    document.getElementById("as_planta_subtinta").value = busca_tipo.tintas.toString()
    
    
    
    }
    
        function cancelar_tipo_substrato(){
     document.getElementById("tipo_substrato").value = ""
     document.getElementById("as_planta_substrato").value = ""
     document.getElementById("as_planta_subtinta").value = ""
     clearTable(document.getElementById("tabela_substratos"))
     setTimeout(function(){mostraSubstratos()},1000)
     
    }
    
    
    
      
</script>

<script>

  
       
     
    function preenche_anilox(){
         var as_situacoes = api.custom_objects.list_with_options("BR-VALFI_situacaoAnilox").results
    
        clearTable(document.getElementById("tabela_situacao_anilox"))
          
          
         var table = document.getElementById("tabela_situacao_anilox")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_situacoes.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_situacoes[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_situacoes[i].plantas.toUpperCase()+'</div>'
            cell3.innerHTML = '<div><img id="'+as_situacoes[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_situacao()" style="cursor: pointer;"></div>'
            cell4.innerHTML = '<div><img id="'+as_situacoes[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_situacao()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_situacao(){
    if (confirm("Deseja mesmo apagar esse detalhe?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_situacaoAnilox",linha)
    preenche_anilox()    
    }
     }
    
     function editar_situacao(){
     var linha = event.srcElement.id
     document.getElementById("id_situacaoanilox").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_situacaoAnilox",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_anilox").style = "display: inline-block; width: 100%;"
    document.getElementById("anilox_situacao").value = busca_tipo.nome
    document.getElementById("as_planta_anilox").value = busca_tipo.plantas
    
    
    
    }
    
      function cancelar_situacao_anilox(){
    document.getElementById("id_situacaoanilox").innerText = ""
     document.getElementById("as_planta_anilox").value = ""
     document.getElementById("anilox_situacao").value = ""
     clearTable(document.getElementById("tabela_situacao_anilox"))
     setTimeout(function(){mostraAnilox()},1000)
     
    }
    
    
      
</script>

<script>

  
       
     
    function preenche_lavagem_anilox(){
         var as_lavagens = api.custom_objects.list_with_options("BR-VALFI_lavagemAnilox").results
    
        clearTable(document.getElementById("tabela_lavagem_anilox"))
          
          
         var table = document.getElementById("tabela_lavagem_anilox")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_lavagens.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_lavagens[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_lavagens[i].plantas.toUpperCase()+'</div>'
            
            cell3.innerHTML = '<div><img id="'+as_lavagens[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_lavagem()" style="cursor: pointer;"></div>'
          
            cell4.innerHTML = '<div><img id="'+as_lavagens[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_lavagem()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_lavagem(){
    if (confirm("Deseja mesmo apagar essa lavagem?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_lavagemAnilox",linha)
    preenche_lavagem_anilox()    
    }
     }
    
     function editar_lavagem(){
     var linha = event.srcElement.id
     document.getElementById("id_lavagemanilox").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_lavagemAnilox",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_lavagemanilox").style = "display: inline-block; width: 100%;"
    document.getElementById("anilox_lavagem").value = busca_tipo.nome
     document.getElementById("as_planta_lavagem").value = busca_tipo.plantas
    
    
    
    }
    
       function cancelar_lavagem_anilox(){
    document.getElementById("id_lavagemanilox").innerText = ""
     document.getElementById("as_planta_lavagem").value = ""
     document.getElementById("anilox_lavagem").value = ""
     clearTable(document.getElementById("tabela_lavagem_anilox"))
     setTimeout(function(){mostralavagemAnilox()},1000)
     
    }
    
      
</script>


<script>

  
       
     
    function preenche_detalheCor(){
         var os_detalhes = api.custom_objects.list_with_options("BR-VALFI_detalhesCor").results
    
        clearTable(document.getElementById("tabela_detalheCor"))
          
          
         var table = document.getElementById("tabela_detalheCor")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_detalhes.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
          
           var string_valfilm = "#CCC"
           if (os_detalhes[i].check_Valfilm === true){
               
               string_valfilm = "green"
           }
           
           var string_tecnoval = "#CCC"
           if (os_detalhes[i].check_Tecnoval === true){
               
               string_tecnoval = "green"
           }
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_detalhes[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<span style="margin-top:5px;height:20px;width:20px;background-color:'+string_valfilm+';border-radius:50%;display:inline-block"></span>'
            cell3.innerHTML = '<span style="margin-top:5px;height:20px;width:20px;background-color:'+string_tecnoval+';border-radius:50%;display:inline-block"></span>'
            cell4.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_detalhe()" style="cursor: pointer;"></div>'
            cell5.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_detalhe()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_detalhe(){
    if (confirm("Deseja mesmo apagar esse detalhe?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_detalhesCor",linha)
    preenche_detalheCor()    
    }
     }
    
     function editar_detalhe(){
     var linha = event.srcElement.id
     document.getElementById("id_detalhe").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_detalhesCor",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_substrato").style = "display: inline-block; width: 100%;"
    document.getElementById("detalhe_cor").value = busca_tipo.nome
    document.getElementById("check_detalhe_Valfilm").checked = busca_tipo.check_Valfilm
    document.getElementById("check_detalhe_Tecnoval").checked = busca_tipo.check_Tecnoval
    
    
    
    }
    
    
      
</script>


<script>

  
       
     
    function preenche_segmento(){
         var os_detalhes = api.custom_objects.list_with_options("BR-VALFI_segmentos").results
    
        clearTable(document.getElementById("tabela_segmentos"))
          
          
         var table = document.getElementById("tabela_segmentos")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_detalhes.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_detalhes[i].nome.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em;">'+os_detalhes[i].plantas.toUpperCase()+'</div>'
            cell3.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_segmento()" style="cursor: pointer;"></div>'
            
           
            cell4.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_segmento()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_segmento(){
    if (confirm("Deseja mesmo apagar esse segmento?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_segmentos",linha)
    preenche_detalheCor()    
    }
     }
    
     function editar_segmento(){
     var linha = event.srcElement.id
     document.getElementById("id_segmento").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_segmentos",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_segmento").style = "display: inline-block; width: 100%;"
    document.getElementById("segmento").value = busca_tipo.nome
    document.getElementById("as_planta_segmento").value = busca_tipo.plantas
    
    
    
    }
    
    
     function salvar_segmento(){
        var existe_id = document.getElementById("id_segmento").innerText
        var data ={}
        data["nome"] = document.getElementById("segmento").value
       data["plantas"] = document.getElementById("as_planta_segmento").value
       if (data.plantas == ""){
           document.getElementById("error_planta_segemento").innerText = "Adicionar ao menos uma unidade!"
       } else {
           document.getElementById("error_planta_segmento").innerText = ""
        if (existe_id == ""){
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","segmentos_Criar",data)
          
        } else {
            data["_id"] = existe_id
             api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","segmentos_Alterar",data)
        
        }
       setTimeout(function(){document.getElementById("segmento").value="";
                            preenche_segmento()},1000)
       }
    }
    
    
      
</script>


<script>

  
       
     
    function preenche_dupla(){
         var os_detalhes = api.custom_objects.list_with_options("BR-VALFI_duplaface").results
    
        clearTable(document.getElementById("tabela_duplaFace"))
          
          
         var table = document.getElementById("tabela_duplaFace")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_detalhes.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_detalhes[i].codigo.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em;">'+os_detalhes[i].item.toUpperCase()+'</div>'
            cell3.innerHTML = '<div style="font-size:1em;">'+os_detalhes[i].descricao.toUpperCase()+'</div>'
           cell4.innerHTML = '<div style="font-size:1em;">'+os_detalhes[i].plantas.toUpperCase()+'</div>'
           
            cell5.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_fita()" style="cursor: pointer;"></div>'
            
           
            cell6.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_fita()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_fita(){
    if (confirm("Deseja mesmo apagar essa fita?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_duplaface",linha)
    preenche_dupla()    
    }
     }
    
     function editar_fita(){
     var linha = event.srcElement.id
     document.getElementById("id_dupla").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_duplaface",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_segmento").style = "display: inline-block; width: 100%;"
    document.getElementById("codigo_dupla_face").value = busca_tipo.codigo
    document.getElementById("item_dupla_face").value = busca_tipo.item
    document.getElementById("descricao_dupla_face").value = busca_tipo.descricao
    document.getElementById("as_planta_dupla").value = busca_tipo.plantas
    
    
    
    }
    
    
     function salvar_duplaFace(){
        var existe_id = document.getElementById("id_dupla").innerText
        var data ={}
        data["codigo"] = document.getElementById("codigo_dupla_face").value
        data["item"] = document.getElementById("item_dupla_face").value
        data["descricao"] = document.getElementById("descricao_dupla_face").value
        data["espessura"] = document.getElementById("espessura_dupla_face").value
   
       data["plantas"] = document.getElementById("as_planta_dupla").value
       if (data.plantas == ""){
           document.getElementById("error_planta_dupla").innerText = "Adicionar ao menos uma unidade!"
       } else {
           document.getElementById("error_planta_dupla").innerText = ""
        if (existe_id == ""){
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","duplaface_Criar",data)
          
        } else {
            data["_id"] = existe_id
             api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","duplaface_Alterar",data)
        
        }
       setTimeout(function(){document.getElementById("codigo_dupla_face").value="";
                             document.getElementById("item_dupla_face").value="";
                             document.getElementById("descricao_dupla_face").value="";
                             document.getElementById("espessura_dupla_face").value="";
                             preenche_dupla()},1000)
       }
    }
    
    
      
</script>



<script>


    function seleciona_impressao_maquina(){
        if (document.getElementById("maquina_tipo_impressao").value == "ROTO"){
            document.getElementById("mostra_laminacao").style = "display: inline-block;"
            document.getElementById("div_mostra_cilindros").style = "display: none;"
        }
        if (document.getElementById("maquina_tipo_impressao").value == "FLEXO"){
            document.getElementById("mostra_laminacao").style = "display: none;"
            document.getElementById("div_mostra_cilindros").style = "display: inline-block;"
        } 
        
    }
  
       
     
    function preenche_maquinas(){
         var as_maquinas = api.custom_objects.list_with_options("BR-VALFI_maquina").results
    
        clearTable(document.getElementById("tabela_maquinas"))
          
          
         var table = document.getElementById("tabela_maquinas")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<as_maquinas.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
             
            if (as_maquinas[i].cilindros === undefined){
                var thecils = "N/A"
            } else {
                var thecils = as_maquinas[i].cilindros.length
            }
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_maquinas[i].impressao.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_maquinas[i].nome.toUpperCase()+'</div>'
            cell3.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_maquinas[i].planta+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; cursor: pointer">'+as_maquinas[i].cores+'</div>'
            
            cell5.innerHTML = '<div style="font-size:1em; cursor: pointer">'+thecils+'</div>'
            cell6.innerHTML = '<div><img id="'+as_maquinas[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_maquina()" style="cursor: pointer;"></div>'
            cell7.innerHTML = '<div><img id="'+as_maquinas[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_maquina()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
   preenche_tabela_cilindros()
    }
    
     function apagar_maquina(){
    if (confirm("Deseja mesmo apagar essa maquina?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_maquina",linha)
    preenche_maquinas()    
    }
     }
    
     function editar_maquina(){
     var linha = event.srcElement.id
     document.getElementById("id_maquina").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_maquina",["_id","equal to",linha]).results[0]
    
    document.getElementById("maquina").value = busca_tipo.nome
    document.getElementById("as_planta_maquina").value = busca_tipo.planta
    document.getElementById("maquina_tipo_impressao").value = busca_tipo.impressao
    document.getElementById("maquina_qtde_cores").value = busca_tipo.cores
    if (busca_tipo.impressao == "FLEXO"){
    document.getElementById("div_mostra_cilindros").style = "display: inline-block;"
    document.getElementById("mostra_laminacao").style = "display: none;"
    contatos = busca_tipo.cilindros
    preenche_tabela_cilindros()
    }
    if (busca_tipo.impressao == "ROTO"){
    document.getElementById("div_mostra_cilindros").style = "display: none;"
    document.getElementById("mostra_laminacao").style = "display: inline-block;"
    document.getElementById("maquina_laminacao").value = busca_tipo.laminacao_em_linha
    
    }
    
    
    
    
    }
    
    
      
</script>




 
    
    
    <script>
      function filtro_grupoferramenta() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("input_grupoferramenta");
      filter = input.value.toUpperCase();
      table = document.getElementById("tabela_ferramentas");
      tr = table.getElementsByTagName("tr");
      for (i = 1; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
  
    
    </script>

<script>

     function mostraPlantas(){
         
        var div_cliente = document.getElementById("info_planta")
        var icone = document.getElementById("plantaArrow")
        icone.classList.toggle("fa-minus-square")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_planta()
      }
      
       preenche_planta()
      function mostraFamilias(){
         
        var div_cliente = document.getElementById("info_familia")
        var icone = document.getElementById("familiaArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_familia()
      }
      


      function mostraTipo(){
         
        var div_cliente = document.getElementById("info_tipo")
        var icone = document.getElementById("tipoArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_tipo_trabalho()
      }
      
       function mostraFinalidade(){
         
        var div_cliente = document.getElementById("info_finalidade")
        var icone = document.getElementById("finalidadeArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_finalidade()
      }
      
      function mostraSubstratos(){
         
        var div_cliente = document.getElementById("info_substratos")
        var icone = document.getElementById("substratosArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_substratos()
      }
      
      function mostraDetalheCor(){
         
        var div_cliente = document.getElementById("info_detalheCor")
        var icone = document.getElementById("detalheCorArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
            
            preenche_detalheCor()
       
      }
      
      function mostraAnilox(){
         
        var div_cliente = document.getElementById("info_anilox")
        var icone = document.getElementById("aniloxArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_anilox()
      }
      
      
      function mostralavagemAnilox(){
         
        var div_cliente = document.getElementById("info_lavagemanilox")
        var icone = document.getElementById("lavagemaniloxArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_lavagem_anilox()
      }
      
      function mostraSegmentos(){
         
        var div_cliente = document.getElementById("info_segmento")
        var icone = document.getElementById("segmentoArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_segmento()
      }
      
      
       function mostraTintas(){
         
        var div_cliente = document.getElementById("info_tintas")
        var icone = document.getElementById("tintasArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_tinta()
      }
      
      function mostraEstruturas(){
         
        var div_cliente = document.getElementById("info_estruturas")
        var icone = document.getElementById("estruturasArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_tabela_estruturas()
      }
      
      function mostraMaquinas(){
         
        var div_cliente = document.getElementById("info_maquinas")
        var icone = document.getElementById("maquinasArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
      document.getElementById("id_maquina").innerText = ""
      document.getElementById("maquina").value = ""
      document.getElementById("as_planta_maquina").value = ""
      document.getElementById("pc").value = ""
      document.getElementById("distorcao").value = ""
      contatos = []
       preenche_maquinas()
      }
      
      
     function mostraDuplaFace(){
         
        var div_cliente = document.getElementById("info_duplaFace")
        var icone = document.getElementById("duplaFaceArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            } else {
                div_cliente.style.display = "none";
            }
       preenche_dupla()
      }
      
        function mostraPortacliche(){
         
        var div_cliente = document.getElementById("info_portacliche")
        var icone = document.getElementById("portaclicheArrow")
        icone.classList.toggle("fa-chevron-down")
        if (div_cliente.style.display === "none") {
            div_cliente.style.display = "inline-block";
            div_cliente.style.width = "100%";
            
            } else {
                div_cliente.style.display = "none";
            }
      preenche_portacliche()
      }
      
  </script>
  
<script>
    function salvar_planta(){
        var existe_id = document.getElementById("id_planta").innerText
        var data ={}
        data["nome"] = document.getElementById("planta").value
      
        if (existe_id == ""){
            api.custom_objects.create("BR-VALFI_plantas",data)
            var scope1 = "gestor_"+document.getElementById("planta").value.toLowerCase()
            var scope2 = "clicheria_"+document.getElementById("planta").value.toLowerCase()
            var scope3 = "artes_"+document.getElementById("planta").value.toLowerCase()
            var scope4 = "vendas_"+document.getElementById("planta").value.toLowerCase()
            var scope5 = "assistente_"+document.getElementById("planta").value.toLowerCase()
            api.scope.create({"name":scope1,"filter":"","welcomepage":""})
            api.scope.create({"name":scope2,"filter":"","welcomepage":""})
            api.scope.create({"name":scope3,"filter":"","welcomepage":""})
            api.scope.create({"name":scope4,"filter":"","welcomepage":""})
            api.scope.create({"name":scope5,"filter":"","welcomepage":""})
            
        } else {
            data["_id"] = existe_id
            api.custom_objects.update("BR-VALFI_plantas",data)
        }
        
       preenche_planta()
    }
</script>


  
<script>
     function salvar_familia(){
        var existe_id = document.getElementById("id_familia").innerText
        var data ={}
        data["nome"] = document.getElementById("familia").value
       data["plantas"] = document.getElementById("as_planta_familia").value
       if (data.plantas == ""){
           document.getElementById("error_planta_familia").innerText = "Adicionar ao menos uma unidade!"
       } else {
           document.getElementById("error_planta_familia").innerText = ""
        if (existe_id == ""){
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","familia_Criar",data)
          
        } else {
            data["_id"] = existe_id
             api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","familia_Alterar",data)
        
        }
       setTimeout(function(){preenche_familia()},1000)
       }
    }
</script>

<script>
    function salvar_tipo_trabalho(){
        var existe_id = document.getElementById("id_tipo_trabalho").innerText
        var data ={}
        data["tipo"] = document.getElementById("tipo_trabalho").value
       data["plantas"] = document.getElementById("as_planta_tipo").value
       if (data.plantas == ""){
           document.getElementById("error_planta_tipo").innerText = "Adicionar ao menos uma unidade!"
       } else {
           document.getElementById("error_planta_tipo").innerText = ""
        if (existe_id == ""){
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","tipoTrabalho_Criar",data)
          
        } else {
            data["_id"] = existe_id
             api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","tipoTrabalho_Alterar",data)
        
        }
       setTimeout(function(){preenche_tipo_trabalho()},1000)
       }
    }
</script>

<script>
    function salvar_tipo_estrutura(){
        var existe_id = document.getElementById("id_estrutura").innerText
        var data ={}
        data["impressao"] = document.getElementById("estrutura_impressao").value
       data["laminacao"] = as_laminacoes
        if (existe_id == ""){
            api.custom_objects.create("BR-VALFI_estruturas",data)
        } else {
            data["_id"] = existe_id
            api.custom_objects.update("BR-VALFI_estruturas",data)
        }
        as_laminacoes= []
        document.getElementById("estrutura_impressao").value = "N/A"
        document.getElementById("planta_laminacao1").value = "N/A"
        document.getElementById("planta_laminacao2").value = "N/A"
        document.getElementById("div_laminacao_2").style = "display: none;"
        
        
       preenche_tabela_estruturas()
    }
</script>


<script>
    function salvar_tipo_substrato(){
        var existe_id = document.getElementById("id_substrato").innerText
        var data ={}
        data["tipo"] = document.getElementById("tipo_substrato").value
       data["plantas"] = document.getElementById("as_planta_substrato").value
       
       var as_tintas = (document.getElementById("as_planta_subtinta").value).split(",")
       data["tintas"] = as_tintas
       if (data.plantas == ""){
           document.getElementById("error_planta_substrato").innerText = "Adicionar ao menos uma unidade!"
       } else {
           
           document.getElementById("error_planta_substrato").innerText = ""
       
        if (existe_id == ""){
          api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","substrato_Criar",data)
         
        } else {
            data["_id"] = existe_id
              api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","substrato_Alterar",data)
         
        }
       setTimeout(function(){document.getElementById("tipo_substrato").value="";document.getElementById("as_planta_substrato").value;document.getElementById("as_planta_subtinta").value="";preenche_substratos()},1000)
       }
    }
</script>

<script>
    function salvar_finalidade(){
        var existe_id = document.getElementById("id_finalidade").innerText
        var data ={}
        data["nome"] = document.getElementById("finalidade").value
        data["plantas"] = document.getElementById("as_planta_finalidade").value
        if (data.plantas != ""){
        document.getElementById("error_planta_finalidade").innerText = ""
        
        
        if (existe_id == ""){
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","finalidade_Criar",data)
        } else {
            data["_id"] = existe_id
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","finalidade_Alterar",data)
        }
       setTimeout(function(){document.getElementById("finalidade").value= "";document.getElementById("as_planta_finalidade").value = "";preenche_finalidade()},1000)
        } else {
            document.getElementById("error_planta_finalidade").innerText = "Adicionar ao menos uma planta"
        }
    }
</script>


<script>
    function salvar_tipo_tinta(){
        var existe_id = document.getElementById("id_tinta").innerText
        var data ={}
        data["nome"] = document.getElementById("nome_tinta").value
        data["plantas"] = document.getElementById("as_planta_tinta").value
        console.log(data)
        if (existe_id == ""){
            
         api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","tintas_Criar",data)
        } else {
            data["_id"] = existe_id
            api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","tintas_Alterar",data)
         
        }
      // preenche_tinta()
    }
</script>

<script>
    function salvar_detalheCor(){
        var existe_id = document.getElementById("id_detalhe").innerText
        var data ={}
        data["nome"] = document.getElementById("detalhe_cor").value
        data["check_Valfilm"] = document.getElementById("check_detalhe_Valfilm").checked
        data["check_Tecnoval"] = document.getElementById("check_detalhe_Tecnoval").checked
        console.log(data)
        if (existe_id == ""){
            api.custom_objects.create("BR-VALFI_detalhesCor",data)
        } else {
            data["_id"] = existe_id
            api.custom_objects.update("BR-VALFI_detalhesCor",data)
        }
       preenche_detalheCor()
    }
</script>
<script>
    function salvar_situacao_anilox(){
        var existe_id = document.getElementById("id_situacaoanilox").innerText
        console.log(existe_id)
        var data ={}
        data["nome"] = document.getElementById("anilox_situacao").value
       data["plantas"] = document.getElementById("as_planta_anilox").value
       if (data.plantas == ""){
          document.getElementById("error_planta_anilox").innerText = "Adicione ao menos uma unidade!" 
       } else {
            document.getElementById("error_planta_anilox").innerText = "" 
        if (existe_id == ""){
         api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","situacaoAnilox_Criar",data)

        } else {
            console.log("vou alterar")
            data["_id"] = existe_id
              api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","situacaoAnilox_Alterar",data)
      
        }
       setTimeout(function(){document.getElementById("id_situacaoanilox").innerText="";document.getElementById("anilox_situacao").value="";document.getElementById("as_planta_anilox").value="";preenche_anilox()},1000)
       }
    }
</script>


<script>
    function salvar_portacliche(){
        var existe_id = document.getElementById("id_portacliche").innerText
        console.log(existe_id)
        var data ={}
        data["nomenclatura"] = document.getElementById("nomenclatura_portacliche").value
        data["distorcido"] = document.getElementById("distorcido_portacliche").value
        data["numero"] = document.getElementById("numero_portacliche").value
        data["fornecedor"] = document.getElementById("fornecedor_portacliche").value
        data["lote"] = document.getElementById("lote_portacliche").value
        data["perimetro"] = document.getElementById("perimetro_portacliche").value
        data["passo"] = document.getElementById("passo_portacliche").value
        data["diametro"] = document.getElementById("diametro_portacliche").value
        data["usuario"] = usuario
        data["espessuradupla"] = document.getElementById("espessuradupla_portacliche").value
        data["status"] = document.getElementById("status_portacliche").value
        data["observacoes"] = document.getElementById("observacoes_portacliche").value
        data["planta"] = [planta]
        
        
        var conta = api.custom_objects.list_with_options("BR-VALFI_portacliche",["nomenclatura","equal to",data.nomenclatura]).results
        console.log("contando e deu "+conta.length)
       if (conta.length > 0){
           
           var existe = false
           
       
               var numeros = conta[0].cilindros
               
               for (j=0;j<numeros.length;j++){
                   if (numeros[j].numero == data.numero && numeros[j].lote == data.lote){
                       var existe = true
                   }
               }
           }
           
       
       console.log("Existe")
       console.log(existe)
       
       if (existe === true){
           
           alert("Já existe um cilindro com esse número e lote para essa nomenclatura!")
           
       } else {
        
        if (existe_id  == ""){
      
        document.getElementById("error_planta_portacliche").innerText = "" 
        if (existe_id == ""){
         api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","portacliche_Criar",data)

        } 
        else {
           console.log("vou alterar")
            data["_id"] = existe_id
            data["qual_cilindro"] = document.getElementById("qual_cilindro").innerText
              api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","portacliche_Alterar",data)
         }
       setTimeout(function(){document.getElementById("nomenclatura_portacliche").value="";
       
                            document.getElementById("passo_portacliche").value="";
                            document.getElementById("perimetro_portacliche").value= "";
                            document.getElementById("distorcido_portacliche").value= "";
                            document.getElementById("diametro_portacliche").value="";
                            document.getElementById("fornecedor_portacliche").value="undefined";
                            document.getElementById("numero_portacliche").value="";
                            document.getElementById("lote_portacliche").value = "";
                            document.getElementById("totalpecas_portacliche").value="0";
                            document.getElementById("id_portacliche").innerText="";
                            document.getElementById("espessuradupla_portacliche").value="0.50";
                            document.getElementById("status_portacliche").value="0.50";
                            document.getElementById("observacoes_portacliche").innerText="";
                            document.getElementById("qual_cilindro").innerText="";
                            
                            
                           // document.getElementById("as_planta_portacliche").value="";
                           // document.getElementById("as_planta_portacliche").value="";
                            preenche_portacliche()},1000)
                            
        } 
       }
       }
    
    
    let os_porta
     function preenche_portacliche(){
        os_porta = api.custom_objects.list_with_options("BR-VALFI_portacliche").results
     document.getElementById("div_tabela_detalhes_pc").style ="display: none;"
       
        clearTable(document.getElementById("tabela_portacliche"))
        clearTable(document.getElementById("tabela_detalheportacliche"))
          
          
         var table = document.getElementById("tabela_portacliche")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_porta.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            
             
            var quantas =  os_porta[i].cilindros.length
           
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer" onclick="preencheDetalhesPC('+i+')">'+quantas+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer" onclick="preencheDetalhesPC('+i+')">'+os_porta[i].nomenclatura+'</div>'
            cell3.innerHTML = '<div style="font-size:1em; cursor: pointer" onclick="preencheDetalhesPC('+i+')">'+os_porta[i].passo+'</div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
    function preencheDetalhesPC(numero){
        console.log(numero)
        document.getElementById("div_tabela_detalhes_pc").style ="display: inline-block; vertical-align: 100%;"
        document.getElementById("titulo_detalhe_pc").innerText = "Lista de Cilindros da Nomenclatura "+os_porta[parseInt(numero)].nomenclatura
        clearTable(document.getElementById("tabela_detalheportacliche"))
        var baseID = os_porta[parseInt(numero)]._id
        var table = document.getElementById("tabela_detalheportacliche")
        var qtasrow = table.rows.length
        
        for (i=0;i<os_porta[parseInt(numero)].cilindros.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            
            
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_porta[parseInt(numero)].cilindros[i].perimetro+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_porta[parseInt(numero)].cilindros[i].distorcido+'</div>'
            cell3.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_porta[parseInt(numero)].cilindros[i].diametro+'</div>'
            if (os_porta[parseInt(numero)].cilindros[i].relatorios === undefined){
            cell4.innerHTML = '<div></div>'
            } else {
             var last_report = os_porta[parseInt(numero)].cilindros[i].relatorios.length
             cell4.innerHTML = '<div><a href="'+os_porta[parseInt(numero)].cilindros[i].relatorios[last_report-1].view_url+'" target="_Blank"><img src="Icons/view.png" height="30px"  style="cursor: pointer;"></a></div>'  
            }
            cell5.innerHTML = '<div><a href="uploadPDF_Cilindro.html?ordem='+i+'_'+baseID+'_'+numero+'" target="_Blank"><img src="Icons/Upload.png" height="30px"  style="cursor: pointer;"></a></div>'
            cell6.innerHTML = '<div><img id="editpc_'+i+'_'+numero+'_'+baseID+'" src="Icons/edit.png" height="30px" onclick="editar_portacliche()" style="cursor: pointer;"></div>'
            cell7.innerHTML = '<div><img id="deletepc_'+i+'_'+numero+'_'+baseID+'" src="Icons/delete.png" height="30px" onclick="apagar_portacliche()" style="cursor: pointer;"></div>'
           
           
            qtasrow = qtasrow +1
            
            
            
        
    }
    }
    
     function apagar_portacliche(){
    if (confirm("Deseja mesmo apagar esse porta clichê?") === true){     
    var linha = event.srcElement.id
    var linha_array = linha.split("_")
     var numerocilindro = parseInt(linha_array[1])
     var numeroporta = parseInt(linha_array[2])
     var ID = linha_array[3]
     var cilindros_atuais = os_porta[numeroporta].cilindros
    var tira = cilindros_atuais.splice(numerocilindro,1)
    if (cilindros_atuais.length > 0){
    api.custom_objects.set_keys("BR-VALFI_portacliche",ID,{"cilindros":cilindros_atuais})
    } else {
        api.custom_objects.delete("BR-VALFI_portacliche",ID)
    }
    preenche_portacliche()    
    }
     }
    
     function editar_portacliche(){
     var linha = event.srcElement.id
     var linha_array = linha.split("_")
     var numeroporta= parseInt(linha_array[1])
     console.log("NUMERO CILINDRO ---> "+numerocilindro)
     var numerocilindro = parseInt(linha_array[2])
     console.log("NUMERO PORTA CLICHE ---> "+numeroporta)
     var ID = linha_array[3]
     
     document.getElementById("id_portacliche").innerText = linha
    
    document.getElementById("info_portacliche").style = "display: inline-block; width: 100%;"
    document.getElementById("nomenclatura_portacliche").value = os_porta[numerocilindro].nomenclatura
    document.getElementById("distorcido_portacliche").value = os_porta[numerocilindro].cilindros[numeroporta].distorcido
    document.getElementById("passo_portacliche").value = os_porta[numerocilindro].passo
    document.getElementById("numero_portacliche").value = os_porta[numerocilindro].cilindros[numeroporta].numero
    document.getElementById("perimetro_portacliche").value = os_porta[numerocilindro].cilindros[numeroporta].perimetro
    document.getElementById("lote_portacliche").value = os_porta[numerocilindro].cilindros[numeroporta].lote
    document.getElementById("fornecedor_portacliche").value = os_porta[numerocilindro].cilindros[numeroporta].fornecedor
    document.getElementById("as_planta_portacliche").value = os_porta[numerocilindro].cilindros[numeroporta].plantas
    
     document.getElementById("totalpecas_portacliche").value = os_porta[numerocilindro].cilindros.length
     var perimetro = parseFloat(os_porta[numerocilindro].cilindros[numeroporta].perimetro.replace(",","."))
     document.getElementById("diametro_portacliche").value = (perimetro/Math.PI).toFixed(3)
    
    
    
    }
    
    function cancelar_portacliche(){
     document.getElementById("nomenclatura_portacliche").value = ""
     document.getElementById("distorcido_portacliche").value = ""
    document.getElementById("numero_portacliche").value = ""
    document.getElementById("perimetro_portacliche").value = ""
    document.getElementById("lote_portacliche").value = ""
    document.getElementById("passo_portacliche").value = ""
    document.getElementById("fornecedor_portacliche").value = "undefined"
     document.getElementById("totalpecas_portacliche").value = "0"
     document.getElementById("diametro_portacliche").value = "0"
    
     clearTable(document.getElementById("tabela_portacliche"))
     setTimeout(function(){mostraPortacliche()},1000)
     
    }
</script>


<script>
    function salvar_lavagem_anilox(){
        var existe_id = document.getElementById("id_lavagemanilox").innerText
        var data ={}
        data["nome"] = document.getElementById("anilox_lavagem").value
        
        data["plantas"] = document.getElementById("as_planta_lavagem").value
        if (data.plantas == ""){
            document.getElementById("error_planta_lavagem").innerText = "Adicionar ao menos uma unidade."
        } else {
            
            document.getElementById("error_planta_lavagem").innerText = ""
        if (existe_id == ""){
              api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","lavagemAnilox_Criar",data)

        } else {
            data["_id"] = existe_id
              api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","lavagemAnilox_Alterar",data)

        }
       setTimeout(function(){ document.getElementById("id_lavagemanilox").innerText="";
                              document.getElementById("anilox_lavagem").value="";
                             document.getElementById("as_planta_lavagem").value="";
                             preenche_lavagem_anilox()},1000)
        }
    }
</script>

<script>
    function salvar_maquina(){
        var existe_id = document.getElementById("id_maquina").innerText
        var data ={}
        data["nome"] = document.getElementById("maquina").value
        data["impressao"] = document.getElementById("maquina_tipo_impressao").value
        data["cores"] = parseInt(document.getElementById("maquina_qtde_cores").value)
       data["planta"] = document.getElementById("as_planta_maquina").value
       data["laminacao_em_linha"] = document.getElementById("maquina_laminacao").value
       data["cilindros"] = contatos
       if (data.planta == ""){
           document.getElementById("error_planta_maquina").innerText = "Adicionar ao menos uma unidade."
       } else {
             document.getElementById("error_planta_maquina").innerText = ""
        if (existe_id == ""){
         api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","maquinas_Criar",data)
        } else {
            data["_id"] = existe_id
          api.hub.start_from_whitepaper_with_variables("[CADASTRO TECNICOS]","maquinas_Alterar",data) 
        }
       setTimeout(function(){document.getElementById("id_maquina").innerText="";
                            document.getElementById("maquina").value="";
                            document.getElementById("maquina_qtde_cores").value = "1";
                            document.getElementById("planta_maquina").value = ""
                            preenche_maquinas()},1000)
       }
    }
</script>
<script>
    function adiciona_planta(){
        var linha = event.srcElement.id
        var div_planta = linha.replace("img-","")
        var qual_planta = document.getElementById(div_planta).value
        var div_resultado = linha.replace("img-","as_")
        var info_resultado = document.getElementById(div_resultado).value
        
        if (info_resultado.indexOf(qual_planta) === -1){
            if (info_resultado == ""){
                info_resultado = qual_planta
            } else {
                info_resultado = info_resultado+", "+qual_planta
            }
        }
        document.getElementById(div_resultado).value = info_resultado
        
    }
    
    function remove_planta(){
        var linha = event.srcElement.id
        var div_planta = linha.replace("img-","").replace("_menos","")
        var qual_planta = document.getElementById(div_planta).value
        console.log(qual_planta)
        var div_resultado = linha.replace("img-","as_").replace("_menos","")
        var info_resultado = document.getElementById(div_resultado).value
        console.log(info_resultado)
        console.log(info_resultado.indexOf(qual_planta))
       
           info_resultado = info_resultado.replace(qual_planta,"")
            info_resultado = info_resultado.replace(",,",",")
            if (info_resultado.indexOf(",") === 0){
                info_resultado = info_resultado.substring(2,info_resultado.length)
            }
            if (info_resultado.substring(info_resultado.length-1,info_resultado.length) == ","){
               info_resultado = info_resultado.substring(0,info_resultado.length-1) 
            }
        
        document.getElementById(div_resultado).value = info_resultado
        
    }
</script>
<script>
var contatos = []
          function adiciona_cilindro(){
              
              
             if (document.getElementById("altera_cilindro").innerText == "99"){
              console.log("Estou dentro")
                  var info_contato = {}
                  
                  info_contato["pc"] = document.getElementById("pc").value.replace(",",".")
                  info_contato["distorcao"] = document.getElementById("distorcao").value.replace(",",".")
                  contatos.push(info_contato)
                  
                  var existe_cilindro = api.custom_objects.list_with_options("Cilindros",["pc","equal to",document.getElementById("pc").value,"and","maquina","contains",document.getElementById("maquina").value]).results
                  
                  if (existe_cilindro.length == 0){
                      api.custom_objects.create("Cilindros",{"maquina":document.getElementById("maquina").value,"pc":document.getElementById("pc").value,"distorcao":document.getElementById("distorcao").value})
                  }
                 
                  
              
                preenche_tabela_cilindros() 
              
               
             } else {
                 for (i=0;i<contatos.length;i++){
                     var numero = parseInt(document.getElementById("altera_contato").innerText)
                   
                     var valores = contatos[i]
                       console.log(valores)
                         valores["pc"] = document.getElementById("pc").value.replace(",",".")
                         valores["distorcao"] = document.getElementById("distorcao").value.replace(",",".")
                        
                         contato[i] = valores
                     }
                    preenche_tabela_cilindros() 
                 }
              
          }
         
          function preenche_tabela_cilindros(){
          
      var tabela2 = document.getElementById("tabela_cilindros");
      clearTable(tabela2)
      
      
      var qtasrow2 = tabela2.rows.length;
       for (i=0;i<contatos.length;i++){
        var row =  tabela2.insertRow(qtasrow2);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
       
       
      
        cell1.innerHTML = '<div style="vertical-align: middle;">'+contatos[i].pc+'</div>'
        cell2.innerHTML = '<div style="vertical-align: middle;">'+contatos[i].distorcao+'</div>';
        cell3.innerHTML = '<div style="vertical-align: middle;cursor: pointer"><img  id="'+contatos[i].pc+'" src="Icons/edit.png" width="50px" onclick="reply_edit_cilindro()"></div>';
        cell4.innerHTML = '<div style="vertical-align: middle; cursor:pointer"><img  id="'+contatos[i].pc+'" src="Icons/delete.png" width="50px" onclick="reply_delete_cilindro()"></div>';
               
        qtasrow2 = qtasrow2+1
        
         } 
          }

</script>
<script>
    function reply_edit_cilindro(){
    var linha = event.srcElement.id
    for (i=0;i<contatos.length;i++){
        if (contatos[i].pc == linha){
            document.getElementById("altera_cilindro").innerText = i
            document.getElementById("pc").value = contatos[i].pc
            document.getElementById("distorcao").value = contatos[i].distorcao
           
        }
    }
 
     
    
    }
</script>
<script>
    function reply_delete_cilindro(){
    var linha = event.srcElement.id
    console.log(linha)
    for (i=0;i<contatos.length;i++){
        console.log(contatos[i].pc)
        if (contatos[i].pc == linha){
            console.log("vou tirar")
            var tira = contatos.splice(i,1)
    }
   
    }
    document.getElementById("pc").value = ""
    document.getElementById("distorcao").value = ""
    document.getElementById("altera_cilindro").innerText = "99"
      preenche_tabela_cilindros()
    }
</script>
<script>
    function preenche_laminacao(){
        var qual_impressao = document.getElementById("estrutura_impressao").value
        var dados_lamina1 = []
        var dados_lamina2 = []
        if (qual_impressao == "BOPP BRILHO"){
            dados_lamina1.push("PP TRANSPARENTE")
            dados_lamina1.push("PP METALIZADO")
            dados_lamina1.push("PP BRANCO")
            dados_lamina1.push("PE TRANSPARENTE")
            dados_lamina1.push("BOPP METALIZADO")
            dados_lamina1.push("BOPP BRILHO")
        }
        if (qual_impressao == "BOPP MATTE"){
           
            dados_lamina1.push("PE TRANSPARENTE")
            dados_lamina1.push("BOPP METALIZADO")
           
        }
        if (qual_impressao == "BOPP PEROLIZADO"){
            
            dados_lamina1.push("BOPP TRANSPARENTE")
        }
        if (qual_impressao == "PE MONOCAMADA"){
            
            dados_lamina1.push("BOPP TRANSPARENTE")
        }
        if (qual_impressao == "PET TRANSPARENTE"){
            
            dados_lamina1.push("ALUMINIO")
            dados_lamina1.push("PP METALIZADO")
            dados_lamina1.push("PE BRANCO")
            dados_lamina1.push("PE TRANSPARENTE")
            dados_lamina1.push("PET METALIZADO")
            
        }
        if (qual_impressao == "PET METALIZADO"){
            
            dados_lamina1.push("PE TRANSPARENTE")
         
        }
        if (qual_impressao == "PE TRANSPARENTE"){
            
            dados_lamina1.push("PE TRANSPARENTE")
         
        }
        
        if (qual_impressao == "PP TRANSPARENTE"){
            
            dados_lamina1.push("ALUMINIO")
            dados_lamina1.push("PP METALIZADO")
            dados_lamina1.push("PE BRANCO")
            dados_lamina1.push("PE TRANSPARENTE")
            dados_lamina1.push("PET METALIZADO")
            
        }
        if (qual_impressao == "PP METALIZADO"){
            
            dados_lamina1.push("PE TRANSPARENTE")
         
        }
        if (qual_impressao == "PAPEL"){
            
            dados_lamina1.push("PE TRANSPARENTE")
         
        }
        var theSelect = document.getElementById("planta_laminacao1")
        
        $('#planta_laminacao1').empty().append('<option selected="selected" value="N/A">NÃO APLICA</option>');
        
        
         for (var i = 0; i<dados_lamina1.length; i++){
        var opt = document.createElement('option');
        opt.value = dados_lamina1[i];
        opt.innerHTML = dados_lamina1[i];
        theSelect.appendChild(opt);
    }
        
        
        
    }
    
    function preenche_laminacao2(){
        var lamina1 = document.getElementById("planta_laminacao1").value
        var estrutura = document.getElementById("estrutura_impressao").value
         $('#planta_laminacao2').empty().append('<option selected="selected" value="N/A">NÃO APLICA</option>');
        if (estrutura == "PET TRANSPARENTE" || estrutura == "PP TRANSPARENTE"){
            if (lamina1 == "PP METALIZADO" || lamina1 == "PET METALIZADO" ){
                document.getElementById("div_laminacao_2").style = "display: inline-block;"
                var theSelect2 = document.getElementById("planta_laminacao2")
                var opt = document.createElement('option');
                 opt.value = "PE TRANSPARENTE";
                opt.innerHTML = "PE TRANSPARENTE";
                theSelect2.appendChild(opt);
                
                
            }
        } else {
           document.getElementById("div_laminacao_2").style = "display: none;" 
        }
        
        
    }
</script>
<script>
var as_laminacoes = []
    function adiciona_laminacao(){
        if (document.getElementById("planta_laminacao1").value != "N/A"){
        as_laminacoes.push([document.getElementById("planta_laminacao1").value,document.getElementById("planta_laminacao2").value])
        }
        
        preenche_tabela_laminacoes()
        
    }
    
     function preenche_tabela_laminacoes(){
          
      var tabela2 = document.getElementById("tabela_opcoes");
      clearTable(tabela2)
      
      
      var qtasrow2 = tabela2.rows.length;
       for (i=0;i<as_laminacoes.length;i++){
        var row =  tabela2.insertRow(qtasrow2);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
       
       
      
        cell1.innerHTML = '<div style="vertical-align: middle;">'+as_laminacoes[i][0]+'</div>'
        cell2.innerHTML = '<div style="vertical-align: middle;">'+as_laminacoes[i][1]+'</div>';
        cell3.innerHTML = '<div style="vertical-align: middle;cursor: pointer"><img  id="'+i+'" src="Icons/delete.png" width="50px" onclick="apagar_laminacao()"></div>';
               
        qtasrow2 = qtasrow2+1
        
         } 
          }
          
          function apagar_laminacao(){
              var linha = parseInt(event.srcElement.id)
              as_laminacoes.splice(linha,1)
              preenche_tabela_laminacoes()
          }
    
    
</script>
<script>
     function preenche_tabela_estruturas(){
         var os_detalhes = api.custom_objects.list_with_options("BR-VALFI_estruturas").results
    
        clearTable(document.getElementById("tabela_estruturas"))
          
          
         var table = document.getElementById("tabela_estruturas")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<os_detalhes.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            
            var as_lam  = os_detalhes[i].laminacao
            
            var lam1 = ""
            var lam2 = []
            for (j=0;j<as_lam.length;j++){
              
                lam1 = lam1 + as_lam[j][0]+","
                lam2.push(as_lam[j][1])
            }
            
            var unique = lam2.filter(onlyUnique);
            
            var lam_2 = ""
            
            for (k=0;k<unique.length;k++){
                lam_2 = lam_2+unique[k]+","
            }
             
            
           
            
            cell1.innerHTML = '<div style="font-size:1em; cursor: pointer">'+os_detalhes[i].impressao.toUpperCase()+'</div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer">'+lam1.substring(0,lam1.length-1)+'</div>'
            cell3.innerHTML = '<div style="font-size:1em; cursor: pointer">'+lam_2.substring(0,lam_2.length-1)+'</div>'
            
            cell4.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/edit.png" height="30px" onclick="editar_estrutura()" style="cursor: pointer;"></div>'
            cell5.innerHTML = '<div><img id="'+os_detalhes[i]._id+'" src="Icons/delete.png" height="30px" onclick="apagar_estrutura()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
      
        
        
    }
    }
    
     function apagar_estrutura(){
    if (confirm("Deseja mesmo apagar esse segmento?") === true){     
    var linha = event.srcElement.id
    api.custom_objects.delete("BR-VALFI_estruturas",linha)
    preenche_tabela_estruturas()    
    }
     }
    
     function editar_estrutura(){
     var linha = event.srcElement.id
     document.getElementById("id_estrutura").innerText = linha
    var busca_tipo = api.custom_objects.list_with_options("BR-VALFI_estruturas",["_id","equal to",linha]).results[0]
    
    document.getElementById("info_estruturas").style = "display: inline-block; width: 100%;"
    document.getElementById("estrutura_impressao").value = busca_tipo.impressao
    as_laminacoes = busca_tipo.laminacao
    
    preenche_tabela_laminacoes()
    
    
    }
    
    function onlyNumberKey(evt) {
          
        // Only ASCII character in that range allowed
        var ASCIICode = (evt.which) ? evt.which : evt.keyCode
        if (ASCIICode > 31 && (ASCIICode < 48 || ASCIICode > 57))
            return false;
        return true;
    }
    
    function calcula_diametro(){
        var perimetro = parseFloat(document.getElementById("perimetro_portacliche").value.replace(",","."))
        
        document.getElementById("diametro_portacliche").value = (perimetro/Math.PI).toFixed(3)
        console.log(perimetro)
        
    }
    
    function busca_portacliche(){
       var qtepecas = api.custom_objects.count("BR-VALFI_portacliche",["nomenclatura","equal to",document.getElementById("nomenclatura_portacliche").value]).count
        document.getElementById("totalpecas_portacliche").value = qtepecas+1
    }
</script>

    </body>

</html>