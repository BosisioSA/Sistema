<!doctype html>
<html>
    <head>
      <title>Ticket DG</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
      <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/table.css">
        <meta name="viewport" content="width=944">
        <meta name="robots" content="noindex, follow">
	<link rel="Shortcut icon" href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/favicon.ico" type="image/x-icon">
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon.png" rel="apple-touch-icon" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
        <link rel="stylesheet" href="fonts/fontawesome-all.min.css">
        <link rel="stylesheet" href="fonts/font-awesome.min.css">
        <link rel="stylesheet" href="fonts/fontawesome5-overrides.min.css">
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
     
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/jscolor.js"></script>
        <script src="js/html-duration-picker.min.js"></script>
          
    
        <script src="/portal.cgi/PP_FILE_STORE/Sistema/assets/js/vendor/modernizr-2.6.2.min.js"></script>
      	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-1.8.3.min.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-ui-1.9.2.custom.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.cookie.js'></script>
    	<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js'></script>
    <!-- portal.js -->
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-linedtextarea.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/codemirror.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/javascript.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.tmpl.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-regex.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/sitemapstyler.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/date.format.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.iframe-transport.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.fileupload.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.notify.min.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.event.drag-2.2.js'></script>
        <script type='text/javascript' src='/portal.cgi?api=js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/portal/js/nixps-portal-api.js'></script>
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.i18n.js'></script>
         <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/upload/js/upload.js'></script>
      
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/upload/js/upload-controller.js'></script>
           <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
        
       
       
     
    </head>


    <body>

  		<div class="wrapper d-flex align-items-stretch">
  			<nav id="sidebar">
  				<div class="p-4 pt-5">
            <img>
  		  		<img src="./logo/logo_valgroup.png" style="width: 90%; margin-bottom: 50px;">
             <ul class="active components mb-5">
              <li  class="active" style="list-style-type: none">
               <a href="ticket_dashboard_mg4.html"><img src="./Icons/ticket_dg.png" width="30px" style="margin-right: 5px;">Dashboard Ticket</a>
              </li>
                   <li  style="list-style-type: none">
               <a href="aberturaticket_mg4.html"><img src="./Icons/entrada_ticket.png" width="30px" style="margin-right: 5px;">Novo Ticket</a>
              </li>
             
            
            <li>
           <a href="#homeSubmenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><img src="./Icons/fornecedores.png" width="30px" style="margin-right: 10px">Reuni√£o DG</a>
           <li class="active" style="list-style-type: none">
               <ul class="collapse list-unstyled" id="homeSubmenu2">
               <li style="list-style-type: none">
               <a href="reuniao_dg_mg4.html"><img src="./Icons/liberado_reuniao.png" width="20px" style="margin-right: 5px;">Pauta</a>
          </li>
          <li style="list-style-type: none">
               <a href="cadastro_email_reuniaoDG.html"><img src="./Icons/cadastroemailreuniao.png" width="20px" style="margin-right: 5px;">Cadastro de E-mails</a>
          </li>
          
        </ul>
        </li>
        
                </ul>
             
                    
       
   
  	        <div class="footer">
  	        	<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0.
  						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a>
  						   Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
  	        </div>
  	      </div>
      	</nav>

          <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5">

          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">

              <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
              </button>
              <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <i class="fa fa-bars"></i>
              </button>
              <div id="bemvindo" style="margin-left: 20px;"></div>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav ml-auto">
                 
                  <li class="nav-item">
                      <a class="nav-link" href="alterar_senha.html" target="_Blank">Alterar Senha</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" onclick="logout()">Logout</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div>
     <div  class="form-group" style="display:inline-block; width: 100%;"> 
     <div  class="form-group" style="display:inline-block; width: 100%; margin-left: 2%;">         
     
     <div class="form-group" onclick="filtra_icones()" id="card_pendente" style="display:inline-block;  width:11.5%;margin-right: 0.5%; cursor:pointer;">   
        <div class="card" id="card_pendente">
            <div id="card_pendente" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Pendentes</div>
                <div id="card_pendente" style="width: 100%; margin: auto; height: 40px">
                    <img id="imagem_pendente" src="./Icons/aguardandorevisao_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div id="card_pendente" class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_pendente">0</strong></div>
           
            </div>
        </div>
    </div>
    
    <div class="form-group" onclick="filtra_icones()" id="card_priorizar" style="display:inline-block;  width:11.5%;margin-right: 0.5%;cursor: pointer;">   
        <div id="card_priorizar" class="card">
            <div id="card_priorizar" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Priorizar</div>
                <div id="card_priorizar" style="width: 100%; margin: auto; height: 40px">
                    <img id="imagem_priorizar" src="./Icons/aguardando_comercial_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div id="card_priorizar" class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_priorizar">0</strong></div>
           
            </div>
        </div>
    </div>
     
     <div class="form-group" onclick="filtra_icones()" id="card_prioridade" style="display:inline-block;  width:11.5%;margin-right:0.5%;cursor: pointer;">   
        <div id="card_prioridade" class="card">
            <div id="card_prioridade" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Prioridade</div>
                <div id="card_prioridade" style="width: 100%; margin: auto;height: 40px;">
                    <img id="imagem_prioridade" src="./Icons/prioridade_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div id="card_prioridade" class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_priorizado">0</strong></div>
           
            </div>
        </div>
    </div>
     
     <div class="form-group" onclick="filtra_icones()" id="card_desenvolvendo" style="display:inline-block;  width:11.5%;margin-right:0.5%;cursor: pointer;">   
        <div id="card_desenvolvendo" class="card">
            <div id="card_desenvolvendo" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Desenvolvendo</div>
                <div id="card_desenvolvendo" style="width: 100%; margin: auto;height: 40px;">
                    <img id="imagem_desenvolvendo" src="./Icons/em_desenvolvimento_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_desenvolvendo">0</strong></div>
           
            </div>
        </div>
    </div>
    
    <div class="form-group" onclick="filtra_icones()" id="card_revisar" style="display:inline-block;  width:11.5%;margin-right:0.5%;cursor: pointer;">   
        <div id="card_revisar" class="card">
            <div id="card_revisar" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Revisar</div>
                <div id="card_revisar" style="width: 100%; margin: auto; height: 40px">
                    <img id="imagem_revisar" src="./Icons/aguardando_revisao_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div id="card_revisar" class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_revisao">0</strong></div>
            
            </div>
        </div>
    </div>
    
    <div class="form-group" onclick="filtra_icones()" id="card_aprovacao" style="display:inline-block;  width:11.5%;margin-right:0.5%;cursor: pointer;">   
        <div id="card_aprovacao" class="card">
            <div id="card_aprovacao" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Aprova√ß√£o Arte</div>
                <div id="card_aprovacao" style="width: 100%; margin: auto; height: 40px">
                    <img id="imagem_aprovacao" src="./Icons/em_aprovacao_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div id="card_aprovacao" class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_aprovacao">0</strong></div>
            
            </div>
        </div>
    </div>
    
    <div  class="form-group" onclick="filtra_icones()" id="card_aprovacaogmg" style="display:inline-block;  width:11.5%;margin-right:0.5%;cursor: pointer;">   
        <div id="card_aprovacaogmg" class="card">
            <div id="card_aprovacaogmg" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Aprova√ß√£o GMG</div>
                <div id="card_aprovacaogmg" style="width: 100%; margin: auto; height: 40px">
                    <img id="imagem_aprovacaogmg" src="./Icons/prova_digital_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div id="card_aprovacaogmg" class="container">
                <div style="text-align: center; font-size: 2em;"><strong>0</strong></div>
            
            </div>
        </div>
    </div>
    
    <div class="form-group" onclick="filtra_icones()" id="card_aprovado" style="display:inline-block;  width:11.5%;margin-right:0.5%; cursor: pointer;">   
        <div id="card_aprovado" class="card">
            <div id="card_aprovado" style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Aprovado</div>
                <div id="card_aprovado" style="width: 100%; margin: auto; height: 40px;">
                    <img id="imagem_aprovado" src="./Icons/aprovado_off.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div  id="card_aprovado" class="container">
                <div style="text-align: center; font-size: 2em;"><strong id="strong_aprovados">0</strong></div>
           
            </div>
        </div>
    </div>
    
    <!--<div class="form-group" style="display:inline-block;  width:11.5%;">   
        <div class="card">
            <div style="text-align: center; font-size: 0.8em; margin-bottom: 10px;">Reuni√£o</div>
                <div style="width: 100%; margin: auto; height: 40px;">
                    <img src="./Icons/liberado_reuniao.png" style="height: 100%; margin-left: auto; margin-right: auto; display: flex;">
                </div>
            <div class="container">
                <div style="text-align: center; font-size: 2em;"><strong>0</strong></div>
           
            </div>
        </div>
    </div>-->
 
</div>
    </div>
    <div id="mostra_tabela_prioridade" style="display: inline-block; width: 100%;">         
    <div  style="display: inline-block; width: 70%;">
       <h5 style="display: inline-block;">Prioridade para Desenvolvimento</h5>
       </div>
       <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaPrioridade" class="input-field form-control" onkeyup="filtro_tabela_prioridade()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
        <hr>
        <table id="tabela_prioridades" class="table custom-table" style="display: inline-block">
          <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Data Libera√ß√£o
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Previs√£o de Envio
              </th>
              <th class="th-sm" style="width:3%;vertical-align: top;">Priorizar
              </th>
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        <section class="form-group col-md-10" style="display:inline-block; text-align: right;"><span id="texto_sequencia"></span></section>
        <button id="botao_alterar_sequencia" style="display: none;" class="btn btn-primary" onclick="alterar_sequencia()">Salvar Sequencia</button>
        
        
        
        <br>
        
       
        <br>
       </div>
       
       
       <div id="mostra_tabela_aguardando" style="display: inline-block; width: 100%;">  
       <div  style="display: inline-block; width: 70%;">
       <h5 style="display: inline-block;">Aguardando Prioriza√ß√£o Comercial</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaAguardando" class="input-field form-control" onkeyup="filtro_tabela_aguardando()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_aguardando" class="table custom-table" style="display: inline-block">
          <thead>
            <tr>
             
             
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:28%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" colspan="2" style="width:26%;vertical-align: top;">Data Cria√ß√£o
              </th>
              <th class="th-sm" style="width:3%;vertical-align: top;">Priorizar
              </th>
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
         <section class="form-group col-md-10" style="display:inline-block;"></section>
        <button id="botao_priorizar" style="display: none;" class="btn btn-primary" onclick="fazer_priorizacao()">Priorizar</button>
       
        
        
        
         <section class="form-group col-md-10" style="display:inline-block;"></section>
        <button id="botao_liberar" style="display: none;" class="btn btn-primary" onclick="fazer_liberacao()">Liberar para Prioriza√ß√£o</button>
       </div>
       
       
       <div id="mostra_tabela_pendente" style="display: inline-block; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <h5 style="display: inline-block;">Aguardando Libera√ß√£o para Prioriza√ß√£o Comercial</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaPendente" class="input-field form-control" onkeyup="filtro_tabela_pendente()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_pendente" class="table custom-table" style="display: inline-block;">
          <thead>
            <tr>
             
            
            <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:28%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" colspan="3" style="width:29%;vertical-align: top;">Data Cria√ß√£o
              </th>
             
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
                 
                 
       
            
             
            
            
            <!-- terminar mostra locais e come√ßa mostra registro -->
            
          
          
           
                <br>
           </div>  
           
           
       <div id="mostra_tabela_desenvolvendo" style="display: none; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <h5 style="display: inline-block;">Artes em Desenvolvimento</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaDesenvolvimento" class="input-field form-control" onkeyup="filtro_tabela_desenvolvimento()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_desenvolvimento" class="table custom-table" style="display: inline-block;">
            <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Data In√≠cio
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Previs√£o de Envio
              </th>
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
                 
                 
       
            
             
            
            
            <!-- terminar mostra locais e come√ßa mostra registro -->
            
          
          
           
                <br>
           </div> 
           
           
    <div id="mostra_tabela_revisar" style="display: none; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <img src="./Icons/artes_em_revisao.png" style="width:30px; display:inline-block; margin-right:5px;"><h5 style="display: inline-block;">Artes para Revisar</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaRevisao" class="input-field form-control" onkeyup="filtro_tabela_revisao()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_revisao" class="table custom-table" style="display: inline-block;">
            <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">In√≠cio Revis√£o
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Previs√£o de Envio
              </th>
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
        
        
                 
                 
       
            
             
            
            
            <!-- terminar mostra locais e come√ßa mostra registro -->
            
          
          
           
                <br>
           </div> 
   
     <div id="mostra_tabela_reprovados" style="display: none; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <img src="./Icons/artes_corrigir.png" style="width:30px; display:inline-block; margin-right:5px;"><h5 style="display: inline-block;">Artes para Corrigir</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaReprovadas" class="input-field form-control" onkeyup="filtro_tabela_reprovadas()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_reprovadas" class="table custom-table" style="display: inline-block;">
            <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">In√≠cio Revis√£o
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Hora Rep.
              </th>
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
        
        
                 
                 
       
            
             
            
            
            <!-- terminar mostra locais e come√ßa mostra registro -->
            
          
          
           
                <br>
           </div> 
           
           
    
    <div id="mostra_tabela_aguarda_aprovacao" style="display: none; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <!--<img src="./Icons/artes_em_revisao.png" style="width:30px; display:inline-block; margin-right:5px;">--><h5 style="display: inline-block;">Artes em Aprova√ß√£o</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaAguardaAprovacao" class="input-field form-control" onkeyup="filtro_tabela_aguarda_aprovacao()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_aguarda_aprovacao" class="table custom-table" style="display: inline-block;">
            <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">Tipo Aprov.
              </th>
              <th class="th-sm" style="width:14%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:12%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">In√≠cio Aprova√ß√£o
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">Previs√£o de Envio
              </th>
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
        
        
                 
                 
       
            
             
            
            
            
            
          
          
           
                <br>
           </div> 
           
           
  
    <div id="mostra_tabela_aguarda_envio" style="display: none; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <!--<img src="./Icons/artes_em_revisao.png" style="width:30px; display:inline-block; margin-right:5px;">--><h5 style="display: inline-block;">Artes Aguardando Envio</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaAguardaEnvio" class="input-field form-control" onkeyup="filtro_tabela_aguarda_envio()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_aguarda_envio" class="table custom-table" style="display: inline-block;">
            <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Data Revis√£o
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Previs√£o de Envio
              </th>
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
        
        
                 
                 
       
            
             
            
            
            <!-- terminar mostra locais e come√ßa mostra registro -->
            
          
          
           
                <br>
           </div> 
   
   
    <div id="mostra_tabela_aprovados" style="display: none; width: 100%;">  
       
       <div  style="display: inline-block; width: 70%;">
       <!--<img src="./Icons/artes_em_revisao.png" style="width:30px; display:inline-block; margin-right:5px;">--><h5 style="display: inline-block;">Artes Aprovadas pelo Cliente</h5>
       </div>
         <div class="input-icons" style="display: inline-block; width: 26%; margin-left: 3%;">
                <i class="fa fa-search icon"></i>
                <input id="filtrarTabelaAprovados" class="input-field form-control" onkeyup="filtro_tabela_aprovados()" style="width: 100%;border-top-left-radius: 40px;border-top-right-radius: 40px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;" type="text"> 
                </div>
     
       <hr>
        <table id="tabela_aprovados" class="table custom-table" style="display: inline-block;">
            <thead>
            <tr>
             
             
              <th class="th-sm" style="width:3%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:15%;vertical-align: top;">Cliente
              </th>
              <th class="th-sm" style="width:25%;vertical-align: top;">Descri√ß√£o
              </th>
              <th class="th-sm" style="width:6%;vertical-align: top;">Tipo
              </th>
              <th class="th-sm" style="width:16%;vertical-align: top;">Comercial
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Data Aprova√ß√£o
              </th>
              <th class="th-sm" style="width:11%;vertical-align: top;">Aprovado por
              </th>
              
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        
        
        
                 
                 
       
            
             
            
            
            
            
          
          
           
                <br>
           </div> 
              
            </div>
        
       
  	
  		
   <script src="js/popper.js"></script>
  <script src="js/main.js"></script>	
  		
  	<script>
  	    // funcoes de apoio
  	    
  	    var usuario = api.auth.get_current_user()
  	    
  	    document.getElementById("bemvindo").innerText = "Bem vindo, "+usuario.fullname
  	 //   document.getElementById("data_entrega").value = "02:00"
  	    
      function clearTable(table) {
  var rows = table.rows;
  var i = rows.length;
  while (--i) {
    rows[i].parentNode.removeChild(rows[i]);
    // or
    // table.deleteRow(i);
  }
}

function onlyUnique(value, index, self) {
  return self.indexOf(value) === index;
}

function cmyk2rgb(c, m, y, k, normalized){
    c = (c / 100);
    m = (m / 100);
    y = (y / 100);
    k = (k / 100);
    
    c = c * (1 - k) + k;
    m = m * (1 - k) + k;
    y = y * (1 - k) + k;
    
    var r = 1 - c;
    var g = 1 - m;
    var b = 1 - y;
    
    if(!normalized){
        r = Math.round(255 * r);
        g = Math.round(255 * g);
        b = Math.round(255 * b);
    }
    
    return {
        r: r,
        g: g,
        b: b
    }
}

function rgb2cmyk(r, g, b, normalized){
    var c = 1 - (r / 255);
    var m = 1 - (g / 255);
    var y = 1 - (b / 255);
    var k = Math.min(c, Math.min(m, y));
    
    c = (c - k) / (1 - k);
    m = (m - k) / (1 - k);
    y = (y - k) / (1 - k);
    
    if(!normalized){
        c = Math.round(c * 10000) / 100;
        m = Math.round(m * 10000) / 100;
        y = Math.round(y * 10000) / 100;
        k = Math.round(k * 10000) / 100;
    }
    
    c = isNaN(c) ? 0 : c;
    m = isNaN(m) ? 0 : m;
    y = isNaN(y) ? 0 : y;
    k = isNaN(k) ? 0 : k;
    
    return {
        c: c,
        m: m,
        y: y,
        k: k
    }
}



function msToTime(s) {
  var ms = s % 1000;
  s = (s - ms) / 1000;
  var secs = s % 60;
  s = (s - secs) / 60;
  var mins = s % 60;
  var hrs = (s - mins) / 60;

  return hrs + ':' + mins + ':' + secs + '.' + ms;
}

function componentToHex(c) {
  var hex = c.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}



 function array_move(arr, old_index, new_index) {
    if (new_index >= arr.length) {
        var k = new_index - arr.length + 1;
        while (k--) {
            arr.push(undefined);
        }
    }
    arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);
    return arr; // for testing
};


// preenche dados se existe ordem

if (usuario.scope_name != undefined){
    var nome_scope = usuario.scope_name[0].split("_")
   
}




   
         
// preenche data de hoje

var hoje = new Date()

  	</script>
  	
  	<script>
  	    
  	   // captura todos os tickets de uma vez
  	   
  	    var busca_todos_tickets = api.custom_objects.list_with_options("BR-VALFI_Tickets").results
  	   
  	   // sort prioridades
  	   //  var busca_prioridades = api.custom_objects.list_with_options("BR-VALFI_Tickets",["priorizado","equal to",true,"and","aprovacao","equal to", undefined],["hora_estimada.inicio","ascending"],["cliente","descricao","tipo_trabalho","responsavel_comercial","hora_estimada","complexidade","codigo_arte","item","pacote_grafico","observacoes","item_referencia","ticket_DG"]).results
   
   // sort aguardando
    // var busca_tickets = api.custom_objects.list_with_options("BR-VALFI_Tickets",["priorizado","equal to",false,"and","liberado_priorizar","equal to",true],listar_por).results
      
      // sort pendente
    //   var busca_tickets = api.custom_objects.list_with_options("BR-VALFI_Tickets",["priorizado","equal to",false,"and","liberado_priorizar","equal to",false],listar_por).results
         
        
  	    var lista_prioridades = []
  	    var lista_aguardando = []
  	    var lista_pendente = []
  	    var lista_desenvolvimento = []
  	    var lista_revisao = []
  	    var lista_aprovaext_pending = []
  	    var lista_aprovaext_sent = []
  	    var lista_aprovagmg = []
  	    var lista_aprovados = []
  	     for (i=0;i<busca_todos_tickets.length;i++){
  	         console.log("Verificando prioridade "+i)
  	         console.log(busca_todos_tickets[i].priorizado)
  	         console.log(busca_todos_tickets[i].aprovacao)
  	         console.log(busca_todos_tickets[i].arte_iniciado)
  	         if (busca_todos_tickets[i].priorizado === true && busca_todos_tickets[i].aprovacao === undefined && busca_todos_tickets[i].arte_iniciado === false){
        lista_prioridades.push(busca_todos_tickets[i])
  	         }
  	      if (busca_todos_tickets[i].priorizado === false && busca_todos_tickets[i].liberado_priorizar == true){
        lista_aguardando.push(busca_todos_tickets[i])
  	         }
  	     if (busca_todos_tickets[i].priorizado === false && busca_todos_tickets[i].liberado_priorizar == false){
        lista_pendente.push(busca_todos_tickets[i])
  	         } 
  	         
  	     if (busca_todos_tickets[i].arte_iniciado === true && busca_todos_tickets[i].arte_finalizado == false){
        lista_desenvolvimento.push(busca_todos_tickets[i])
  	         } 
  	     if (busca_todos_tickets[i].arte_iniciado === true && busca_todos_tickets[i].arte_finalizado == true && busca_todos_tickets[i].pacote_grafico.hora_aprovado === undefined){
        lista_revisao.push(busca_todos_tickets[i])
  	         } 
  	     if (busca_todos_tickets[i].pacote_grafico != undefined){
  	     if (busca_todos_tickets[i].pacote_grafico.hora_aprovado != undefined){
  	         
  	     if  (busca_todos_tickets[i].status_aprovacao_arte === undefined || busca_todos_tickets[i].status_aprovacao_arte === "retrabalho"){
        lista_aprovaext_pending.push(busca_todos_tickets[i])
  	         } 
  	      if  (busca_todos_tickets[i].status_aprovacao_arte === "pending"){
        lista_aprovaext_sent.push(busca_todos_tickets[i])
  	         } 
  	          if  (busca_todos_tickets[i].status_aprovacao_arte === "accept"){
        lista_aprovados.push(busca_todos_tickets[i])
  	         } 
  	     }
  	     }
    }
    document.getElementById("strong_priorizar").innerText = lista_aguardando.length
    document.getElementById("strong_pendente").innerText = lista_pendente.length
    document.getElementById("strong_desenvolvendo").innerText = lista_desenvolvimento.length
    document.getElementById("strong_revisao").innerText = lista_revisao.length
    document.getElementById("strong_aprovacao").innerText = lista_aprovaext_pending.length+lista_aprovaext_sent.length
    document.getElementById("strong_aprovados").innerText = lista_aprovados.length
  
        
  	</script>
  	
  	
  	
  	
  	
   <script>
       function salva_ticket(){
           var data = {}
            data["tipo_trabalho"] = document.getElementById("tipo_trabalho").value
            data["criado_em"] = new Date()
            data["criado_por"] = usuario
            var info_arte = {}
            info_arte["codigo"] = document.getElementById("codigo_arte").value
            info_arte["revisao"] = document.getElementById("arte_revisao").value
            info_arte["evolucao"] = document.getElementById("arte_evolucao").value
            data["info_arte"] = info_arte
            data["cliente"] = document.getElementById("cliente").value
            data["responsavel_comercial"] = document.getElementById("responsavel_comercial").value
            data["descricao"] = document.getElementById("descricao").value
            data["item"] = document.getElementById("item").value
            data["item_referencia"] = document.getElementById("item_referencia").value
            data["priorizado"] = false
            data["arte_iniciado"] = false
            data["arte_finalizado"] = false
            data["ticket_dg"] = document.getElementById("numero_ticket").value
            var info_checklist = {}
            info_checklist["Arte OK"] = document.getElementById("Arte OK").checked
            info_checklist["Referencia de Cor"] = document.getElementById("Referencia de Cor").checked
            info_checklist["Especificacao"] = document.getElementById("Especificacao").checked
            data["checklist_entrada"] = info_checklist
            console.log(data)
            var info_observa = {}
            info_observa["quem"] = usuario
            info_observa["quando"] = new Date()
            info_observa["texto"] = document.getElementById("observacoes").value
            var as_observacoes = []
            as_observacoes.push(info_observa)
            data["observacoes"] = as_observacoes
            
            
            //api.custom_objects.create("BR-VALFI_Tickets",data)
           
           // document.getElementById("info_ticket").innerText = "Ticket criado com sucesso!"
            
           setTimeout(function(){document.getElementById("info_ticket").innerText = ""}, 3000);
       }
       
      
   </script>

<script>
    //<------- AQUI COMECAM AS FUNCOES DAS TABELAS --------->
    
       function preenche_aguardando(){
  	        
  	     clearTable(document.getElementById("tabela_aguardando"))
  	     
  	    
         
       //  var busca_tickets = api.custom_objects.list_with_options("BR-VALFI_Tickets",["priorizado","equal to",false,"and","liberado_priorizar","equal to",true],listar_por).results
          
         var table = document.getElementById("tabela_aguardando")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_aguardando.length;i++){
            var row =  table.insertRow(qtasrow);
            
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            cell7.colSpan = "2"
            var cell8 = row.insertCell(7);
           
          
           var a_data = dateFormat(lista_aguardando[i].criado_em,"dd/mm/yyyy - HH:MM")
            
            var cor_arte = "red"
            
            
            var complex = lista_aguardando[i].complexidade
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_aguardando[i].complexidade)
            }
            if (numero_horas <= 5){
                cor_arte = "orange"
            }
            if (numero_horas <= 3){
                cor_arte = "#00FF00"
            }
            if (numero_horas > 24){
                cor_arte = "violet"
            }
            
            console.log("numero_horas")
            console.log(numero_horas)
            console.log(cor_arte)
           
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
           cell2.innerHTML = '<div style="font-size:1em; cursor: pointer"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_aguardando[i]._id+'" onclick="mostraDisclosure2()"></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_aguardando[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em;">'+lista_aguardando[i].descricao+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_aguardando[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_aguardando[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+a_data+'hs</div>'
            cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><img src="./Icons/prioriza_off.png" width="20px" id="'+lista_aguardando[i]._id+'" onclick="priorizar()"></div>'
            
            qtasrow = qtasrow +1
            
               var table = document.getElementById("tabela_aguardando")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_aguardando[i].pacote_grafico != undefined){
                preview_icon = lista_aguardando[i].pacote_grafico.preview
                link_proofscope = lista_aguardando[i].pacote_grafico.proofscope
                icone_zip = "./Icons/download.png"
                link_zip = lista_aguardando[i].pacote_grafico.zip
                   }
            if (lista_aguardando[i].tipo_trabalho === "ALTERA√á√ÉO"){
               var link_zip_ref = lista_aguardando[i].pacote_grafico_ref.zip 
                
            }
         
            
          
            
          
            var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 9
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 13%; display: inline-block; vertical-align: top;"><p style="text-align: left; font-size: 1em">Previs√£o de Inicio:<br> <strong>'+a_data+'</strong><br>'
            string_div = string_div+'<div style="width: 100%; margin: auto;><a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="50%" style="margin: auto;"></a></div></div>'
            
            // segunda coluna
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width: 40%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥digo de arte: <strong>'+lista_aguardando[i].codigo_arte+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥d. Refer√™ncia: <strong>'+lista_aguardando[i].item_referencia+'</strong><br></div>'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Item: <strong>'+lista_aguardando[i].item+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Ticket DG: <strong>'+lista_aguardando[i].ticket_DG+'</strong><br></div></div>'
            
            string_div = string_div+'<div style="width: 55%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip+'"><img src="'+icone_zip+'" width="30px"></a><span><strong> Download ZIP</strong></span><br></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%; padding-left: 9%">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="editar_ospg.html?ordem='+lista_aguardando[i]._id+'"><img src="'+icone_ospg+'" width="25px"></a><span><strong> OSPG</strong></span></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
            string_div = string_div+'<a  href="edicaoticket_mg4.html?ordem='+lista_aguardando[i]._id+'" style="cursor: pointer"><img src="./Icons/ver_ticket.png" width="25px"></a><span><strong> Ver Ticket</strong></span></div>'
           
           if (lista_aguardando[i].tipo_trabalho === "ALTERA√á√ÉO"){
            string_div = string_div+'<div style="width: 30%; display: inline-block; position:relative; float:left; vertical-align: left; margin-left: 3%">'
           string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip_ref+'"><img src="./Icons/download.png" width="30px"></a><span><strong> Arte Antiga</strong></span></p></div>'
           }
           
           if (usuario.active_scope_name === "gestor_mg4" || usuario.fullname == "Administrator"){
           string_div = string_div+'<div style="width: 27%; display: inline-block; position:relative; float:right; margin-right: 0%">'
           string_div = string_div+'<p style="text-align: left; font-size: 1em"><img id="'+lista_aguardando[i]._id+'_apagar" onclick="apagar_aguardando()" src="./Icons/delete.png" width="30px" style="cursor: pointer"><span><strong> Apagar Ticket</strong></span></p></div></div>'
           }
            string_div = string_div+'<div style="width: 100%; display: inline-block; margin-left: 2%; vertical-align: top">'
            
            var theobserva = lista_aguardando[i].observacoes
            
            string_div = string_div+'<div style="width: 10%;display: inline-block; border-bottom: 1px solid black; text-align: center">Data</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; border-bottom: 1px solid black; text-align: center">Usu√°rio</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; border-bottom: 1px solid black; text-align: center">Observa√ß√£o</div>'
           
           
            for (y=0;y<theobserva.length;y++){
            string_div = string_div+'<div style="width: 10%;display: inline-block; text-align: center">'+dateFormat(new Date(theobserva[y].quando),"dd/mm/yyyy")+'</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; text-align: center">'+theobserva[y].quem.fullname+'</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; text-align: center">'+theobserva[y].texto+'</div>'
           
                
                
                
            }
           
            
            string_div = string_div+'</div></div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
      
        
        
    }
  	   document.getElementById("strong_priorizar").innerText = lista_aguardando.length
  	  preenche_prioridades()
  	    }
  	    
  	    function apagar_aguardando(){
  	      var linha = event.srcElement.id
  	     console.log(linha)  
  	     var linha_array = linha.split("_")
  	   i 
  	     for (i=0;i<lista_aguardando.length;i++){
  	         if (lista_aguardando[i]._id == linha_array[0]){
  	             if (confirm("Deseja mesmo apagar o ticket "+lista_aguardando[i].descricao) === true){
  	                  api.custom_objects.delete("BR-VALFI_Tickets",linha_array[0])
  	             var tira = lista_aguardando.splice(i,1)
  	             }
  	         }
  	     }
  	     preenche_aguardando()
  	    }
  	    
  	    var array_prioriza = []
  	    
  	 	 function priorizar(){
  	    
  	     var linha = event.srcElement.id
  	     console.log(linha)
  	     console.log("indice da linha")
  	     console.log(array_prioriza.indexOf(linha))
  	     if (array_prioriza.indexOf(linha) === -1){
  	     console.log("vou alterar")
  	     document.getElementById(linha).src = "./Icons/prioriza_on.png"
  	     array_prioriza.push(linha)
  	     } else {
  	        for (i=0;i<array_prioriza.length;i++){
  	            if (array_prioriza[i] === linha){
  	                var tira = array_prioriza.splice(i,1)
  	            }
  	        }
  	       document.getElementById(linha).src = "./Icons/prioriza_off.png"  
  	     }
  	     console.log(array_prioriza.length)
  	     if (array_prioriza.length > 0){
  	         document.getElementById("botao_priorizar").style = "display: inline-block;cursor: pointer; margin-left: 9%;" 
  	     } else {
  	        document.getElementById("botao_priorizar").style  = "display: none;" 
  	     }
  	     
  	 	 }
  	 	 
  	function fazer_priorizacao(){
  	    console.log("tenho esses "+array_prioriza.length)
  	    for (y=0; y<array_prioriza.length; y++){
  	        console.log("Estou fazendo o y "+y)
  	     var busca_ticket = api.custom_objects.list_with_options("BR-VALFI_Tickets",["_id","equal to",array_prioriza[y]]).results[0]
  	     var existe_prioridade = api.custom_objects.list_with_options("BR-VALFI_Tickets",["priorizado","equal to",true,"and","arte_iniciado","equal to",false],["hora_estimada.final","ascending"]).results 
  	     
  	     // finaliza o tempo de libera√ß√£o e inicia desenvolvimento
  	     
  	      var tempos_liberacao = []
          var tempos_desenvolvimento = []
         
          var tempos_atuais = busca_ticket.tempo_processo
          
          for (j=0;j<tempos_atuais.length;j++){
              
              if (tempos_atuais[j].etapa == "Desenvolvimento"){
                  tempos_desenvolvimento = tempos_atuais[j].tempos
                 var indice = j
              }
              
              
              if (tempos_atuais[j].etapa == "Libera√ß√£o Comercial"){
                  busca_ticket.tempo_processo[j].tempos[busca_ticket.tempo_processo[j].tempos.length-1]["final"] = new Date()
                  
              }
          }
          
          
          if (tempos_desenvolvimento.length === 0){
                        var newprocess = {}
                        newprocess["etapa"]= "Desenvolvimento"
                        
                       var info_tempo = {}
                       info_tempo["inicio"] = new Date()
                       tempos_desenvolvimento.push(info_tempo)
                       newprocess["tempos"] = tempos_desenvolvimento
            
                      busca_ticket.tempo_processo.push(newprocess)
          } else {
              var info_tempo = {}
              info_tempo["inicio"] = new Date()
              busca_ticket.tempo_processo[indice].tempos.push(info_tempo)
          }
          var novos_tempos = busca_ticket.tempo_processo
    
        var testeupdate =  api.custom_objects.set_keys("BR-VALFI_Tickets",busca_ticket._id,{"tempo_processo":novos_tempos})
    
  	     
  	     if (existe_prioridade.length < 2){
  	      
  	      var inicio = new Date()
  	  
  	      //inicio.setHours(inicio.getHours()+3)
  	      var info_inicio = {}
  	      info_inicio["liberacao"] = new Date(inicio)
  	           
  	         if (inicio.getDay() < 5 && inicio.getDay() > 0 ){
  	             if (inicio.getHours() < 10){
  	                 inicio.setHours(13,0,0,0)
  	             } else if (inicio.getHours() < 13){
  	                 inicio.setHours(15,0,0,0)
  	             } else {
  	                 
  	                 inicio.setHours(8,0,0,0)
  	                 
  	             }
  	             inicio.setDate(inicio.getDate()+1)
  	         } else if (inicio.getDay() === 5){
  	             
  	                 inicio.setDate(inicio.getDate()+3)
  	                 inicio.setHours(8,0,0,0)
  	             
  	             
  	         } else if (inicio.getDay() === 6){
  	             
  	                 
  	                 inicio.setHours(8,0,0,0)
  	             
  	             inicio.setDate(inicio.getDate()+2)
  	         } else if (inicio.getDay() === 0){
  	            inicio.setHours(8,0,0,0)
  	             
  	             inicio.setDate(inicio.getDate()+1) 
  	         } 
  	          
  	        info_inicio["inicio"] = inicio
  	        
  	        var hora_de_inicio = new Date(info_inicio.inicio)
  	       
  	        
  	            var complex = busca_ticket.complexidade
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(busca_ticket.complexidade)
            }
            var hora_do_almoco = 0
            if (numero_horas < 8){
            if (hora_de_inicio.getHours() < 12 && hora_de_inicio.getHours()+numero_horas > 12){
                hora_do_almoco = 1
            } else if (hora_de_inicio.getHours() > 12){
                if ((numero_horas-4)-(17-hora_de_inicio.getHours()) < 0){
                    hora_do_almoco = 1
                }
            }
            
            } else {
               hora_do_almoco = parseInt((numero_horas - hora_de_inicio.getHours())/8)
                
            } 
            
            
            numero_horas = numero_horas+hora_do_almoco
            
            var horas_que_sobram = 17-hora_de_inicio.getHours()
            if (horas_que_sobram > numero_horas){
                hora_de_inicio.setHours(hora_de_inicio.getHours()+numero_horas)
            } else {
                var dias_somar = 1
                var dias_de_trabalho = parseInt(numero_horas/8)
                dias_somar = dias_somar+dias_de_trabalho
                hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
                console.log("NUMERO HORAS")
                console.log(numero_horas)
                var pct_de_horas = ((numero_horas-horas_que_sobram)/8)%1
                console.log("PCT HORAS")
                console.log(pct_de_horas)
                var horas_adicionar = parseInt(pct_de_horas*8)
                
                hora_de_inicio.setHours(8+horas_adicionar,0,0,0)
                
            }
  	      
  	      
  	     
  	        info_inicio["final"] = new Date(hora_de_inicio) 
  	   
  	     
  	    
  	 
  	      
  	    api.custom_objects.set_keys("BR-VALFI_Tickets",array_prioriza[y],{"priorizado": true,"hora_estimada":info_inicio})
  	    var buscaID = api.custom_objects.list_with_options("BR-VALFI_Tickets",["_id","equal to",array_prioriza[y]]).results[0]
  	   lista_prioridades.push(buscaID)
  	   for (k=0;k<lista_aguardando.length;k++){
  	       if (lista_aguardando[k]._id == array_prioriza[y]){
  	           var tira = lista_aguardando.splice(k,1)
  	       }
  	   }
  	    preenche_aguardando()
  	     } 
  	     
  	     else {
  	        var ultima_hora = new Date(existe_prioridade[existe_prioridade.length-1].hora_estimada.final)
  	        var penultima_hora = new Date(existe_prioridade[existe_prioridade.length-2].hora_estimada.final)
  	        if (ultima_hora < penultima_hora){
  	            var hora_a_buscar = ultima_hora
  	        } else {
  	            var hora_a_buscar = penultima_hora
  	            
  	        }
  	        
  	        // calcula complexidade e numero de hroas de trabalho
  	        
  	            var complex = busca_ticket.complexidade
        
            if (complex.indexOf(":") > -1){
            
                var complex_array = complex.split(":")
              
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(busca_ticket.complexidade)
            }
  	        
  	        var hora_do_almoco = 0
            if (numero_horas < 8){
            if (hora_a_buscar.getHours() < 12 && hora_a_buscar.getHours()+numero_horas > 12){
                hora_do_almoco = 1
            } else if (hora_a_buscar.getHours() > 12){
                if ((numero_horas-4)-(17-hora_a_buscar.getHours()) < 0){
                    hora_do_almoco = 1
                }
            }
            
            } else {
               hora_do_almoco = parseInt((numero_horas - hora_a_buscar.getHours())/8)
                
            } 
            
            
            numero_horas = numero_horas+hora_do_almoco
  	        
  	        
  	         var info_inicio = {}
  	     
  	         var inicio = new Date(hora_a_buscar)
  	         if (inicio.getHours() == 12){
  	             inicio.setHours(inicio.getHours()+1)
  	         }
  	         
  	        var qtos_dias_somar = parseInt(numero_horas%8)
  	        
  	        var horas_que_sobram = 17-inicio.getHours()
  	        
  	       if (horas_que_sobram > numero_horas){
  	           
  	          info_inicio["inicio"] = new Date(inicio)
  	          var horas_pendentes = numero_horas
  	          var oquesou = "mesmodia"
  	       } else if (horas_que_sobram >= numero_horas/2){
  	            info_inicio["inicio"] = new Date(inicio)
  	            var horas_pendentes = numero_horas-horas_que_sobram
  	             var oquesou = "mesmodia_maspassoparaoutro"
  	       } else {
  	           inicio.setDate(inicio.getDate()+1)
  	           inicio.setHours(8,0,0,0)
  	           if (inicio.getDay() === 5){
  	               inicio.setDate(inicio.getDate()+3)
  	           }
  	           if (inicio.getDay() === 6){
  	               inicio.setDate(inicio.getDate()+2)
  	           }
  	           if (inicio.getDay() === 0){
  	               inicio.setDate(inicio.getDate()+1)
  	           }
  	           info_inicio["inicio"] = new Date(inicio)
  	           var horas_pendentes = numero_horas
  	            var oquesou = "comecoas8"
  	       }
  	       
  	      
  	       
  	        
  	        var hora_de_inicio = new Date(info_inicio.inicio)
  	    
  	        
  	        if (oquesou == "mesmodia"){
  	           hora_de_inicio.setHours(hora_de_inicio.getHours()+numero_horas)
  	            
  	        } else if (oquesou == "mesmodia_maspassoparaoutro"){
  	            var qtas_cabem = 17-hora_de_inicio.getHours()
  	            var horas_que_sobram = numero_horas-qtas_cabem
  	            console.log("hora que sobram ---> "+horas_que_sobram)
  	            if ((horas_que_sobram/8) <= 1){
  	                hora_de_inicio.setHours(8+horas_que_sobram,0,0,0)
  	                hora_de_inicio.setDate(hora_de_inicio.getDate()+1)
  	            } else {
  	               var dias_somar = parseInt(horas_que_sobram/8)+1
  	               hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
  	               if (hora_de_inicio.getDay() === 6){
  	                   hora_de_inicio.setDate(hora_de_inicio.getDate()+2)
  	               }
  	               if (hora_de_inicio.getDay() === 0){
  	                   hora_de_inicio.setDate(hora_de_inicio.getDate()+1)
  	               }
  	               var pct_horas = (horas_que_sobram/8)%1
  	               var total_horas = parseInt(pct_horas*8)
  	               hora_de_inicio.setHours(8+total_horas,0,0,0)
  	               
  	            }
  	            
  	            
  	        } else {
  	            
  	            if ((numero_horas/8) <= 1){
  	                hora_de_inicio.setHours(8+numero_horas,0,0,0)
  	            } else {
  	               var dias_somar = parseInt(numero_horas/8)
  	               hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
  	               if (hora_de_inicio.getDay() === 6){
  	                   hora_de_inicio.setDate(hora_de_inicio.getDate()+2)
  	               }
  	               if (hora_de_inicio.getDay() === 0){
  	                   hora_de_inicio.setDate(hora_de_inicio.getDate()+1)
  	               }
  	               var pct_horas = (horas_que_sobram/8)%1
  	               var total_horas = parseInt(pct_horas*8)
  	               hora_de_inicio.setHours(8+total_horas,0,0,0)
  	            
  	            
  	        }
  	        }
  	        
  	        if (hora_de_inicio.getDay() == 6){
  	            hora_de_inicio.setDate(hora_de_inicio.getDate()+2)
  	        }
  	        if (hora_de_inicio.getDay() == 0){
  	            hora_de_inicio.setDate(hora_de_inicio.getDate()+1)
  	        }
  	      
  	        
  	        info_inicio["final"] = new Date(hora_de_inicio) 
  	        console.log("INFO PARA BASE")
  	        console.log(info_inicio)
  	      
  	          
  	       api.custom_objects.set_keys("BR-VALFI_Tickets",array_prioriza[y],{"priorizado": true,"hora_estimada":info_inicio})
  	      
  	       
  	        
  	           
  	         
  	        
  	     var buscaID = api.custom_objects.list_with_options("BR-VALFI_Tickets",["_id","equal to",array_prioriza[y]]).results[0]
  	     lista_prioridades.push(buscaID)
  	    // preenche_aguardando("criado_em")
  	       
  	     } 
  	     
  	    
  	    for (p=0;p<lista_aguardando.length;p++){
  	     if (lista_aguardando[p]._id == array_prioriza[y]){
  	           var tira = lista_aguardando.splice(p,1)
  	       }
  	   }
  	    
  	     
  	    }
  	   document.getElementById("botao_priorizar").style  = "display: none;" 
  	  array_prioriza = [] 
  	  preenche_aguardando()
  	}
  	         
  	     
  	 

</script>


<script>
    //<------- AQUI COMECAM AS FUNCOES DAS TABELAS --------->
    
       function preenche_pendente(){
  	        
  	     clearTable(document.getElementById("tabela_pendente"))
  	     
  	    
         
          
         var table = document.getElementById("tabela_pendente")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_pendente.length;i++){
            var row =  table.insertRow(qtasrow);
            
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            cell7.colSpan = "3"
          
           var a_data = dateFormat(lista_pendente[i].criado_em,"dd/mm/yyyy - HH:MM")
            
            var cor_arte = "red"
            if (lista_pendente[i].complexidade === "baixo"){
                cor_arte = "#00FF00"
            }
            if (lista_pendente[i].complexidade === "medio"){
                cor_arte = "orange"
            }
            
           
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_pendente[i]._id+'" onclick="mostraDisclosure3()"></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_pendente[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em;">'+lista_pendente[i].descricao+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_pendente[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_pendente[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+a_data+'hs</div>'
            
            qtasrow = qtasrow +1
            
               var table = document.getElementById("tabela_pendente")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_pendente[i].pacote_grafico != undefined){
                preview_icon = lista_pendente[i].pacote_grafico.preview
                link_proofscope = lista_pendente[i].pacote_grafico.proofscope
                icone_zip = "./Icons/download.png"
                link_zip = lista_pendente[i].pacote_grafico.zip
                   }
            
             if (lista_pendente[i].tipo_trabalho === "ALTERA√á√ÉO"){
               var link_zip_ref = lista_pendente[i].pacote_grafico_ref.zip 
                
            }
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 9
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 13%; display: inline-block; vertical-align: top;"><p style="text-align: left; font-size: 1em">Previs√£o de Inicio:<br> <strong>'+a_data+'</strong><br>'
            string_div = string_div+'<div style="width: 100%; margin: auto;"><a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="50%" style="margin: auto;"></a></div></div>'
            
            // segunda coluna
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width: 40%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥digo de arte: <strong>'+lista_pendente[i].codigo_arte+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥d. Refer√™ncia: <strong>'+lista_pendente[i].item_referencia+'</strong><br></div>'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Item: <strong>'+lista_pendente[i].item+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Ticket DG: <strong>'+lista_pendente[i].ticket_DG+'</strong><br></div></div>'
            
            string_div = string_div+'<div style="width: 55%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip+'"><img src="'+icone_zip+'" width="30px"></a><span><strong> Download ZIP</strong></span><br></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%; padding-left: 9%">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="editar_ospg.html?ordem='+lista_pendente[i]._id+'"><img src="'+icone_ospg+'" width="25px"></a><span><strong> OSPG</strong></span></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
            string_div = string_div+'<a  href="edicaoticket_mg4.html?ordem='+lista_pendente[i]._id+'" style="cursor: pointer"><img src="./Icons/ver_ticket.png" width="25px"></a><span><strong> Ver Ticket</strong></span></div></div>'
            string_div = string_div+'<div style="width: 100%; display: inline-block; margin-left: 2%; vertical-align: top">'
            if (lista_pendente[i].tipo_trabalho === "ALTERA√á√ÉO"){
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
           string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip_ref+'"><img src="./Icons/download.png" width="30px"></a><span><strong> Arte Antiga</strong></span><br></div>'
           }
            
            var theobserva = lista_pendente[i].observacoes
            
            string_div = string_div+'<div style="width: 10%;display: inline-block; border-bottom: 1px solid black; text-align: center">Data</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; border-bottom: 1px solid black; text-align: center">Usu√°rio</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; border-bottom: 1px solid black; text-align: center">Observa√ß√£o</div>'
           
           
            for (y=0;y<theobserva.length;y++){
            string_div = string_div+'<div style="width: 10%;display: inline-block; text-align: center">'+dateFormat(new Date(theobserva[y].quando),"dd/mm/yyyy")+'</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; text-align: center">'+theobserva[y].quem.fullname+'</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; text-align: center">'+theobserva[y].texto+'</div>'
           
                
                
                
            }
           
            
            string_div = string_div+'</div></div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
      
      
        
        
    }
  	   
  	
  	    }
  	    
  	     function liberar(){
  	     var linha = event.srcElement.id
  	     console.log(linha)
  	     
  	     
  	 	 }
  	 	 
  	         
  	     
  	 

</script>
<script>
    
    // preenche Counts 
    
    
    
    
     function preenche_prioridades(){
  	        
  	     clearTable(document.getElementById("tabela_prioridades"))
  	     
  	     
  	       lista_prioridades.sort(function(a, b) {
    return new Date(a.hora_estimada.inicio) - new Date(b.hora_estimada.inicio);
})
  	     
         var table = document.getElementById("tabela_prioridades")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_prioridades.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
            var cell9 = row.insertCell(8);
           
          
           var a_data = dateFormat(lista_prioridades[i].hora_estimada.inicio,"dd/mm/yyyy - HH:MM")
           var a_data2 = dateFormat(lista_prioridades[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data3 = dateFormat(lista_prioridades[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_prioridades[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                console.log(complex_array[0])
                console.log(complex_array[1])
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_prioridades[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_prioridades[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
           console.log((limite - agoramesmo)/3600000)
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_prioridades[i]._id+'" onclick="mostraDisclosure()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_prioridades[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_prioridades[i].descricao+' - '+lista_prioridades[i].complexidade+'hs - '+a_data+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_prioridades[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_prioridades[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+a_data3+'hs</div>'
            
            cell8.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            cell9.innerHTML = '<div style="width: 30px; display: inline-block"><div style="width: 25px; margin: auto;"><img id="moveacima_'+i+'" onclick="move_acima2()" style="cursor:pointer;" src="./Icons/move_acima.png" width="20px"><br><img id="moveabaixo_'+i+'" onclick="move_abaixo2()" style="cursor:pointer;" src="./Icons/move_abaixo.png" width="20px"></div></div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_prioridades")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_prioridades[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_prioridades[i].pacote_grafico.preview
                link_proofscope = lista_prioridades[i].pacote_grafico.proofscope
                icone_zip = "./Icons/download.png"
                link_zip = lista_prioridades[i].pacote_grafico.zip
            }
            
            
             if (lista_prioridades[i].tipo_trabalho === "ALTERA√á√ÉO"){
                var link_zip_ref = ""
                if (lista_prioridades[i].pacote_grafico_ref != undefined){
               var link_zip_ref = lista_prioridades[i].pacote_grafico_ref.zip
                }
                
            }
            
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 9
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 13%; display: inline-block; vertical-align: top; margin: auto"><p style="text-align: left; font-size: 1em">Previs√£o de Inicio:<br> <strong>'+a_data+'</strong><br>'
            string_div = string_div+'<div style="width: 100%; margin: auto;"><a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="50%" style="margin: auto;"></a></div></div>'
            
            // segunda coluna
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width: 40%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥digo de arte: <strong>'+lista_prioridades[i].codigo_arte+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥d. Refer√™ncia: <strong>'+lista_prioridades[i].item_referencia+'</strong><br></div>'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Item: <strong>'+lista_prioridades[i].item+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Ticket DG: <strong>'+lista_prioridades[i].ticket_DG+'</strong><br></div></div>'
            
            string_div = string_div+'<div style="width: 55%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 24%; display: inline-block; vertical-align: center">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip+'"><img src="'+icone_zip+'" width="30px"></a><span><strong> Download ZIP</strong></span><br></div>'
            string_div = string_div+'<div style="width: 24%; display: inline-block; vertical-align: center; margin-left: 1%;">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="editar_ospg.html?ordem='+lista_prioridades[i]._id+'"><img src="'+icone_ospg+'" width="25px"></a><span><strong> OSPG</strong></span></div>'
            string_div = string_div+'<div style="width: 24%; display: inline-block; vertical-align: center; margin-left: 1%">'
            string_div = string_div+'<a  href="edicaoticket_mg4.html?ordem='+lista_prioridades[i]._id+'" style="cursor: pointer"><img src="./Icons/ver_ticket.png" width="25px"></a><span><strong> Ver Ticket</strong></span></div>'
            string_div = string_div+'<div   style="width: 24%; display: inline-block; vertical-align: center; margin-left: 1%;">'
            string_div = string_div+'<img id="'+lista_prioridades[i]._id+'" onclick="despriorizar()" src="./Icons/despriorizar.png" width="25px" style="cursor: pointer;"><span><strong> Despriorizar</strong></span></div></div>'
            if (lista_prioridades[i].tipo_trabalho === "ALTERA√á√ÉO"){
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
           string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip_ref+'"><img src="./Icons/download.png" width="30px"></a><span><strong> Arte Antiga</strong></span><br></div>'
           }
            string_div = string_div+'<div style="width: 100%; display: inline-block; margin-left: 2%; vertical-align: top">'
            
            var theobserva = lista_prioridades[i].observacoes
            
            string_div = string_div+'<div style="width: 10%;display: inline-block; border-bottom: 1px solid black; text-align: center">Data</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; border-bottom: 1px solid black; text-align: center">Usu√°rio</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; border-bottom: 1px solid black; text-align: center">Observa√ß√£o</div>'
           
           
            for (y=0;y<theobserva.length;y++){
            string_div = string_div+'<div style="width: 10%;display: inline-block; text-align: center">'+dateFormat(new Date(theobserva[y].quando),"dd/mm/yyyy")+'</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; text-align: center">'+theobserva[y].quem.fullname+'</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; text-align: center">'+theobserva[y].texto+'</div>'
           
                
                
                
            }
           
            
            string_div = string_div+'</div></div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
        
        
    }
    
   
    
    
    document.getElementById("strong_priorizado").innerText = lista_prioridades.length
   preenche_pendente()
  	    }
  	    
  	  function move_acima2(){
      var linha = event.srcElement.id
    console.log(linha)
    var linha_array = linha.split("_")
    var numero = parseInt(linha_array[1])
   console.log(numero) 
    
   //  document.getElementById("botao_alterar_sequencia").style.display = "inline-block"
    if (numero > 0){
        
        var hora1 = new Date(lista_prioridades[numero-1].hora_estimada.inicio)
        
        var agoramemo = new Date()
        console.log("HORA 1")
        console.log(hora1.getTime())
        console.log("AGORA MEMO")
        console.log(agoramemo.getTime())
        if (lista_prioridades[numero-1].arte_finalizado === true){
            alert("A arte "+lista_prioridades[numero-1].descricao+" est√° em execu√ß√£o e n√£o pode ser alterada na ordem")
        } else {
        if (hora1.getTime() < agoramemo.getTime()){
            alert("N√£o √© poss√≠vel priorizar depois da hora de inicio")
        } else {
           lista_prioridades[numero].hora_estimada.inicio =  lista_prioridades[numero-1].hora_estimada.inicio
           console.log("Nova Hora de INICIO")
            console.log(new Date(lista_prioridades[numero].hora_estimada.inicio))
            
             var hora_de_inicio = new Date(lista_prioridades[numero].hora_estimada.inicio)
  	        console.log("INICIO")
  	        console.log(hora_de_inicio)
  	        
  	            var complex = lista_prioridades[numero].complexidade
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_prioridades[numero].complexidade)
            }
            
            
            var hora_do_almoco = 0
            if (numero_horas < 8){
            if (hora_de_inicio.getHours() < 12 && hora_de_inicio.getHours()+numero_horas > 12){
                hora_do_almoco = 1
            } else if (hora_de_inicio.getHours() > 12){
                if (numero_horas <= 4){
                    hora_do_almoco = 0
                } else {
                if ((numero_horas-4)-(17-hora_de_inicio.getHours()) < 0){
                    hora_do_almoco = 1
                }
            }
            
            }
            } else {
               hora_do_almoco = parseInt((numero_horas - hora_de_inicio.getHours())/8)
                
            } 
            
            
            numero_horas = numero_horas+hora_do_almoco
            
            var horas_que_sobram = 17-hora_de_inicio.getHours()
            if (horas_que_sobram > numero_horas){
                hora_de_inicio.setHours(hora_de_inicio.getHours()+numero_horas)
            } else {
                var dias_somar = 1
                var dias_de_trabalho = parseInt(numero_horas/8)
                dias_somar = dias_somar+dias_de_trabalho
                hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
                console.log("NUMERO HORAS")
                console.log(numero_horas)
                var pct_de_horas = ((numero_horas-horas_que_sobram)/8)%1
                console.log("PCT HORAS")
                console.log(pct_de_horas)
                var horas_adicionar = parseInt(pct_de_horas*8)
                
                hora_de_inicio.setHours(8+horas_adicionar,0,0,0)
                
            }
  	      
  	      
  	     
  	        lista_prioridades[numero].hora_estimada.final = new Date(hora_de_inicio)
            console.log(lista_prioridades[numero].hora_estimada.final)
            array_move(lista_prioridades,numero,numero-1)
            if (numero == 1){
                numero = numero+1
            }
            for (i=numero;i<lista_prioridades.length;i++){
                var anteriores = []
                anteriores.push(lista_prioridades[i-1].hora_estimada.final)
                anteriores.push(lista_prioridades[i-2].hora_estimada.final)
                console.log(lista_prioridades[i-1].hora_estimada.final)
                console.log(lista_prioridades[i-2].hora_estimada.final)
                anteriores.sort(function(a, b) {
                return new Date(b).getTime() - new Date(b).getTime();
                })
                
            lista_prioridades[i].hora_estimada.inicio = new Date(anteriores[1])
            
            
             var hora_de_inicio = new Date(lista_prioridades[i].hora_estimada.inicio)
  	        console.log("INICIO")
  	        console.log(hora_de_inicio)
  	        
  	            var complex = lista_prioridades[i].complexidade
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_prioridades[i].complexidade)
            }
            
            
            var hora_do_almoco = 0
            if (numero_horas < 8){
            if (hora_de_inicio.getHours() < 12 && hora_de_inicio.getHours()+numero_horas > 12){
                hora_do_almoco = 1
            } else if (hora_de_inicio.getHours() > 12){
                if (numero_horas <= 4){
                    hora_do_almoco = 0
                } else {
                if ((numero_horas-4)-(17-hora_de_inicio.getHours()) < 0){
                    hora_do_almoco = 1
                }
            }
            
            }
            } else {
               hora_do_almoco = parseInt((numero_horas - hora_de_inicio.getHours())/8)
                
            } 
            
            
            numero_horas = numero_horas+hora_do_almoco
            
            var horas_que_sobram = 17-hora_de_inicio.getHours()
            if (horas_que_sobram > numero_horas){
                hora_de_inicio.setHours(hora_de_inicio.getHours()+numero_horas)
            } else {
                var dias_somar = 1
                var dias_de_trabalho = parseInt(numero_horas/8)
                dias_somar = dias_somar+dias_de_trabalho
                hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
                console.log("NUMERO HORAS")
                console.log(numero_horas)
                var pct_de_horas = ((numero_horas-horas_que_sobram)/8)%1
                console.log("PCT HORAS")
                console.log(pct_de_horas)
                var horas_adicionar = parseInt(pct_de_horas*8)
                
                hora_de_inicio.setHours(8+horas_adicionar,0,0,0)
                
            }
  	      
  	        if (hora_de_inicio.getDay() === 6){
  	            hora_de_inicio.setDate(hora_de_inicio.getDate()+2)
  	        }
  	        if (hora_de_inicio.getDay() === 0){
  	            hora_de_inicio.setDate(hora_de_inicio.getDate()+1)
  	        }
  	     
  	        lista_prioridades[i].hora_estimada.final = new Date(hora_de_inicio)
            
            
                
            }
            
            
           
           }
            
        
        
            
        
       preenche_prioridades() 
        }
    }
    }
    
    
  	  
  	    
  
  // ------- FUNCAO MOVE ABAIXO -------///
    
    function move_abaixo2(){
       var linha = event.srcElement.id
    console.log(linha)
     var linha_array = linha.split("_")
     
      if (numero < lista_prioridades.length-1){
        
        var hora1 = new Date(lista_prioridades[numero].hora_estimada.inicio)
        
        
        
        
        var agoramemo = new Date()
        console.log("HORA 1")
        console.log(hora1.getTime())
        console.log("AGORA MEMO")
        console.log(agoramemo.getTime())
        if (lista_prioridades[numero].arte_finalizado === true){
            alert("A arte "+lista_prioridades[numero].descricao+" est√° em execu√ß√£o e n√£o pode ser alterada na ordem")
        } else {
           lista_prioridades[numero+1].hora_estimada.inicio =  lista_prioridades[numero].hora_estimada.inicio
           console.log("Nova Hora de INICIO")
            console.log(new Date(lista_prioridades[numero].hora_estimada.inicio))
            
             var hora_de_inicio = new Date(lista_prioridades[numero+1].hora_estimada.inicio)
  	        console.log("INICIO")
  	        console.log(hora_de_inicio)
  	        
  	            var complex = lista_prioridades[numero+1].complexidade
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_prioridades[numero+1].complexidade)
            }
            
            
            var hora_do_almoco = 0
            if (numero_horas < 8){
            if (hora_de_inicio.getHours() < 12 && hora_de_inicio.getHours()+numero_horas > 12){
                hora_do_almoco = 1
            } else if (hora_de_inicio.getHours() > 12){
                if (numero_horas <= 4){
                    hora_do_almoco = 0
                } else {
                if ((numero_horas-4)-(17-hora_de_inicio.getHours()) < 0){
                    hora_do_almoco = 1
                }
            }
            
            }
            } else {
               hora_do_almoco = parseInt((numero_horas - hora_de_inicio.getHours())/8)
                
            } 
            
            
            numero_horas = numero_horas+hora_do_almoco
            
            var horas_que_sobram = 17-hora_de_inicio.getHours()
            if (horas_que_sobram > numero_horas){
                hora_de_inicio.setHours(hora_de_inicio.getHours()+numero_horas)
            } else {
                var dias_somar = 1
                var dias_de_trabalho = parseInt(numero_horas/8)
                dias_somar = dias_somar+dias_de_trabalho
                hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
                console.log("NUMERO HORAS")
                console.log(numero_horas)
                var pct_de_horas = ((numero_horas-horas_que_sobram)/8)%1
                console.log("PCT HORAS")
                console.log(pct_de_horas)
                var horas_adicionar = parseInt(pct_de_horas*8)
                
                hora_de_inicio.setHours(8+horas_adicionar,0,0,0)
                
            }
  	      
  	      
  	     
  	        lista_prioridades[numero+1].hora_estimada.final = new Date(hora_de_inicio)
            console.log(lista_prioridades[numero+1].hora_estimada.final)
            array_move(lista_prioridades,numero,numero+1)
            if (numero == 1){
                numero = numero+1
            }
            for (i=numero+1;i<lista_prioridades.length;i++){
                var anteriores = []
                anteriores.push(lista_prioridades[i-1].hora_estimada.final)
                anteriores.push(lista_prioridades[i-2].hora_estimada.final)
                console.log(lista_prioridades[i-1].hora_estimada.final)
                console.log(lista_prioridades[i-2].hora_estimada.final)
                anteriores.sort(function(a, b) {
                return new Date(b).getTime() - new Date(b).getTime();
                })
                
            lista_prioridades[i].hora_estimada.inicio = new Date(anteriores[1])
            
            
             var hora_de_inicio = new Date(lista_prioridades[i].hora_estimada.inicio)
  	        console.log("INICIO")
  	        console.log(hora_de_inicio)
  	        
  	            var complex = lista_prioridades[i].complexidade
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_prioridades[i].complexidade)
            }
            
            
            var hora_do_almoco = 0
            if (numero_horas < 8){
            if (hora_de_inicio.getHours() < 12 && hora_de_inicio.getHours()+numero_horas > 12){
                hora_do_almoco = 1
            } else if (hora_de_inicio.getHours() > 12){
                if (numero_horas <= 4){
                    hora_do_almoco = 0
                } else {
                if ((numero_horas-4)-(17-hora_de_inicio.getHours()) < 0){
                    hora_do_almoco = 1
                }
            }
            
            }
            } else {
               hora_do_almoco = parseInt((numero_horas - hora_de_inicio.getHours())/8)
                
            } 
            
            
            numero_horas = numero_horas+hora_do_almoco
            
            var horas_que_sobram = 17-hora_de_inicio.getHours()
            if (horas_que_sobram > numero_horas){
                hora_de_inicio.setHours(hora_de_inicio.getHours()+numero_horas)
            } else {
                var dias_somar = 1
                var dias_de_trabalho = parseInt(numero_horas/8)
                dias_somar = dias_somar+dias_de_trabalho
                hora_de_inicio.setDate(hora_de_inicio.getDate()+dias_somar)
                console.log("NUMERO HORAS")
                console.log(numero_horas)
                var pct_de_horas = ((numero_horas-horas_que_sobram)/8)%1
                console.log("PCT HORAS")
                console.log(pct_de_horas)
                var horas_adicionar = parseInt(pct_de_horas*8)
                
                hora_de_inicio.setHours(8+horas_adicionar,0,0,0)
                
            }
  	      
  	        if (hora_de_inicio.getDay() === 6){
  	            hora_de_inicio.setDate(hora_de_inicio.getDate()+2)
  	        }
  	        if (hora_de_inicio.getDay() === 0){
  	            hora_de_inicio.setDate(hora_de_inicio.getDate()+1)
  	        }
  	     
  	        lista_prioridades[i].hora_estimada.final = new Date(hora_de_inicio)
            
            
                
            }
            
            
           
           
            
        
        
            
        
       
    
      }
    }
    preenche_prioridades() 
    }
         
   
   
    
     
     
    function salva_sequencia(){
        document.getElementById("texto_sequencia").innerText = "Aguarde enquando a base √© atualizada"
        for (i=0;i<lista_prioridades.length;i++){
            var temposalterados = lista_prioridades[i].hora_estimada
            api.custom_objects.set_keys("BR-VALFI_Tickets",lista_prioridades[i]._id,{"hora_estimada":temposalterado})
        }
         
         document.getElementById("botao_alterar_sequencia").style.display = "none"
        preenche_prioridades()
    }
    
     
  preenche_aguardando()  
  
  
   function mostraDisclosurerep(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_reprovadas")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 8
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
      
      
      function mostraDisclosureAprovado(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_aprovados")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 8
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
  



   function mostraDisclosurerev(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_revisao")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 8
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
  


  
   function mostraDisclosuredes(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_desenvolvimento")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 8
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
  
  function mostraDisclosureapproval(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_aguarda_aprovacao")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 8
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
 
 

  function mostraDisclosurepending(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_aguarda_envio")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 8
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
  
  
   function mostraDisclosure(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_prioridades")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 9
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
      
      
     function mostraDisclosure2(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_aguardando")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 9
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
      
      function mostraDisclosure3(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        var table = document.getElementById("tabela_pendente")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 9
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
      }
    
    	    
</script>
<script>
    function despriorizar(){
        
      var linha = event.srcElement.id
    console.log(linha)
    for (i=0;i<lista_prioridades.length;i++){
        if (lista_prioridades[i]._id == linha){
            console.log(i)
            api.custom_objects.set_keys("BR-VALFI_Tickets",linha,{"priorizado":false})
            lista_aguardando.push(lista_prioridades[i])
            var tira = lista_prioridades.splice(i,1)
        }
    }
        preenche_aguardando()
    }
</script>
<script>
function preenche_desenvolvimento(){
  	        
  	     clearTable(document.getElementById("tabela_desenvolvimento"))
  	     
  	     
  	       lista_desenvolvimento.sort(function(a, b) {
    return new Date(a.hora_estimada.inicio) - new Date(b.hora_estimada.inicio);
})
  	     
         var table = document.getElementById("tabela_desenvolvimento")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_desenvolvimento.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
           
          
          
          
          var temposexec = lista_desenvolvimento[i].tempos_execucao
          
          for (k=0;k<temposexec.length;k++){
              if (temposexec[k].etapa == "Desenvolvimento de Arte"){
                   var a_data3 = dateFormat(temposexec[k].tempos[0].inicio,"dd/mm/yyyy - HH:MM")
              }
          }
          
          
          
          
           var a_data2 = dateFormat(lista_desenvolvimento[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data = dateFormat(lista_desenvolvimento[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_desenvolvimento[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                console.log(complex_array[0])
                console.log(complex_array[1])
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_desenvolvimento[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_desenvolvimento[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
           console.log((limite - agoramesmo)/3600000)
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_desenvolvimento[i]._id+'" onclick="mostraDisclosuredes()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_desenvolvimento[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_desenvolvimento[i].descricao+' - '+lista_desenvolvimento[i].complexidade+'hs - '+a_data+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_desenvolvimento[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_desenvolvimento[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+a_data3+'hs</div>'
            
            cell8.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_desenvolvimento")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_desenvolvimento[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_desenvolvimento[i].pacote_grafico.preview
                icone_zip = "./Icons/download.png"
                link_zip = lista_desenvolvimento[i].pacote_grafico.zip
                
                    if(lista_desenvolvimento[i].pacote_grafico.aprov_int !== undefined){
                        if(lista_desenvolvimento[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username] !== undefined){
                    link_proofscope = lista_desenvolvimento[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username].proofscope_url
                    }else{
                        link_proofscope = lista_desenvolvimento[i].pacote_grafico.proofscope
                    }
                }else{
                link_proofscope = lista_desenvolvimento[i].pacote_grafico.proofscope
                }
                
            }
            
            
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 8
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 15%; display: inline-block; vertical-align: top;"><p style="text-align: left; font-size: 1em">Previs√£o de Inicio:<br> <strong>'+a_data+'</strong><br>'
            string_div = string_div+'<a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="70%" style="margin: auto;"></a></div>'
            
            // segunda coluna
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width: 40%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥digo de arte: <strong>'+lista_desenvolvimento[i].codigo_arte+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥d. Refer√™ncia: <strong>'+lista_desenvolvimento[i].item_referencia+'</strong><br></div>'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Item: <strong>'+lista_desenvolvimento[i].item+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Ticket DG: <strong>'+lista_desenvolvimento[i].ticket_DG+'</strong><br></div></div>'
            
            string_div = string_div+'<div style="width: 55%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip+'"><img src="'+icone_zip+'" width="30px"></a><span><strong> Download ZIP</strong></span><br></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%; padding-left: 9%">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="editar_ospg.html?ordem='+lista_desenvolvimento[i]._id+'"><img src="'+icone_ospg+'" width="25px"></a><span><strong> OSPG</strong></span></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
            string_div = string_div+'<a  href="edicaoticket_mg4.html?ordem='+lista_desenvolvimento[i]._id+'" style="cursor: pointer"><img src="./Icons/ver_ticket.png" width="25px"></a><span><strong> Ver Ticket</strong></span></div></div>'
            string_div = string_div+'<div style="width: 100%; display: inline-block; margin-left: 2%; vertical-align: top">'
            
            var theobserva = lista_desenvolvimento[i].observacoes
            
            string_div = string_div+'<div style="width: 10%;display: inline-block; border-bottom: 1px solid black; text-align: center">Data</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; border-bottom: 1px solid black; text-align: center">Usu√°rio</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; border-bottom: 1px solid black; text-align: center">Observa√ß√£o</div>'
           
           
            for (y=0;y<theobserva.length;y++){
            string_div = string_div+'<div style="width: 10%;display: inline-block; text-align: center">'+dateFormat(new Date(theobserva[y].quando),"dd/mm/yyyy")+'</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; text-align: center">'+theobserva[y].quem.fullname+'</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; text-align: center">'+theobserva[y].texto+'</div>'
           
                
                
                
            }
           
            
            string_div = string_div+'</div></div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
        
        
    }
    
   
    

  	    }

</script>

<script>
function preenche_revisao(){
  	        
  	     clearTable(document.getElementById("tabela_revisao"))
  	   
  	    var table = document.getElementById("tabela_revisao")
        var qtasrow = table.rows.length
  	    lista_revisao =  api.custom_objects.list_with_options("BR-VALFI_Tickets",["pacote_grafico.status_aprovacao","equal to","pending"]).results
  	    console.log(lista_revisao.length)
  	     
  	     for (i=0;i<lista_revisao.length;i++){
  	         
  	         console.log("estou na lista")
  	         
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
           
          
          
          
          var temposexec = lista_revisao[i].tempos_execucao
          
          for (k=0;k<temposexec.length;k++){
              if (temposexec[k].etapa == "Desenvolvimento de Arte"){
                   var a_data3 = dateFormat(temposexec[k].tempos[0].inicio,"dd/mm/yyyy - HH:MM")
              }
          }
          
          
          
          
           var a_data2 = dateFormat(lista_revisao[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data = dateFormat(lista_revisao[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_revisao[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_revisao[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_revisao[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_revisao[i]._id+'" onclick="mostraDisclosurerev()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_revisao[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_revisao[i].descricao+' - '+lista_revisao[i].complexidade+'hs - '+a_data+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_revisao[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_revisao[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+a_data3+'hs</div>'
            
            cell8.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_revisao")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_revisao[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_revisao[i].pacote_grafico.preview
                icone_zip = "./Icons/download.png"
                link_zip = lista_revisao[i].pacote_grafico.zip
                
                    if(lista_revisao[i].pacote_grafico.aprov_int !== undefined){
                        if(lista_revisao[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username] !== undefined){
                    link_proofscope = lista_revisao[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username].proofscope_url
                    }else{
                        link_proofscope = lista_revisao[i].pacote_grafico.proofscope
                    }
                }else{
                link_proofscope = lista_revisao[i].pacote_grafico.proofscope
                }
                
            }
            
            
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 8
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 15%; display: inline-block; vertical-align: top;"><p style="text-align: left; font-size: 1em"><strong>Clique na imagem para revisar</strong><br>'
            string_div = string_div+'<a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="70%" style="margin: auto;"></a></div>'
            
            // segunda coluna
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width: 40%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥digo de arte: <strong>'+lista_revisao[i].codigo_arte+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥d. Refer√™ncia: <strong>'+lista_revisao[i].item_referencia+'</strong><br></div>'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Item: <strong>'+lista_revisao[i].item+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Ticket DG: <strong>'+lista_revisao[i].ticket_DG+'</strong><br></div></div>'
            
            string_div = string_div+'<div style="width: 55%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="'+link_zip+'"><img src="'+icone_zip+'" width="30px"></a><span><strong> Download ZIP</strong></span><br></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%; padding-left: 9%">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="editar_ospg.html?ordem='+lista_revisao[i]._id+'"><img src="'+icone_ospg+'" width="25px"></a><span><strong> OSPG</strong></span></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
            string_div = string_div+'<a  href="edicaoticket_mg4.html?ordem='+lista_revisao[i]._id+'" style="cursor: pointer"><img src="./Icons/ver_ticket.png" width="25px"></a><span><strong> Ver Ticket</strong></span></div></div>'
            string_div = string_div+'<div style="width: 100%; display: inline-block; margin-left: 2%; vertical-align: top">'
            
            var theobserva = lista_revisao[i].observacoes
            
            string_div = string_div+'<div style="width: 10%;display: inline-block; border-bottom: 1px solid black; text-align: center">Data</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; border-bottom: 1px solid black; text-align: center">Usu√°rio</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; border-bottom: 1px solid black; text-align: center">Observa√ß√£o</div>'
           
           
            for (y=0;y<theobserva.length;y++){
            string_div = string_div+'<div style="width: 10%;display: inline-block; text-align: center">'+dateFormat(new Date(theobserva[y].quando),"dd/mm/yyyy")+'</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; text-align: center">'+theobserva[y].quem.fullname+'</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; text-align: center">'+theobserva[y].texto+'</div>'
           
                
                
                
            }
           
            
            string_div = string_div+'</div></div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
        
        
    }  
        
preenche_reprovados()
  	    }
  	    
  	    
 function preenche_reprovados(){
     
       clearTable(document.getElementById("tabela_reprovadas"))
  	   
  	   var conta_rep = api.custom_objects.count("BR-VALFI_Tickets",["pacote_grafico.status_aprovacao","equal to","reject"]).count
  	   console.log("lisat de reprovadas "+conta_rep)
  	   if (conta_rep === 0){
  	       document.getElementById("mostra_tabela_reprovados").style.display = "none"
  	   } else {
  	    var table = document.getElementById("tabela_reprovadas")
        var qtasrow = table.rows.length
  	    lista_reprovados =  api.custom_objects.list_with_options("BR-VALFI_Tickets",["pacote_grafico.status_aprovacao","equal to","reject"]).results
  	     
  	     for (i=0;i<lista_reprovados.length;i++){
  	         
  	         console.log("estou na lista")
  	         
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
           
          
          
          
          var temposexec = lista_reprovados[i].tempos_execucao
          
          for (k=0;k<temposexec.length;k++){
              if (temposexec[k].etapa == "Desenvolvimento de Arte"){
                   var a_data3 = dateFormat(temposexec[k].tempos[0].inicio,"dd/mm/yyyy - HH:MM")
              }
          }
          
          
          
          
           var a_data2 = dateFormat(lista_reprovados[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data = dateFormat(lista_reprovados[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_reprovados[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_reprovados[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_reprovados[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_reprovados[i]._id+'" onclick="mostraDisclosurerep()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_reprovados[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_reprovados[i].descricao+' - '+lista_reprovados[i].complexidade+'hs - '+a_data+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_reprovados[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_reprovados[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+a_data3+'hs</div>'
            
            cell8.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_reprovadas")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_reprovados[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_reprovados[i].pacote_grafico.preview
                icone_zip = "./Icons/upload.png"
                link_zip = lista_reprovados[i].pacote_grafico.zip
                
                    if(lista_reprovados[i].pacote_grafico.aprov_int !== undefined){
                        if(lista_reprovados[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username] !== undefined){
                    link_proofscope = lista_reprovados[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username].proofscope_url
                    }else{
                        link_proofscope = lista_reprovados[i].pacote_grafico.proofscope
                    }
                }else{
                link_proofscope = lista_reprovados[i].pacote_grafico.proofscope
                }
                
            }
            
            
          
            var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 8
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 15%; display: inline-block; vertical-align: top;"><p style="text-align: left; font-size: 1em">Previs√£o de Inicio:<br> <strong>'+a_data+'</strong><br>'
            string_div = string_div+'<a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="70%" style="margin: auto;"></a></div>'
            
            // segunda coluna
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width: 40%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥digo de arte: <strong>'+lista_reprovados[i].codigo_arte+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">C√≥d. Refer√™ncia: <strong>'+lista_reprovados[i].item_referencia+'</strong><br></div>'
            string_div = string_div+'<div style="width: 48%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Item: <strong>'+lista_reprovados[i].item+'</strong><br>'
            string_div = string_div+'<p style="text-align: left; font-size: 1em">Ticket DG: <strong>'+lista_reprovados[i].ticket_DG+'</strong><br></div></div>'
            
            string_div = string_div+'<div style="width: 55%; display: inline-block; vertical-align: top">'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="/portal.cgi/PP_FILE_STORE/Sistema/upload_revisao.html?ordem='+lista_reprovados[i]._id+'"><img src="'+icone_zip+'" width="30px"></a><span><strong> Upload ZIP</strong></span><br></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%; padding-left: 9%">'
            string_div = string_div+'<p style="text-align: left; font-size: 1em"><a href="editar_ospg.html?ordem='+lista_reprovados[i]._id+'"><img src="'+icone_ospg+'" width="25px"></a><span><strong> OSPG</strong></span></div>'
            string_div = string_div+'<div style="width: 30%; display: inline-block; vertical-align: center; margin-left: 2%">'
            string_div = string_div+'<a  href="edicaoticket_mg4.html?ordem='+lista_reprovados[i]._id+'" style="cursor: pointer"><img src="./Icons/ver_ticket.png" width="25px"></a><span><strong> Ver Ticket</strong></span></div></div>'
            string_div = string_div+'<div style="width: 100%; display: inline-block; margin-left: 2%; vertical-align: top">'
            
            var theobserva = lista_reprovados[i].observacoes
            
            string_div = string_div+'<div style="width: 10%;display: inline-block; border-bottom: 1px solid black; text-align: center">Data</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; border-bottom: 1px solid black; text-align: center">Usu√°rio</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; border-bottom: 1px solid black; text-align: center">Observa√ß√£o</div>'
           
           
            for (y=0;y<theobserva.length;y++){
            string_div = string_div+'<div style="width: 10%;display: inline-block; text-align: center">'+dateFormat(new Date(theobserva[y].quando),"dd/mm/yyyy")+'</div>'
            string_div = string_div+'<div style="width: 20%;display: inline-block; text-align: center">'+theobserva[y].quem.fullname+'</div>'
            string_div = string_div+'<div style="width: 70%;display: inline-block; text-align: center">'+theobserva[y].texto+'</div>'
           
                
                
                
            }
           
            
            string_div = string_div+'</div></div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
  	     }
 }
}
</script>


<script>
function preenche_aguarda_envio(){
  	        
  	     clearTable(document.getElementById("tabela_aguarda_envio"))
  	     
  	     
  	       
  	     
         var table = document.getElementById("tabela_aguarda_envio")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_aprovaext_pending.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
           
          
          
          
          var temposexec = lista_aprovaext_pending[i].tempos_execucao
          
          for (k=0;k<temposexec.length;k++){
              if (temposexec[k].etapa == "Desenvolvimento de Arte"){
                   var a_data3 = dateFormat(temposexec[k].tempos[0].inicio,"dd/mm/yyyy - HH:MM")
              }
          }
          
          
          
          
           var a_data2 = dateFormat(lista_aprovaext_pending[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data = dateFormat(lista_aprovaext_pending[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_aprovaext_pending[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                console.log(complex_array[0])
                console.log(complex_array[1])
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_aprovaext_pending[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_aprovaext_pending[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
           console.log((limite - agoramesmo)/3600000)
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_aprovaext_pending[i]._id+'" onclick="mostraDisclosurepending()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_aprovaext_pending[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_aprovaext_pending[i].descricao+' - '+lista_aprovaext_pending[i].complexidade+'hs - '+a_data+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_aprovaext_pending[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_aprovaext_pending[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+dateFormat(new Date(lista_aprovaext_pending[i].pacote_grafico.hora_aprovado),"dd/mm/yyyy - HH:MM")+'hs</div>'
            
            cell8.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_aguarda_envio")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_aprovaext_pending[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_aprovaext_pending[i].pacote_grafico.preview
                icone_zip = "./Icons/download.png"
                link_zip = lista_aprovaext_pending[i].pacote_grafico.zip
                
                    if(lista_aprovaext_pending[i].pacote_grafico.aprov_int !== undefined){
                        if(lista_aprovaext_pending[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username] !== undefined){
                    link_proofscope = lista_aprovaext_pending[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username].proofscope_url
                    }else{
                        link_proofscope = lista_aprovaext_pending[i].pacote_grafico.proofscope
                    }
                }else{
                link_proofscope = lista_aprovaext_pending[i].pacote_grafico.proofscope
                }
                
            }
            
            
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 8
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 15%; display: inline-block; vertical-align: top;"><p style="text-align: center; font-size: 1em"><strong>Clique na imagem para ver a arte que vai enviar</strong><br>'
            string_div = string_div+'<a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="70%" style="margin: auto;"></a></div>'
            
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
           // div inputs
            string_div = string_div+'<div style="width:70%; display: inline-block; vertical-align: top; text-align: left">'
            string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 23%; margin-right: 3%;"><label>Quem Aprova</label><select class="form-control" id="'+lista_aprovaext_pending[i]._id+'_quem_aprova"  name="quem_aprova"><option value="undefined">Selecionar</option><option>Somente 1 Pessoa</option><option>Todos</option></select></div>'
            
            string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 25%; margin-right: 1%;"><label>Nome</label><input type="text" class="form-control" id="'+lista_aprovaext_pending[i]._id+'_nome_cliente" onfocusout="muda_aprovador()" name="nome_cliente" list="'+lista_aprovaext_pending[i]._id+'_pessoas"><datalist id="'+lista_aprovaext_pending[i]._id+'_pessoas"></datalist></div>'
            string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 48%"><label>E-mail</label><br><input type="text" class="form-control" id="'+lista_aprovaext_pending[i]._id+'_email_cliente"  onfocusout="muda_aprovador()" name="email_cliente" style="width: 70%; display: inline-block; margin-right: 2%;" list="'+lista_aprovaext_pending[i]._id+'_emails"><datalist id="'+lista_aprovaext_pending[i]._id+'_emails"></datalist>'
            string_div = string_div+'<img  id="'+lista_aprovaext_pending[i]._id+'_adicionaaprova" src="./Icons/icone_mais.png" width="30px" style="cursor: pointer; vertical-align: top; display: inline-block;" onclick="adiciona_aprovador()"><img  id="'+lista_aprovaext_pending[i]._id+'_removeaprova" src="./Icons/icone_menos.png" width="30px" style="cursor: pointer; vertical-align: top; display: inline-block; margin-left: 3px;" onclick="remove_aprovador()"></div>'
           
           // observacaoes
          
            string_div = string_div+' <div  class="form-group" style="display:inline-block; width: 100%"><label for="observacoes">Observa√ß√µes</label><textarea  class="form-control" id="'+lista_aprovaext_pending[i]._id+'_observacoes"  name="observacoes" columns="1" rows="2" value=""></textarea></div>'
            string_div = string_div+'</div>'
           // botoes aprovacao
           string_div = string_div+'<div style="width:25%; margin-left: 2%; display: inline-block; vertical-align: top">'
           string_div = string_div+'<button id="'+lista_aprovaext_pending[i]._id+'_enviar_aprovacaosistema" onclick="inicia_aprovacao_cliente()" style="cursor: pointer; margin-top: 20px;" class="btn btn-primary">Aprova√ß√£o Sistema</button><br><span id="'+lista_aprovaext_pending[i]._id+'_info_aprovaext" style="color: green"></span><br>'
           string_div = string_div+'<button id="'+lista_aprovaext_pending[i]._id+'_enviar_aprovacaomanual" onclick="inicia_aprovacao_manual()" style="cursor: pointer; margin-top: 20px;" class="btn btn-primary">Aprova√ß√£o Manual</button><br><span id="'+lista_aprovaext_pending[i]._id+'_info_aprovamanual" style="color: green"></span>'
           string_div = string_div+'<div style="width: 80%; display: inline-block; vertical-align: top;"><p style="text-align: center; font-size: 1em">Aprova√ß√£o Manual n√£o preenche nome e email<br>'
           string_div = string_div+'</div>'
           // div lista aprovadores
            string_div = string_div+'<div style="width:95%; display: inline-block; vertical-align: top; text-align: left;">'
            string_div = string_div+' <div  class="form-group" style="display:inline-block; width: 100%"><label for="observacoes">Aprovadores</label><textarea  class="form-control" id="'+lista_aprovaext_pending[i]._id+'_aprovadores"  name="observacoes" columns="1" rows="2" value="" readonly></textarea></div>'
            string_div = string_div+'</div>'
            string_div = string_div+'</div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
        
        
    }
    
   
    preenche_aguarda_aprovacao()

  	    }
  	    
 var aprovadores = []
  	    
 function adiciona_aprovador(){
      var linha = event.srcElement.id
      console.log(linha)
      

  var linha_array = linha.split("_")
  var div_nome = linha_array[0]+"_nome_cliente"
  var div_email = linha_array[0]+"_email_cliente"
  
  if (document.getElementById(div_nome).value != "" && document.getElementById(div_email).value != ""){
  
  var div_pessoas = linha_array[0]+"_pessoas"
  var div_emails = linha_array[0]+"_emails"
  var existe = false
  for (i=0; i<aprovadores.length;i++){
      if (aprovadores[i].nome == document.getElementById(div_nome).value ||aprovadores[i].email == document.getElementById(div_email).value){
          existe = true
          var indice = i
      }
  }
  if (existe === false){
  var info_aprova = {}
  info_aprova["nome"] = document.getElementById(div_nome).value
  info_aprova["email"] = document.getElementById(div_email).value
  aprovadores.push(info_aprova)
  } else {
      aprovadores[indice]["nome"] = document.getElementById(div_nome).value
      aprovadores[indice]["email"] = document.getElementById(div_email).value
  }
  if (existe === false){
  var options=''
  var opcoes = document.getElementById(div_pessoas)
  for (i=0;i<opcoes.childNodes.length;i++){
    options += '<option value="'+opcoes.childNodes[i].value+'" />';  
  }
    
  
    options += '<option value="'+document.getElementById(div_nome).value+'" />';
    document.getElementById(div_pessoas).innerHTML = options;
  
     var options2=''; // variable to store the options
     var opcoes2 = document.getElementById(div_emails)
  
  for (i=0;i<opcoes2.childNodes.length;i++){
    options2 += '<option value="'+opcoes2.childNodes[i].value+'" />';  
  }
     
  
    options2 += '<option value="'+document.getElementById(div_email).value+'" />';
    document.getElementById(div_emails).innerHTML = options2;
   }
  document.getElementById(div_nome).value = ""
  document.getElementById(div_email).value = ""
  
  var div_info = linha_array[0]+"_aprovadores"
  preenche_lista_aprovadores(div_info)
  } else {
      alert("Adicione um nome e email v√°lidos")
  }
 }   
 
 
 
  function remove_aprovador(){
      var linha = event.srcElement.id
      console.log(linha)
      

  var linha_array = linha.split("_")
  var div_nome = linha_array[0]+"_nome_cliente"
  var div_email = linha_array[0]+"_email_cliente"
  
  var div_pessoas = linha_array[0]+"_pessoas"
  var div_emails = linha_array[0]+"_emails"
  
  for (i=0;i<aprovadores.length;i++){
      if (aprovadores[i].nome === document.getElementById(div_nome).value && aprovadores[i].email === document.getElementById(div_email).value){
          var tira = aprovadores.splice(i,1)
      }
  }
  
  
  var options=''
  
  for (i=0;i<aprovadores.length;i++){
    options += '<option value="'+aprovadores[i].nome+'" />';  
  }
  document.getElementById(div_pessoas).innerHTML = options; 
  
   var options2=''
  
  for (i=0;i<aprovadores.length;i++){
    options2 += '<option value="'+aprovadores[i].email+'" />';  
  }
  document.getElementById(div_emails).innerHTML = options2; 
  

  
  var div_info = linha_array[0]+"_aprovadores"
   document.getElementById(div_nome).value = ""
  document.getElementById(div_email).value = ""
  preenche_lista_aprovadores(div_info)
  
 } 
 
 function preenche_lista_aprovadores(que_div){
     var string_aprova = ""
     for (i=0;i<aprovadores.length;i++){
        string_aprova = string_aprova+aprovadores[i].nome+" / "+aprovadores[i].email+"\n"        
     }
     document.getElementById(que_div).value = string_aprova
 }
 
 function muda_aprovador(){
       var linha = event.srcElement.id
      console.log(linha)
      var linha_array = linha.split("_")
      var qual_usar = linha_array[1]
     if (qual_usar == "nome"){
             var qual_div_altera = linha_array[0]+"_email_cliente" 
          } else {
             var qual_div_altera = linha_array[0]+"_nome_cliente" 
          }
          
     
      for (i=0;i<aprovadores.length;i++){
       if (qual_usar == "nome"){
           if (aprovadores[i].nome == document.getElementById(linha).value){
               document.getElementById(qual_div_altera).value = aprovadores[i].email
           } 
       } else {
          if (aprovadores[i].email == document.getElementById(linha).value){
               document.getElementById(qual_div_altera).value = aprovadores[i].nome
           
       }   
          
      }
 }
 }
 
 function inicia_aprovacao_cliente(){
   var linha = event.srcElement.id
      console.log(linha)
      var linha_array = linha.split("_")
      console.log(linha_array)
      var div_info = linha_array[0]+"_info_aprovaext"
      var div_observa = linha_array[0]+"_observacoes"
      var div_quem_aprova = linha_array[0]+"_quem_aprova"
      console.log(linha_array[2])
      for (i=0;i<lista_aprovaext_pending.length;i++){
          if (lista_aprovaext_pending[i]._id == linha_array[0]){
              document.getElementById(div_info).innerText = "Aprova√ß√£o enviada com sucesso!"
     
      var cria_aprova =  api.hub.start_from_whitepaper_with_variables("BR-VALFI_aprovacaoremota","aprovacao_automatica",{"info":lista_aprovaext_pending[i],"aprovadores":aprovadores,"usuario":usuario,"observacoes":document.getElementById(div_observa).value,"quem_aprova": document.getElementById(div_quem_aprova).value})
        console.log(cria_aprova)
    
        aprovadores = []
        var div_pessoas = linha_array[0]+"_pessoas"
        var div_emails = linha_array[0]+"_emails"
        var div_aprovadores = linha_array[0]+"_aprovadores"
         var options=''
        document.getElementById(div_pessoas).innerHTML = options;
        document.getElementById(div_emails).innerHTML = options;
        document.getElementById(div_aprovadores).value = "";
        document.getElementById(div_observa).value = ""
        document.getElementById(div_quem_aprova).value = div_quem_aprova
        
              
          }
      }
 }
 
 
  function inicia_aprovacao_manual(){
   var linha = event.srcElement.id
      console.log(linha)
      var linha_array = linha.split("_")
      console.log(linha_array)
      var div_info = linha_array[0]+"_info_aprovaext"
      var div_observa = linha_array[0]+"_observacoes"
      var div_quem_aprova = linha_array[0]+"_quem_aprova"
      console.log(linha_array[2])
      for (i=0;i<lista_aprovaext_pending.length;i++){
          if (lista_aprovaext_pending[i]._id == linha_array[0]){
              document.getElementById(div_info).innerText = "Aprova√ß√£o enviada com sucesso!"
     
      var cria_aprova =  api.hub.start_from_whitepaper_with_variables("BR-VALFI_aprovacaoremota","aprovacao_manual",{"info":lista_aprovaext_pending[i],"aprovadores":aprovadores,"usuario":usuario,"observacoes":document.getElementById(div_observa).value,"quem_aprova": document.getElementById(div_quem_aprova).value})
        console.log(cria_aprova)
    
        aprovadores = []
        var div_pessoas = linha_array[0]+"_pessoas"
        var div_emails = linha_array[0]+"_emails"
        var div_aprovadores = linha_array[0]+"_aprovadores"
         var options=''
        document.getElementById(div_pessoas).innerHTML = options;
        document.getElementById(div_emails).innerHTML = options;
        document.getElementById(div_aprovadores).value = "";
        document.getElementById(div_observa).value = ""
        document.getElementById(div_quem_aprova).value = div_quem_aprova
        
              
          }
      }
 }

</script>

<script>
    function preenche_aprovados(){
  	        
  	     clearTable(document.getElementById("tabela_aprovados"))
  	     
  	     
  	       
  	     
         var table = document.getElementById("tabela_aprovados")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_aprovados.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
           
          
          
          
          var temposexec = lista_aprovados[i].tempos_execucao
          
          for (k=0;k<temposexec.length;k++){
              if (temposexec[k].etapa == "Desenvolvimento de Arte"){
                   var a_data3 = dateFormat(temposexec[k].tempos[0].inicio,"dd/mm/yyyy - HH:MM")
              }
          }
          
          
          
          
           var a_data2 = dateFormat(lista_aprovados[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data = dateFormat(lista_aprovados[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_aprovados[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                console.log(complex_array[0])
                console.log(complex_array[1])
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_aprovados[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_aprovados[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
           console.log((limite - agoramesmo)/3600000)
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_aprovados[i]._id+'" onclick="mostraDisclosureAprovado()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
           
            cell3.innerHTML = '<div style="font-size:1em;">'+lista_aprovados[i].cliente+'</div>'
            cell4.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_aprovados[i].descricao+' - '+lista_aprovados[i].complexidade+'hs - '+a_data+'</div>'
            cell5.innerHTML = '<div style="font-size:1em;">'+lista_aprovados[i].tipo_trabalho+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_aprovados[i].responsavel_comercial+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+dateFormat(new Date(lista_aprovados[i].pacote_grafico.hora_aprovado),"dd/mm/yyyy - HH:MM")+'hs</div>'
            
            cell8.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_aprovados")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_aprovados[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_aprovados[i].pacote_grafico.preview
                icone_zip = "./Icons/download.png"
                link_zip = lista_aprovados[i].pacote_grafico.zip
                
                    if(lista_aprovados[i].pacote_grafico.aprov_int !== undefined){
                        if(lista_aprovados[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username] !== undefined){
                    link_proofscope = lista_aprovados[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username].proofscope_url
                    }else{
                        link_proofscope = lista_aprovados[i].pacote_grafico.proofscope
                    }
                }else{
                link_proofscope = lista_aprovados[i].pacote_grafico.proofscope
                }
                
            }
            
            
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 8
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 15%; display: inline-block; vertical-align: top;"><p style="text-align: left; font-size: 1em">Previs√£o de Inicio:<br> <strong>'+a_data+'</strong><br>'
            string_div = string_div+'<a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="70%" style="margin: auto;"></a></div>'
            
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
           // div inputs
            string_div = string_div+'<div style="width:70%; display: inline-block; vertical-align: top; text-align: left">'
            string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 23%; margin-right: 3%;"><label>Quem Aprova</label><select class="form-control" id="'+lista_aprovados[i]._id+'_quem_aprova"  name="quem_aprova"><option value="undefined">Selecionar</option><option>Somente 1 Pessoa</option><option>Todos</option></select></div>'
            
            string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 25%; margin-right: 1%;"><label>Nome</label><input type="text" class="form-control" id="'+lista_aprovados[i]._id+'_nome_cliente" onfocusout="muda_aprovador()" name="nome_cliente" list="'+lista_aprovados[i]._id+'_pessoas"><datalist id="'+lista_aprovados[i]._id+'_pessoas"></datalist></div>'
            string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 48%"><label>E-mail</label><br><input type="text" class="form-control" id="'+lista_aprovados[i]._id+'_email_cliente"  onfocusout="muda_aprovador()" name="email_cliente" style="width: 70%; display: inline-block; margin-right: 2%;" list="'+lista_aprovados[i]._id+'_emails"><datalist id="'+lista_aprovados[i]._id+'_emails"></datalist>'
            string_div = string_div+'<img  id="'+lista_aprovados[i]._id+'_adicionaaprova" src="./Icons/icone_mais.png" width="30px" style="cursor: pointer; vertical-align: top; display: inline-block;" onclick="adiciona_aprovador()"><img  id="'+lista_aprovados[i]._id+'_removeaprova" src="./Icons/icone_menos.png" width="30px" style="cursor: pointer; vertical-align: top; display: inline-block; margin-left: 3px;" onclick="remove_aprovador()"></div>'
           
           // observacaoes
          
            string_div = string_div+' <div  class="form-group" style="display:inline-block; width: 100%"><label for="observacoes">Observa√ß√µes</label><textarea  class="form-control" id="'+lista_aprovados[i]._id+'_observacoes"  name="observacoes" columns="1" rows="2" value=""></textarea></div>'
            string_div = string_div+'</div>'
           // botoes aprovacao
           string_div = string_div+'<div style="width:25%; margin-left: 2%; display: inline-block; vertical-align: top">'
           string_div = string_div+'<button id="'+lista_aprovados[i]._id+'_enviar_aprovacaosistema" onclick="inicia_aprovacao_cliente()" style="cursor: pointer; margin-top: 20px;" class="btn btn-primary">Aprova√ß√£o Sistema</button><br><span id="'+lista_aprovados[i]._id+'_info_aprovaext" style="color: green"></span><br>'
           string_div = string_div+'<button id="'+lista_aprovados[i]._id+'_enviar_aprovacaomanual" onclick="inicia_aprovacao_manual()" style="cursor: pointer; margin-top: 20px;" class="btn btn-primary">Aprova√ß√£o Manual</button><br><span id="'+lista_aprovados[i]._id+'_info_aprovamanual" style="color: green"></span>'
           string_div = string_div+'</div>'
           // div lista aprovadores
            string_div = string_div+'<div style="width:95%; display: inline-block; vertical-align: top; text-align: left;">'
            string_div = string_div+' <div  class="form-group" style="display:inline-block; width: 100%"><label for="observacoes">Aprovadores</label><textarea  class="form-control" id="'+lista_aprovados[i]._id+'_aprovadores"  name="observacoes" columns="1" rows="2" value="" readonly></textarea></div>'
            string_div = string_div+'</div>'
            string_div = string_div+'</div>'
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
        
        
    }
    
   
   

  	    }
</script>

<script>
function preenche_aguarda_aprovacao(){
  	        
  	     clearTable(document.getElementById("tabela_aguarda_aprovacao"))
  	     
  	     
  	       
  	     
         var table = document.getElementById("tabela_aguarda_aprovacao")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<lista_aprovaext_sent.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
            var cell9 = row.insertCell(8);
           
          
          
          
          var temposexec = lista_aprovaext_sent[i].tempos_execucao
          
          for (k=0;k<temposexec.length;k++){
              if (temposexec[k].etapa == "Desenvolvimento de Arte"){
                   var a_data3 = dateFormat(temposexec[k].tempos[0].inicio,"dd/mm/yyyy - HH:MM")
              }
          }
          
          
          
          
           var a_data2 = dateFormat(lista_aprovaext_sent[i].hora_estimada.final,"dd/mm/yyyy - HH:MM")
           var a_data = dateFormat(lista_aprovaext_sent[i].hora_estimada.liberacao,"dd/mm/yyyy - HH:MM")
           
           
                var complex = lista_aprovaext_sent[i].complexidade
           // console.log(complex)
            if (complex.indexOf(":") > -1){
                var complex_array = complex.split(":")
                console.log(complex_array[0])
                console.log(complex_array[1])
                if (complex_array[1] === "00"){
                  var numero_horas = parseInt(complex_array[0])  
                } else {
                    var minutos = (parseInt(complex_array[1]))/60
                    var horas = parseInt(complex_array[0]) 
                    var numero_horas = horas+minutos
                }
                
            } else {
                var numero_horas = parseInt(lista_aprovaext_sent[i].complexidade)
            }
           
           
           
            var cor_arte = "#00FF00"
            if (numero_horas > 3 ){
                cor_arte = "orange"
            }
            if (numero_horas > 6){
                cor_arte = "red"
            }
            
            var agoramesmo = new Date()
            var limite = new Date(lista_aprovaext_sent[i].hora_estimada.final)
            var img_atencao = ""
            var infotooltip = ""
            if ((limite - agoramesmo)/3600000 < 2){
                console.log("sou menos que 2")
                img_atencao = "./Icons/deadline_coming.png"
                infotooltip = "Pr√≥ximo ao tempo limite."
            }
             if ((limite - agoramesmo)/3600000 < 0){
                img_atencao = "./Icons/deadline_gone.png"
                infotooltip = "Tempo limite excedido!!"
            }
           var ultima_aprovacao = lista_aprovaext_sent[i].aprovacao_externa[lista_aprovaext_sent[i].aprovacao_externa.length-1]
           console.log((limite - agoramesmo)/3600000)
            
            cell1.innerHTML = '<div style="font-size:1em;"><span style="margin-top:5px;height:10px;width:10px;background-color:'+cor_arte+';border-radius:50%;display:inline-block"></span></div>'
            cell2.innerHTML = '<div style="font-size:1em; cursor: pointer; text-align: left;"><span style="display:inline-block; margin-right: 5px;"><img id="'+qtasrow+'" src="./Icons/showinfo.png" height="20px" id="showinfo_'+lista_aprovaext_sent[i]._id+'" onclick="mostraDisclosureapproval()" ></span><span style="display:inline-block;"><img src="'+img_atencao+'" width="20px" data-toggle="tooltip" data-placement="top" title="'+infotooltip+'" style="display:inline-block; margin-right: 5px;"></span></div>'
            cell3.innerHTML = '<div style="font-size:1em;"><strong>'+ultima_aprovacao.tipo+'</strong></div>'
            cell4.innerHTML = '<div style="font-size:1em;">'+lista_aprovaext_sent[i].cliente+'</div>'
            cell5.innerHTML = '<div style="font-size:1em; text-align: left;">'+lista_aprovaext_sent[i].descricao+' - '+lista_aprovaext_sent[i].complexidade+'hs - '+a_data+'</div>'
            cell6.innerHTML = '<div style="font-size:1em;">'+lista_aprovaext_sent[i].tipo_trabalho+'</div>'
            cell7.innerHTML = '<div style="font-size:1em;">'+lista_aprovaext_sent[i].responsavel_comercial+'</div>'
            cell8.innerHTML = '<div style="font-size:1em;">'+dateFormat(new Date(lista_aprovaext_sent[i].aprovacao_externa[lista_aprovaext_sent[i].aprovacao_externa.length-1].enviado_em),"dd/mm/yyyy - HH:MM")+'hs</div>'
            
            cell9.innerHTML = '<div style="font-size:1em;">'+a_data2+'hs</div>'
            
            qtasrow = qtasrow +1
      
      
             var table = document.getElementById("tabela_aguarda_aprovacao")
             var qtasrow = table.rows.length
            var link_proofscope = ""
            var link_zip = ""
            var icone_zip = ""
            var icone_ospg = "./Icons/ospg.png"
            
            var preview_icon = "./Icons/aguardando_arquivos.png"
            
            if (lista_aprovaext_sent[i].pacote_grafico != undefined){
                console.log("estou na lista!")
                preview_icon = lista_aprovaext_sent[i].pacote_grafico.preview
                icone_zip = "./Icons/download.png"
                link_zip = lista_aprovaext_sent[i].pacote_grafico.zip
                
                    if(lista_aprovaext_sent[i].pacote_grafico.aprov_int !== undefined){
                        if(lista_aprovaext_sent[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username] !== undefined){
                    link_proofscope = lista_aprovaext_sent[i].pacote_grafico.aprov_int["AprovaRev_"+usuario.username].proofscope_url
                    }else{
                        link_proofscope = lista_aprovaext_sent[i].pacote_grafico.proofscope
                    }
                }else{
                link_proofscope = lista_aprovaext_sent[i].pacote_grafico.proofscope
                }
                
            }
            
            var ultima_aprovacao = lista_aprovaext_sent[i].aprovacao_externa[lista_aprovaext_sent[i].aprovacao_externa.length-1]
          
            var thelast_approvers = []
            
            for (m=0;m<ultima_aprovacao.aprovadores.length;m++){
                thelast_approvers.push(ultima_aprovacao.aprovadores[m].nome)
            }
          
             var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 8
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px;">'
            // primeira coluna
            
            string_div = string_div+'<div style="width: 15%; display: inline-block; vertical-align: top;"><p style="text-align: center; font-size: 1em"><strong>Clique para ver arte que est√° em aprova√ß√£o</strong><br>'
            string_div = string_div+'<a style="cursor:pointer;" href='+link_proofscope+' target="_Blank"><img src="'+preview_icon+'" width="70%" style="margin: auto;"></a></div>'
            
            string_div = string_div+'<div style="width:82%; margin-left: 2%; display: inline-block;">'
            string_div = string_div+'<div style="width:45%; display: inline-block;">'
            string_div = string_div+'<p><strong>Enviado por:</strong> '+ultima_aprovacao.enviado_por.fullname+'<br>'
            string_div = string_div+'<p><strong>Aprovadores:</strong> '+thelast_approvers.toString()+'<br>'
            string_div = string_div+'<p><strong>Observa√ß√µes:</strong> '+ultima_aprovacao.observacoes+'<br></div>'
            string_div = string_div+'<div style="width:45%; display: inline-block;">'
            string_div = string_div+'<button class="btn btn-primary" onclick="forcar_aprovacao()" id="'+lista_aprovaext_sent[i]._id+'_aprova" style="cursor: pointer">For√ßar Aprova√ß√£o</button></div>'
            string_div = string_div+'</div>'
            
            cell1_2.innerHTML = string_div
            
            qtasrow = qtasrow +1
      
        
        
    }
    
   
    

  	    }
  	    


 
 


</script>

<script>
     function filtro_tabela_prioridade() {
      var input, filter, table, tr, td, td2, td3, td4, i, txtValue;
      input = document.getElementById("filtrarTabelaPrioridade");
      filter = input.value.toUpperCase();
      table = document.getElementById("tabela_prioridades");
      tr = table.getElementsByTagName("tr");
      for (i = 1; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        td2 = tr[i].getElementsByTagName("td")[2];
        td3 = tr[i].getElementsByTagName("td")[3];
        td4 = tr[i].getElementsByTagName("td")[4];
        if (td || td2 || td3 || td4) {
          txtValue = td.textContent || td.innerText;
          txtValue2 = td2.textContent || td2.innerText;
          txtValue3 = td3.textContent || td3.innerText;
          txtValue4 = td4.textContent || td4.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1 || txtValue3.toUpperCase().indexOf(filter) > -1 || txtValue4.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
    
    function filtro_tabela_aguardando() {
      var input, filter, table, tr, td, td2, td3, td4, i, txtValue;
      input = document.getElementById("filtrarTabelaAguardando");
      filter = input.value.toUpperCase();
      table = document.getElementById("tabela_aguardando");
      tr = table.getElementsByTagName("tr");
      for (i = 1; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        td2 = tr[i].getElementsByTagName("td")[2];
        td3 = tr[i].getElementsByTagName("td")[3];
        td4 = tr[i].getElementsByTagName("td")[4];
        if (td || td2 || td3 || td4) {
          txtValue = td.textContent || td.innerText;
          txtValue2 = td2.textContent || td2.innerText;
          txtValue3 = td3.textContent || td3.innerText;
          txtValue4 = td4.textContent || td4.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1 || txtValue3.toUpperCase().indexOf(filter) > -1 || txtValue4.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
    
    function filtro_tabela_pendente() {
      var input, filter, table, tr, td, td2, td3, td4, i, txtValue;
      input = document.getElementById("filtrarTabelaPendente");
      filter = input.value.toUpperCase();
      table = document.getElementById("tabela_pendente");
      tr = table.getElementsByTagName("tr");
      for (i = 1; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        td2 = tr[i].getElementsByTagName("td")[2];
        td3 = tr[i].getElementsByTagName("td")[3];
        td4 = tr[i].getElementsByTagName("td")[4];
        if (td || td2 || td3 || td4) {
          txtValue = td.textContent || td.innerText;
          txtValue2 = td2.textContent || td2.innerText;
          txtValue3 = td3.textContent || td3.innerText;
          txtValue4 = td4.textContent || td4.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1 || txtValue3.toUpperCase().indexOf(filter) > -1 || txtValue4.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
</script>
<script>
    function filtra_icones(){
      var linha = event.srcElement.id
      console.log(linha)
      var linha_array = linha.split("_")
      var cards = ["pendente","priorizar","prioridade","desenvolvendo","revisar","aprovacao","aprovacaogmg","aprovado"]
      var div_img = "imagem_"+linha_array[1]
      var icone = document.getElementById(div_img).src
      for (i=0;i<cards.length;i++){
          if (cards[i] == linha_array[1]){
              var tira = cards.splice(i,1)
          }
      }
      
      if (icone.indexOf("_off") > -1){
          document.getElementById(div_img).src = icone.substring(0,icone.lastIndexOf('_off.'))+".png"
          for (i=0;i<cards.length;i++){
              var nova_div = "imagem_"+cards[i]
              var icone_atual = document.getElementById(nova_div).src
              if (icone_atual.indexOf("_off") == -1){
              document.getElementById(nova_div).src = icone_atual.replace(".png","_off.png")
              }
          }
          if (linha_array[1] == "pendente"){
              document.getElementById("mostra_tabela_prioridade").style.display = "none"
              document.getElementById("mostra_tabela_aguardando").style.display = "none"
              document.getElementById("mostra_tabela_pendente").style.display = "inline-block"
               document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
            document.getElementById("mostra_tabela_revisar").style.display = "none"
            document.getElementById("mostra_tabela_reprovados").style.display = "none"
            document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
          
          }
          if (linha_array[1] == "priorizar"){
              document.getElementById("mostra_tabela_prioridade").style.display = "none"
              document.getElementById("mostra_tabela_aguardando").style.display = "inline-block"
              document.getElementById("mostra_tabela_pendente").style.display = "none"
               document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
                document.getElementById("mostra_tabela_revisar").style.display = "none"
                document.getElementById("mostra_tabela_reprovados").style.display = "none"
                document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
          
          }
          if (linha_array[1] == "prioridade"){
              document.getElementById("mostra_tabela_prioridade").style.display = "inline-block"
              document.getElementById("mostra_tabela_aguardando").style.display = "none"
              document.getElementById("mostra_tabela_pendente").style.display = "none"
               document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
                document.getElementById("mostra_tabela_revisar").style.display = "none"
                document.getElementById("mostra_tabela_reprovados").style.display = "none"
                document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
          }
          if (linha_array[1] == "desenvolvendo"){
          document.getElementById("mostra_tabela_prioridade").style.display = "none"
          document.getElementById("mostra_tabela_aguardando").style.display = "none"
          document.getElementById("mostra_tabela_pendente").style.display = "none"
          document.getElementById("mostra_tabela_desenvolvendo").style.display = "inline-block"
           document.getElementById("mostra_tabela_revisar").style.display = "none"
           document.getElementById("mostra_tabela_reprovados").style.display = "none"
           document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
          preenche_desenvolvimento()
      }
       if (linha_array[1] == "revisar"){
          document.getElementById("mostra_tabela_prioridade").style.display = "none"
          document.getElementById("mostra_tabela_aguardando").style.display = "none"
          document.getElementById("mostra_tabela_pendente").style.display = "none"
          document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
          document.getElementById("mostra_tabela_revisar").style.display = "inline-block"
          document.getElementById("mostra_tabela_reprovados").style.display = "inline-block"
          document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
          preenche_revisao()
      }
      if (linha_array[1] == "aprovacao"){
          document.getElementById("mostra_tabela_prioridade").style.display = "none"
          document.getElementById("mostra_tabela_aguardando").style.display = "none"
          document.getElementById("mostra_tabela_pendente").style.display = "none"
          document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
          document.getElementById("mostra_tabela_revisar").style.display = "none"
          document.getElementById("mostra_tabela_reprovados").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "inline-block"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "inline-block"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
          preenche_aguarda_envio()
      }
      if (linha_array[1] == "aprovado"){
          document.getElementById("mostra_tabela_prioridade").style.display = "none"
          document.getElementById("mostra_tabela_aguardando").style.display = "none"
          document.getElementById("mostra_tabela_pendente").style.display = "none"
          document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
          document.getElementById("mostra_tabela_revisar").style.display = "none"
          document.getElementById("mostra_tabela_reprovados").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "inline-block"
           preenche_aprovados()
      }
      
          
      } else {
          
          document.getElementById(div_img).src = icone.substring(0,icone.lastIndexOf('.'))+"_off.png"
             document.getElementById("mostra_tabela_prioridade").style.display = "inline-block"
              document.getElementById("mostra_tabela_aguardando").style.display = "inline-block"
              document.getElementById("mostra_tabela_pendente").style.display = "inline-block"
              document.getElementById("mostra_tabela_desenvolvendo").style.display = "none"
               document.getElementById("mostra_tabela_revisar").style.display = "none"
                document.getElementById("mostra_tabela_reprovados").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_aprovacao").style.display = "none"
          document.getElementById("mostra_tabela_aguarda_envio").style.display = "none"
          document.getElementById("mostra_tabela_aprovados").style.display = "none"
      }
      console.log(linha_array[1])
      
    }
</script>
  	
  






    </body>

</html>