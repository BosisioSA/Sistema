<!doctype html>
<html>
    <head>
      <title>Informação das Especificações do Cliente</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
      <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/table.css">
        <meta name="viewport" content="width=944">
        <meta name="robots" content="noindex, follow">
	<link rel="Shortcut icon" href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/favicon.ico" type="image/x-icon">
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon.png" rel="apple-touch-icon" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
        <link rel="stylesheet" href="fonts/fontawesome-all.min.css">
        <link rel="stylesheet" href="fonts/font-awesome.min.css">
        <link rel="stylesheet" href="fonts/fontawesome5-overrides.min.css">
        <script src="js/popper.js"></script>
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
          <script src="js/jscolor.js"></script>
    
        <script src="/portal.cgi/PP_FILE_STORE/Sistema/assets/js/vendor/modernizr-2.6.2.min.js"></script>
      	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-1.8.3.min.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-ui-1.9.2.custom.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.cookie.js'></script>
    	<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js'></script>
    <!-- portal.js -->
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-linedtextarea.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/codemirror.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/javascript.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.tmpl.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-regex.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/sitemapstyler.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/date.format.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.iframe-transport.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.fileupload.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.notify.min.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.event.drag-2.2.js'></script>
        <script type='text/javascript' src='/portal.cgi?api=js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/portal/js/nixps-portal-api.js'></script>
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.i18n.js'></script>
         <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/upload/js/upload.js'></script>
      
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/upload/js/upload-controller.js'></script>
       <script>
            var queryString = window.location.search;
            var ordem = decodeURI(queryString.substring(7,queryString.length))
        </script>
    
       
       
    

    </head>


    <body>

  		<div class="wrapper d-flex align-items-stretch">
  			<nav id="sidebar">
  				<div class="p-4 pt-5">
            <img>
  		  		<img src="./logo/logo_valgroup.png" style="width: 90%; margin-bottom: 50px;">
               <ul class="active components mb-5">
               <li class="active" style="list-style-type: none">
               <ul class="collapse list-unstyled" id="homeSubmenu">
            <li style="list-style-type: none">
               <img src="./Icons/responsavel.png" width="20px" style="margin-right: 10px;"><span id="user_pacote" style="color: black;"></span>
          </li>
          <li style="list-style-type: none">
               <img src="./Icons/inicio.png" width="20px" style="margin-right: 10px"><span id="inicio_pacote" style="color: black;"></span>
          </li>
          <li style="list-style-type: none">
               <img src="./Icons/final.png" width="20px" style="margin-right: 10px"><span id="final_pacote" style="color: black;"></span>
          </li>
          
          
          </ul>
        
            
         </li>   
         <li>
              <a href="#homeSubmenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><img src="./Icons/analiseespecificacao.png" width="30px" style="margin-right: 10px">Especificação Técnica</a>
           <li class="active" style="list-style-type: none">
               <ul class="collapse list-unstyled" id="homeSubmenu2">
            <li style="list-style-type: none">
               <img src="./Icons/responsavel.png" width="20px" style="margin-right: 10px;"><span id="user_analiseespecificacao" style="color: black;"></span>
          </li>
          <li style="list-style-type: none">
               <img src="./Icons/inicio.png" width="20px" style="margin-right: 10px"><span id="inicio_analiseespecificacao" style="color: black;"></span>
          </li>
          <li style="list-style-type: none">
               <img src="./Icons/final.png" width="20px" style="margin-right: 10px"><span id="final_analiseespecificacao" style="color: black;"></span>
          </li>
          
          
          </ul>
         </li>
            
   
       </ul>
   
  	        <div class="footer">
  	        	<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0.
  						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a>
  						   Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
  	        </div>
  	      </div>
      	</nav>

          <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5">

          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">

              <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
              </button>
              <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <i class="fa fa-bars"></i>
              </button>
              <div id="bemvindo" style="margin-left: 20px;"></div>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav ml-auto">
                 </ul>
              </div>
            </div>
          </nav>
          <div>
        <div class="form-group" style="display:inline-block; vertical-align: base-line; width: 70%;">
        <h2 id="nome_ticket" style="display:block;">Análise da Especificação</h2>
        </div>
        <div class="form-group" style="display:inline-block; vertical-align: base-line; width: 25%;">
            <h6 id="tempo_para_entrega">Tempo para entrega: 00:00hs</h6>
        </div>
        <hr>
     <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
      <p style="margin-top: -9px;"><strong>Informações do Ticket</strong></p>
       <div class="form-group" style="display:inline-block; vertical-align: top; width: 12%; margin-right: 2%">
          <label for="numero_ticket">Ticket Numero</label>
            <input type="text" class="form-control"  id="numero_ticket" name="numero_ticket" readonly>
        </div>
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 12%; margin-right: 2%">
          <label for="item_ticket">Item</label>
            <input type="text" class="form-control"  id="item_ticket" name="item_ticket" readonly>
        </div>
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 15%; margin-right: 2%">
          <label for="cliente_ticket">Cliente</label>
            <input type="text" class="form-control"   id="cliente_ticket" name="cliente_ticket" readonly>
        </div> 
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 34%; margin-right: 2%">
          <label for="descricao_ticket">Descrição</label>
            <input type="text" class="form-control"   id="descricao_ticket" name="descricao_ticket" readonly>
        </div>
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 2%; margin-right: 2%">
        <label for="Imp">Imp</label>
            <img src="./Icons/maq_roto.png" style="width: 100%" id="img_imp">
        </div>
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 8%; margin-right: 2%">
          <label for="criacao_ticket">Criado em</label>
            <input type="text" class="form-control"   id="criacao_ticket" name="criacao_ticket" readonly>
        </div> 
       </div> 
       
       <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 40%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 10px;">
      <p style="margin-top: -9px;"><strong>Estrutura</strong></p>
    
       <div class="form-group" style="display:inline-block; vertical-align: top; width: 48%; margin-right: 2%">
          <label for="substrato_impressao">Substrato de Impressão</label>
            <select class="form-control"   id="substrato_impressao" name="substrato_impressao">
            <option value="undefined">Selecionar...</option>
             </select> 
        </div>
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 48%; ">
          <label for="laminacao_1">Laminação 1</label>
            <select class="form-control"   id="laminacao_1" onchange="temlam_1()" name="laminacao_1">
            <option value="N/A">Não Aplica</option>
             </select> 
        </div>
        <div id="div_laminacao_2" class="form-group" style="display:none; vertical-align: top; width: 48%; margin-right: 2%">
          <label for="laminacao_2">Laminacão 2</label>
            <select class="form-control"   id="laminacao_2" onchange="temlam_2()" name="laminacao_2">
            <option value="N/A">Não Aplica</option>
             </select> 
        </div>
        <div id="div_laminacao_3" class="form-group" style="display:none; vertical-align: top; width: 48%;">
          <label for="laminacao_3">Laminação 3</label>
            <select class="form-control"   id="laminacao_3" name="laminacao_3">
            <option value="N/A">Não Aplica</option>
             </select> 
        </div>
    </div>
      <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 34%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;margin-right: 10px;">
      <p style="margin-top: -9px;"><strong>Filme</strong></p>
    
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 48%; margin-right: 2%">
          <label for="passo_impressao">Passo</label>
            <input type="text" class="form-control"   id="passo_impressao" onkeyup="this.value=this.value.replace(/[^0-9.]/g, '').toUpperCase()" name="passo_impressao">
        </div>
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 48%;">
          <label for="passocompensado_impressao">Passo Compensado</label>
            <input type="text" class="form-control"   id="passocompensado_impressao" onkeyup="this.value=this.value.replace(/[^0-9.]/g, '').toUpperCase()" name="passocompensado_impressao">
        </div>
        
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 37%; margin-right: 2%">
          <label for="largura_impressao">Largura da Filme</label>
            <input type="text" class="form-control"  onfocusout="calcula_pistas()" onkeyup="this.value=this.value.replace(/[^0-9.]/g, '').toUpperCase()" id="largura_impressao" name="largura_impressao">
        </div>
        
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 37%; margin-right: 2%">
          <label for="largura_filme">Largura da Bobina</label>
            <input type="text" class="form-control" onfocusout="calcula_pistas()" onkeyup="this.value=this.value.replace(/[^0-9.]/g, '').toUpperCase()"  id="largura_filme" name="largura_filme">
        </div>
        
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 20%;">
          <label for="pistas">Pistas</label>
            <input type="text" class="form-control"   id="pistas" name="pistas" readonly>
        </div>
        
        </div>
     
    <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 24%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
      <p style="margin-top: -9px;"><strong>Características</strong></p>
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 100%;">
        <label>Encanoamento</label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions"   id="inlineRadio1" value="Sim">
        <label class="form-check-label" for="inlineRadio1">Sim</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions"  id="inlineRadio2" value="Não" checked>
        <label class="form-check-label" for="inlineRadio2">Não</label>
    </div>
       </div>
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 100%;">
        <label>Enrolamento</label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions2"   id="inlineRadio3" value="Sim">
        <label class="form-check-label" for="inlineRadio3">Sim</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions2"  id="inlineRadio4" value="Não" checked>
        <label class="form-check-label" for="inlineRadio4">Não</label>
    </div>
    </div>
       </div>
       
       <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 26%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 2%;">
      <p style="margin-top: -9px;"><strong>Acabamentos</strong></p>
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 48%; margin-right: 2%">
        <label>Primer</label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions3"    id="inlineRadio5" value="Sim">
        <label class="form-check-label" for="inlineRadio5">Sim</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions3"  id="inlineRadio6" value="Não" checked>
        <label class="form-check-label" for="inlineRadio6">Não</label>
    </div>
       </div>
       
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 48%;">
        <label>Verniz</label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions4" onchange="tem_verniz()"  id="inlineRadio7" value="Sim">
        <label class="form-check-label" for="inlineRadio7">Sim</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions4" onchange="tem_verniz()" id="inlineRadio8" value="Não" checked>
        <label class="form-check-label" for="inlineRadio8">Não</label>
    </div>
       </div>
       <div id="div_tipo_verniz" class="form-group" style="display:none; vertical-align: top; width: 98%;">
          <label for="tipo_verniz">Tipo de Verniz</label>
            <input type="text" class="form-control"   id="tipo_verniz" name="tipo_verniz">
        </div>
       </div> 
       
      <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 23%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 2%;">
      <p style="margin-top: -9px;"><strong>Adesivo</strong></p>
    
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 100%;">
          <label for="adesivo_impressao">Tipo</label>
            <select class="form-control"   id="adesivo_impressao" name="adesivo_impressao">
            <option value="undefined">Selecionar...</option>
             </select> 
        </div>
        
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 100%;">
          <label for="retencaosolventes_impressao">Retenção de Solventes</label>
            <input type="text" class="form-control"   id="retencaosolventes_impressao" name="retencaosolventes_impressao">
        </div>
        </div>
        
           <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 45%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 10px;">
      <p style="margin-top: -9px;"><strong>Embobinamento</strong></p>
    
        
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 70%; margin-right: 2%"> 
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 47%; margin-right: 2%">
         <label for="referencia_arte">Referência</label>
            <select class="form-control"   id="referencia_arte" onchange="muda_figura()" name="referencia_arte">
            <option value="Código de Barras">Código de Barras</option>
            <option value="Gramagem">Gramagem</option>
            <option value="Logo">Logo</option>
            <option value="Liso">Liso</option>
             </select> 
        </div>   
            
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 47%;">
         <label for="lado_impressao">Lado Impressão</label>
            <select class="form-control"   id="lado_impressao" onchange="muda_figura()" name="lado_impressao">
            <option value="Externa">Externa</option>
            <option value="Interna">Interna</option>
             </select> 
        </div>
        
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 47%; margin-right: 2%">
         <label for="puxada_impressao">Referência da Puxada</label>
            <select class="form-control"   id="puxada_impressao" onchange="muda_figura()" name="puxada_impressao">
            <option value="Cabeça">Cabeça</option>
            <option value="Horizontal">Horizontal</option>
            <option value="Horizontal Rotacionado">Horizontal Rotacionado</option>
            <option value="Pé">Pé</option>
             </select> 
        </div>
        
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 47%;">
         <label for="fotocelula">Fotocélula</label>
            <select class="form-control"   id="fotocelula" onchange="muda_figura()" name="fotocelula">
            <option value="Direita">Direita</option>
            <option value="Dupla">Dupla</option>
            <option value="Esquerda">Esquerda</option>
            <option value="Sem Fotocélula">Sem Fotocélula</option>
             </select> 
        </div>
        </div>
          <div class="form-group" style="display:inline-block; vertical-align: top; width: 27%;">
            <img src="./Icons/bob_puxada/Código de Barras_Externa_Cabeça_Direita.png" style="width: 100%" id="img_puxada">
        </div>
        </div>
        
      
         <div class="form-group" style="display:inline-block;  width: 44%; margin-left: 7%; margin-top: 56px">
             
             <a href="#" id="upload_especificacao" class="btn btn-primary" target="_Blank">Upload da Especificação</a>
             <a href="#" id="link_arquivo_especificacao" style="display: none"><img src="./Icons/analiseespecificacao.png" width="20px"></a>
             
            </div>
       
        
        
  
   
                 
                 
                 
                 
           
                
    <div class="form-group" style="display:inline-block; width: 16%; margin-top: 10px;">
    <button class="btn btn-secondary" onclick="verifica_campos('rascunho')">Salvar Rascunho</button><br>
    </div>
    <div class="form-group" style="display:inline-block;  width: 16%; margin-top: 10px;">
    <button class="btn btn-primary" onclick="verifica_campos('enviar')">Terminar Tarefa</button><br>
    </div>
    <div class="form-group" style="display:inline-block;  width: 16%; margin-top: 10px;">
    <button class="btn btn-primary" onclick="cancelar()">Cancelar</button><br>
    </div>
    
    <div id="info_ticket"></div>
                
                
              
                
                 
                 
       
            
    
              
            </div>
        
       
  	
  		
  	
  	<script>
  	    // funcoes de apoio
  	    
  	    var usuario = api.auth.get_current_user()
  	    
  	    document.getElementById("bemvindo").innerText = "Bem vindo, "+usuario.fullname
  	 //   document.getElementById("data_entrega").value = "02:00"
  	    
      function clearTable(table) {
  var rows = table.rows;
  var i = rows.length;
  while (--i) {
    rows[i].parentNode.removeChild(rows[i]);
    // or
    // table.deleteRow(i);
  }
}

function onlyUnique(value, index, self) {
  return self.indexOf(value) === index;
}

function cmyk2rgb(c, m, y, k, normalized){
    c = (c / 100);
    m = (m / 100);
    y = (y / 100);
    k = (k / 100);
    
    c = c * (1 - k) + k;
    m = m * (1 - k) + k;
    y = y * (1 - k) + k;
    
    var r = 1 - c;
    var g = 1 - m;
    var b = 1 - y;
    
    if(!normalized){
        r = Math.round(255 * r);
        g = Math.round(255 * g);
        b = Math.round(255 * b);
    }
    
    return {
        r: r,
        g: g,
        b: b
    }
}

function rgb2cmyk(r, g, b, normalized){
    var c = 1 - (r / 255);
    var m = 1 - (g / 255);
    var y = 1 - (b / 255);
    var k = Math.min(c, Math.min(m, y));
    
    c = (c - k) / (1 - k);
    m = (m - k) / (1 - k);
    y = (y - k) / (1 - k);
    
    if(!normalized){
        c = Math.round(c * 10000) / 100;
        m = Math.round(m * 10000) / 100;
        y = Math.round(y * 10000) / 100;
        k = Math.round(k * 10000) / 100;
    }
    
    c = isNaN(c) ? 0 : c;
    m = isNaN(m) ? 0 : m;
    y = isNaN(y) ? 0 : y;
    k = isNaN(k) ? 0 : k;
    
    return {
        c: c,
        m: m,
        y: y,
        k: k
    }
}


function componentToHex(c) {
  var hex = c.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}

function padWithZero(num, targetLength) {
  return String(num).padStart(targetLength, '0')
}



if (usuario.scope_name != undefined){
    var nome_scope = usuario.scope_name[0].split("_")
   
}




// preenche Selects

selectTipo2 = document.getElementById('substrato_impressao');
selectLam1 = document.getElementById('laminacao_1');
selectLam2 = document.getElementById('laminacao_2');
selectLam3 = document.getElementById('laminacao_3');
    var tiposTipo2 = api.custom_objects.list_with_options("BR-VALFI_substratos").results
    var nomes_estrutura = []
    
    for (i=0;i<tiposTipo2.length;i++){
        nomes_estrutura.push(tiposTipo2[i].tipo)
    }
    var nomes_limpos = nomes_estrutura.filter(onlyUnique)
    for (var i = 0; i<nomes_limpos.length; i++){
        var opt = document.createElement('option');
        opt.value = nomes_limpos[i];
        opt.innerHTML = nomes_limpos[i];
        selectTipo2.appendChild(opt);
    }
    
    for (var i = 0; i<nomes_limpos.length; i++){
        var opt = document.createElement('option');
        opt.value = nomes_limpos[i];
        opt.innerHTML = nomes_limpos[i];
        selectLam1.appendChild(opt);
    }
    for (var i = 0; i<nomes_limpos.length; i++){
        var opt = document.createElement('option');
        opt.value = nomes_limpos[i];
        opt.innerHTML = nomes_limpos[i];
        selectLam2.appendChild(opt);
    }
    for (var i = 0; i<nomes_limpos.length; i++){
        var opt = document.createElement('option');
        opt.value = nomes_limpos[i];
        opt.innerHTML = nomes_limpos[i];
        selectLam3.appendChild(opt);
    }
   
selectAdesivo = document.getElementById('adesivo_impressao');   
 var tiposAdesivo = api.custom_objects.list_with_options("BR-TECNO_adesivos").results
   
   for (var i = 0; i<tiposAdesivo.length; i++){
        var opt = document.createElement('option');
        opt.value = tiposAdesivo[i].nome;
        opt.innerHTML = tiposAdesivo[i].nome;
        selectAdesivo.appendChild(opt);
    }
   
   
 function temlam_1(){
     if (document.getElementById("laminacao_1").value != "N/A"){
         document.getElementById("div_laminacao_2").style.display = "inline-block"
     } else {
        document.getElementById("div_laminacao_2").style.display = "none"  
     }
 }
 
 function temlam_2(){
     if (document.getElementById("laminacao_2").value != "N/A"){
         document.getElementById("div_laminacao_3").style.display = "inline-block"
     } else {
        document.getElementById("div_laminacao_3").style.display = "none"  
     }
 }
  
var hoje = new Date()
//document.getElementById("data_abertura").value = dateFormat(hoje,"yyyy-mm-dd")

//hoje.setDate(hoje.getDate()+30)
//document.getElementById("data_entrega").value = dateFormat(hoje,"yyyy-mm-dd")

  	</script>
  <script>
      
      // preenche dados do ticket
      
    var busca_ticket = api.custom_objects.list_with_options("BR-TECNO_Tickets",["_id","equal to",ordem]).results[0]
      
      document.getElementById("numero_ticket").value = busca_ticket.numero_ticket
      document.getElementById("cliente_ticket").value = busca_ticket.cliente
      document.getElementById("descricao_ticket").value = busca_ticket.descricao
      document.getElementById("item_ticket").value = busca_ticket.item
      
      var icone_imp = "./Icons/maq_flexo.png"
        if (busca_ticket.processo.valor == "Rotogravura"){
                icone_imp = "./Icons/maq_roto.png"
            }
            
      document.getElementById("img_imp").src = icone_imp
      
      
      
      var dataentrada = new Date(busca_ticket.entrada_em)
      var datacalculo = new Date(busca_ticket.entrada_em)
      if (dataentrada.getDay() === 5){
          var final = dataentrada.setDate(dataentrada.getDate()+3)
      } else {
          var final = dataentrada.setDate(dataentrada.getDate()+1)
      }
      console.log(final)
      var agora = new Date()
      var horas_diferenca = final-agora
      console.log("HORAS DIFERENCA")
      console.log(horas_diferenca)
      document.getElementById("criacao_ticket").value = dateFormat(datacalculo,"dd/mm/yyyy")
      var calcula_horas = parseInt(horas_diferenca/3600000)
      var calcula_minutos = (horas_diferenca/3600000)%1
      var minutos = parseInt(calcula_minutos*60)
      if (calcula_horas < 4){
       document.getElementById("tempo_para_entrega").style = "color:brown"   
      }
      if (calcula_horas < 2){
       document.getElementById("tempo_para_entrega").style = "color: orange"   
      }
      if (calcula_horas < 0){
       document.getElementById("tempo_para_entrega").style = "color: red"   
      }
      if (calcula_horas < 10){
          calcula_horas = "0"+calcula_horas
      }
      if (minutos < 10){
          minutos = "0"+minutos
      }
      document.getElementById("tempo_para_entrega").innerText = "Tempo para Entrega: "+calcula_horas+":"+minutos+"hs"
    
    if (busca_ticket.des1 != undefined){
    document.getElementById("substrato_impressao").value = busca_ticket.des1.substrato_impressao
    document.getElementById("laminacao_1").value = busca_ticket.des1.laminacao_1
    document.getElementById("laminacao_2").value = busca_ticket.des1.laminacao_2
    document.getElementById("laminacao_3").value = busca_ticket.des1.laminacao_3
    document.getElementById("passo_impressao").value = busca_ticket.des1.passo_impressao
    document.getElementById("passocompensado_impressao").value = busca_ticket.des1.passocompensado_impressao
    document.getElementById("largura_impressao").value = busca_ticket.des1.largura_impressao
    document.getElementById("largura_filme").value = busca_ticket.des1.largura_filme
    document.getElementById("pistas").value = busca_ticket.des1.pistas
    document.getElementById("inlineRadio1").checked = busca_ticket.des1.encanoamento_impressao.inlineRadio1
    document.getElementById("inlineRadio2").checked = busca_ticket.des1.encanoamento_impressao.inlineRadio2
   document.getElementById("inlineRadio3").checked = busca_ticket.des1.enrolamento_impressao.inlineRadio3
   document.getElementById("inlineRadio4").checked = busca_ticket.des1.enrolamento_impressao.inlineRadio4
   document.getElementById("inlineRadio5").checked = busca_ticket.des1.primer.inlineRadio5
   document.getElementById("inlineRadio6").checked = busca_ticket.des1.primer.inlineRadio6
   document.getElementById("inlineRadio7").checked = busca_ticket.des1.verniz.inlineRadio7
   document.getElementById("inlineRadio8").checked = busca_ticket.des1.verniz.inlineRadio8
   if (busca_ticket.des1.verniz.inlineRadio7 === true){
       document.getElementById("div_tipo_verniz").style.display = "inline-block"
   }
   document.getElementById("tipo_verniz").value = busca_ticket.des1.tipo_verniz
    document.getElementById("adesivo_impressao").value = busca_ticket.des1.adesivo_impressao
    document.getElementById("retencaosolventes_impressao").value = busca_ticket.des1.retencaosolventes_impressao
    document.getElementById("referencia_arte").value = busca_ticket.des1.referencia_arte
    document.getElementById("lado_impressao").value = busca_ticket.des1.lado_impressao
    document.getElementById("puxada_impressao").value = busca_ticket.des1.puxada_impressao
    document.getElementById("fotocelula").value = busca_ticket.des1.fotocelula
     var ref = document.getElementById("referencia_arte").value
  	    var lado = document.getElementById("lado_impressao").value
  	    var puxada = document.getElementById("puxada_impressao").value
  	    var fot = document.getElementById("fotocelula").value
  	    var figura = ref+"_"+lado+"_"+puxada+"_"+fot+".png"
  	    document.getElementById("img_puxada").src = "./Icons/bob_puxada/"+figura
    
    }
      
  </script>
 
  	<script>
  	
  	function muda_figura(){
  	    var ref = document.getElementById("referencia_arte").value
  	    var lado = document.getElementById("lado_impressao").value
  	    var puxada = document.getElementById("puxada_impressao").value
  	    var fot = document.getElementById("fotocelula").value
  	    var figura = ref+"_"+lado+"_"+puxada+"_"+fot+".png"
  	    document.getElementById("img_puxada").src = "./Icons/bob_puxada/"+figura
  	}
  	
  	
  	function verifica_campos(que_fazer){
  	    
  	
  	
  	
    var valido = true
    
    var data = {}
    
   
    data["substrato_impressao"] = document.getElementById("substrato_impressao").value
    data["laminacao_1"] = document.getElementById("laminacao_1").value
    data["laminacao_2"] = document.getElementById("laminacao_2").value
    data["laminacao_3"] = document.getElementById("laminacao_3").value
    data["passo_impressao"] = document.getElementById("passo_impressao").value
    data["passocompensado_impressao"] = document.getElementById("passocompensado_impressao").value
    data["largura_impressao"] = document.getElementById("largura_impressao").value
    data["largura_filme"] = document.getElementById("largura_filme").value
    data["pistas"] = document.getElementById("pistas").value
    var encanoamento = {}
    encanoamento["inlineRadio1"] = document.getElementById("inlineRadio1").checked
    encanoamento["inlineRadio2"] = document.getElementById("inlineRadio2").checked
    data["encanoamento_impressao"] = encanoamento
    var enrolamento= {}
    enrolamento["inlineRadio3"] = document.getElementById("inlineRadio3").checked
    enrolamento["inlineRadio4"] = document.getElementById("inlineRadio4").checked
    data["enrolamento_impressao"] = enrolamento
    var primer= {}
    primer["inlineRadio5"] = document.getElementById("inlineRadio5").checked
    primer["inlineRadio6"] = document.getElementById("inlineRadio6").checked
    data["primer"] = primer
    var verniz= {}
    verniz["inlineRadio7"] = document.getElementById("inlineRadio7").checked
    verniz["inlineRadio8"] = document.getElementById("inlineRadio8").checked
    data["verniz"] = verniz
    data["tipo_verniz"] = document.getElementById("tipo_verniz").value
    data["adesivo_impressao"] = document.getElementById("adesivo_impressao").value
    data["retencaosolventes_impressao"] = document.getElementById("retencaosolventes_impressao").value
    data["referencia_arte"] = document.getElementById("referencia_arte").value
    data["lado_impressao"] = document.getElementById("lado_impressao").value
    data["puxada_impressao"] = document.getElementById("puxada_impressao").value
    data["fotocelula"] = document.getElementById("fotocelula").value
   
    
    var temposdeexecucao = busca_ticket.tempos_processo
    
    
    
    var nextstage = busca_ticket.proxima_etapa
    
   if (que_fazer == "enviar"){
    console.log("estou salvando")
    for (i=0;i<nextstage.length;i++){
        if (nextstage[i].forms == "DES1"){
            var tira = nextstage.splice(i,1)
        }
    }
    
    
    
    
    salva_ticket2(data,ordem,temposdeexecucao,nextstage)
    } else {
    
    for (i=0;i<nextstage.length;i++){
        if (nextstage[i].forms == "DES1"){
            nextstage[i]["pending"] = true
        }
    }
    
     salva_ticket(data,ordem,nextstage)
    }
    
   
  	
  	}
  	</script>
  	
   <script>
       function salva_ticket(dados,id,proximaetapa){
          
            
            
            
            api.custom_objects.set_keys("BR-TECNO_Tickets",id,{"des1":dados,"proxima_etapa":proximaetapa})
            document.getElementById("info_ticket").innerText = "Ticket atualizado com sucesso!"
           setTimeout(function(){window.open("desenvolvimento_dash_sp1.html","_self")}, 3000);
       }
       
       function salva_ticket2(dados,id,ostempos,proximaetapa){
          
              for (i=0;i<ostempos.length;i++){
        if (ostempos[i].formulario == "DES1"){
            var tempos_atuais = ostempos[i].tempos
            tempos_atuais[tempos_atuais.length-1]["final"] = new Date()
            ostempos[i].tempos = tempos_atuais
            
        } 
    }
            
            
            api.custom_objects.set_keys("BR-TECNO_Tickets",id,{"des1":dados,"tempos_processo":ostempos,"proxima_etapa":proximaetapa})
            document.getElementById("info_ticket").innerText = "Ticket atualizado com sucesso!"
           setTimeout(function(){window.open("desenvolvimento_dash_sp1.html","_self")}, 3000);
       }
       
       function cancelar(){
          window.open("engenharia_dash_sp1.html","_self")
      }
   </script>
   
  <script>
      function tem_verniz(){
         if (document.getElementById("inlineRadio7").checked === true){
             document.getElementById("div_tipo_verniz").style.display = "inline-block"
         } else {
            document.getElementById("div_tipo_verniz").style.display = "none" 
         }
      }
      
      function calcula_pistas(){
          var largura_filme = document.getElementById("largura_impressao").value
          var largura_produto =  document.getElementById("largura_filme").value
          if (largura_filme != "" && largura_produto != ""){
              var larg = parseInt(largura_filme)
              var larg_2 = parseInt(largura_produto)
              document.getElementById("pistas").value = parseInt(larg_2/larg)
          }
          
      }
  </script>	
  
  
  	
  






    </body>

</html>