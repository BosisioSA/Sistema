<!doctype html>
<html>
    <head>
      <title>Lista Vinculos - Finepack</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
      <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/table.css">
        <meta name="viewport" content="width=944">
        <meta name="robots" content="noindex, follow">
	<link rel="Shortcut icon" href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/favicon.ico" type="image/x-icon">
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon.png" rel="apple-touch-icon" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
        <link rel="stylesheet" href="fonts/fontawesome-all.min.css">
        <link rel="stylesheet" href="fonts/font-awesome.min.css">
        <link rel="stylesheet" href="fonts/fontawesome5-overrides.min.css">

        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="/portal.cgi/PP_FILE_STORE/Sistema/assets/js/vendor/modernizr-2.6.2.min.js"></script>
      	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-1.8.3.min.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-ui-1.9.2.custom.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.cookie.js'></script>
    <!-- portal.js -->
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-linedtextarea.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/codemirror.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/javascript.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.tmpl.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-regex.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/sitemapstyler.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/date.format.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.iframe-transport.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.fileupload.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.notify.min.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.event.drag-2.2.js'></script>
        <script type='text/javascript' src='/portal.cgi?api=js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/portal/js/nixps-portal-api.js'></script>
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.i18n.js'></script>
        <script src="js/popper.js"></script>
        <script src="js/main.js"></script>
        <script>
          function logout() {
               $.cookie('user_id', '', { expires: -1, path: '/' });
               $.cookie('user_hash', '', { expires: -1, path: '/' });
               $.cookie('expiration_date', '', { expires: -1, path: '/' });
               $.cookie('customer_id', '', { expires: -1, path: '/' });
               $.cookie('customer_name', '', { expires: -1, path: '/' });
               $.cookie('username', '', { expires: -1, path: '/' });
               $.cookie('scope', '', { expires: -1, path: '/' });
               var lSession = api_sync.auth.create_session('', ''); // fecha sessao do CloudFlow
               var l_url = '/portal.cgi/PP_FILE_STORE/Public/Login/login.html'
               window.location.href = l_url;
               //window.location.href = '?upload=done';
          }
             
           
       </script>


    </head>


    <body onload="preencheLista()">

      <div class="wrapper d-flex align-items-stretch">
  			<nav id="sidebar">
  				<div class="p-4 pt-5">
            <img>
  		  		<img src="./logo/finepack.png" style="width: 70%; margin-bottom: 50px;">
              <ul class="active components mb-5">
                  <li style="color: #004b93; list-style-type: none">Vinculo
                  <ul>
                  <li style="list-style-type: none">
                     <a href="Upload_Interno.html"><i class="fas fa-file-upload" style="margin-right: 5px"></i>Novo Upload</a>
                    </li>
                    <li style="list-style-type: none">
                      <a href="uploads.html"><i class="fas fa-satellite-dish" style="margin-right: 5px"></i>Uploads</a>
                    </li>
                    <li style="list-style-type: none">
                      <a href="artes.html"><i class="fas fa-paint-brush" style="margin-right: 5px"></i>Artes</a>
                    </li>
                    <li class="active" style="list-style-type: none">
                      <a href="vinculos.html"><i class="fas fa-link" style="margin-right: 5px"></i>Vinculos</a>
                    </li>
                    </ul>
                    </li>
                    
                    <li style="color: #004b93;list-style-type: none">OP
                    <ul>
                    <li style="list-style-type: none">
                      <a href="skus.html"><i class="fas fa-search" style="margin-right: 5px"></i>Busca SKUs</a>
                    </li>
                    <li style="list-style-type: none">
                    <a href="OP_Abertas.html"><i class="fas fa-tools" style="margin-right: 5px"></i>OPs Abertas</a>
                  </li>
                  </ul>
                  </li>
                  <li style="color: #004b93;list-style-type: none">Clientes
                    <ul>
                    <li style="list-style-type: none">
                      <a href="fluxos.html"><i class="fas fa-thumbs-up" style="margin-right: 5px"></i>Cadastro Fluxos Aprovação</a>
                    </li>
                    <li style="list-style-type: none">
                      <a href="clientes.html"><i class="fas fa-user-friends" style="margin-right: 5px"></i>Cadastro Clientes</a>
                    </li>
                    </ul>
                    </li>
              
               <!--<li>
              <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Paginas Administrativas</a>
              <ul class="collapse list-unstyled" id="homeSubmenu">
                <li>
                    <a href="artes.html">Artes</a>
                </li>
              </ul>
            </li>-->
          </ul>
          <br>
          <br>
          <br>
            <div class="footer">
            <table style="width:100%; border-collapse: separate; border-spacing: 0 5px;">
              <tbody>
                <tr>
                  <td style="background-color: black; width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Sem Status</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(200,200,200); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Novo/ Sem Arte</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(250,100,0); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Em Execucao</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(250,250,0); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Em Pausa</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(0,0,250); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Em Aprovacao</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(0,250,0); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Aprovado</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(250,0,0); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Reprovado</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(100,0,0); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Expirado</div></td>
                </tr>
                <tr>
                  <td style="background-color: rgb(161,11,88); width: 25px"></td>
                  <td style = "color: black;"><div style="margin-left: 5px">Erro Envio Aprovacao</div></td>
                </tr>
                
              </tbody>
            </table>  
            
            
            </div>
  	      </div>
      	</nav>
          <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5">

          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">

              <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
              </button>
              <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <i class="fa fa-bars"></i>
              </button>
             <div class="col-md-5" id="bemvindo"></div>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav ml-auto">
                  <li class="nav-item">
                      <a class="nav-link" onclick="logout()">Logout</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div>
        <h2 style="display: inline-block;">Vinculos</h2><img src="./assets/img/reload.png" onClick="preencheLista();" width="20px" style="cursor: pointer; display: inline-block;margin-left: 20px;margin-bottom: 11px;">
        <br>
        <div id="info_update" style="color: green"></div>
            <div class="form-group col-md-2" style="display:inline-block;">
            <label for="o_cliente">Cliente</label>
            <input type="text" onkeyup="filtro()" class="form-control" id="o_cliente" name="nome_Cliente">
            </div>
            <div class="form-group col-md-2" style="display:inline-block;">
              <label for="cod_Vinculo">Codigo do Vinculo</label>
              <input type="text"  onkeyup="filtro2()" class="form-control" id="cod_Vinculo" name="cod_Vinculo">
              </div>
              <div class="form-group col-md-3" style="display:inline-block;">
                <label for="a_descricao">Descricao</label>
                <input type="text"  onkeyup="filtro3()" class="form-control" id="a_descricao" name="a_descricao">
                </div>
                <div class="form-group col-md-2" style="display:inline-block;">
                  <label for="o_status">Status</label>
                  <select  onchange="filtro4()" class="form-control" id="o_status" name="o_status">
                    <option value="todos">Todos</option>
                    <option value="rgb(0, 0, 0)">Sem Status</option>
                    <option value="rgb(200, 200, 200)">Novo/ Sem Arte</option>
                    <option value="rgb(250, 180, 0)">Em Execucao</option>
                    <option value="rgb(250, 250, 0)">Em Pausa</option>
                    <option value="rgb(0, 0, 250)">Em Aprovacao</option>
                    <option value="rgb(0, 250, 0)">Aprovado</option>
                    <option value="rgb(250, 0, 0)">Reprovado</option>
                    <option value="rgb(100, 0, 0)">Expirado</option>
                    <option value="rgb(161, 11, 88)">Erro Envio Aprovacao</option>
                    </select>
                  </div>
                  
                <div class="form-group col-md-2" style="display:inline-block;">
                  <a href="VinculoSemArq.html" target="_blank" class="btn btn-primary">Criar Vinculo</a>
                  </div>

                   
        
        <div id="acaoUpload"></div>
        <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th class="th-sm" style="width:2%"></th>
        <th class="th-sm" style="width:5%">Preview
        </th>
        <th class="th-sm" style="width:10%">Codigo Vinculo
        </th>
        <th class="th-sm" style="width:15%">Cliente
        </th>
        <th class="th-sm" style="width:20%">Descrição
        </th>
        <th class="th-sm" style="width:5%">Iniciar
        </th>
        <th class="th-sm" style="width:5%">Pausar
        </th>
        <th class="th-sm" style="width:5%">Novo
        </th>
        <th class="th-sm" style="width:5%">Aprovar
        </th>
        <th class="th-sm" style="width:5%">Editar
      </th>
        <th class="th-sm" style="width:5%">Localizar
      </th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
        </div>
  		</div>



      <script>
         function preencheLista(){
         
$("#dtBasicExample").find("tr:gt(0)").remove();
    document.getElementById("info_update").innerText = "Atualizando a lista"
      var tabela = document.getElementById("dtBasicExample");
      setTimeout(() => { document.getElementById("info_update").innerText = ""}, 3000);
      var qtasrow = tabela.rows.length;
      var a_lista = api.custom_objects.list_with_options("BR-FINEP_Vinculos",[],["codigo","ascending"]).results
      for (i=0;i<a_lista.length;i++){
        if (a_lista[i].fileinfo != undefined){
        var row =  tabela.insertRow(qtasrow);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);
        var cell6 = row.insertCell(5);
        var cell7 = row.insertCell(6);
        var cell8 = row.insertCell(7);
        var cell9 = row.insertCell(8);
        var cell10 = row.insertCell(9);
        var cell11 = row.insertCell(10);


        var stringRGB = "rgb(0,0,0)"

        if (a_lista[i].status == "1.novo" || a_lista[i].status == "novo"){
          stringRGB = "rgb(200,200,200)"
        }
        if (a_lista[i].status == "0_semarte"){
          stringRGB = "rgb(200,200,200)"
        }
        if (a_lista[i].status == "2_em_execucao"){
          stringRGB = "rgb(250,180,0)"
        }
        if (a_lista[i].status == "3_em_pause"){
          stringRGB = "rgb(250,250,0)"
        }
        if (a_lista[i].status == "4_em_aprovacao"){
          stringRGB = "rgb(0,0,250)"
        }
        if (a_lista[i].status == "5_aprovado"){
          stringRGB = "rgb(0,250,0)"
        }
        if (a_lista[i].status == "6_reprovado"){
          stringRGB = "rgb(250,0,0)"
        }
        if (a_lista[i].status == "7_expirado"){
          stringRGB = "rgb(100,0,0)"
        }
        if (a_lista[i].status == "8_erro_aprovacao"){
          stringRGB = "rgb(64,34,34)"
        }
        
         if (a_lista[i].thumbnail === undefined || a_lista[i].thumbnail == ""){
        //var arquivo = a_lista[i].fileinfo.folder_path+encodeURIComponent(a_lista[i].fileinfo.file_name)
        var arquivo = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",a_lista[i].fileinfo.folder_path]).results[0]
        //console.log(arquivo)
        if (arquivo === undefined){
        //var arquivo = api.asset.list_with_options(["file_name","equal to",a_lista[i].fileinfo.file_name,"and","path.7","equal to","2. Preparacao"]).results[0]
       var arquivo = api.asset.list_with_options(["file_name","equal to",a_lista[i].fileinfo.file_name,"and","path.7","equal to","2. Preparacao"]).results[0]
      }
      //console.log(arquivo)
        // var asset = api.asset.get_by_url(arquivo)
       if (arquivo != undefined){
        var thumb = ""
        if (arquivo.thumb != undefined){
          thumb = arquivo.thumb
        }
      } 
            
      if (arquivo.metadata_skipped === true){
        thumb = "/portal.cgi?thumbnail=getJPEG&id=587B902B7E715584D2B26C00"
      }
      api.custom_objects.set_keys("BR-FINEP_Vinculos",a_lista[i]._id,{"thumbnail":thumb})
        } else {
            var thumb = a_lista[i].thumbnail
        }

        cell1.innerHTML = '<span id="cor_etapa" style="margin-top:5px;height:90px;width:20px;background-color:'+stringRGB+';display:inline-block"></span>'
        cell2.innerHTML = '<div style="margin: auto"><a href="'+a_lista[i].proofscope.url+'" style="cursor: pointer; margin: 15px 0;" target="_blank"><img src="http://189.112.135.139:9090'+a_lista[i].thumbnail+'" height="100px" width:"100px"></a></div>';
        cell3.innerHTML = '<div style="vertical-align: middle;">'+a_lista[i].codigo+'</div>';
        cell4.innerHTML = '<div style="vertical-align: middle;">'+a_lista[i].cliente+'</div>';
        cell5.innerHTML = '<div style="vertical-align: middle;">'+a_lista[i].descricao+'</div>';
        cell6.innerHTML = '<div onclick="reply_start()" style="vertical-align: middle;cursor: pointer; margin: 15px 0;"><img id="oID_'+a_lista[i]._id+'" src="./Icons/play.png" width="50px"></div>';
        cell7.innerHTML = '<div onclick="reply_pause()" style="vertical-align: middle;cursor: pointer; margin: 15px 0;"><img id="oID_'+a_lista[i]._id+'" src="./Icons/pause.png" width="50px"></div>';
        cell10.innerHTML = '<div><a href="http://189.112.135.139:9090/portal.cgi/PP_FILE_STORE/Sistema/editaVinculo.html?ordem='+a_lista[i]._id+'" target="_blank"><img src="./Icons/Edit.png" width="50px"></a></div>';
        cell8.innerHTML = '<div><a href="http://189.112.135.139:9090/portal.cgi/PP_FILE_STORE/Sistema/novo_Upload_vinculo.html?ordem='+a_lista[i]._id+'" style="cursor: pointer; margin: 15px 0;" target="_blank"><img src="./Icons/novo_arquivo.png" width="50px"></a></div>';
      
        cell9.innerHTML = '<div onclick="reply_approve()" style="vertical-align: middle;cursor: pointer; margin: 15px 0;"><img id="oID_'+a_lista[i]._id+'" src="./Icons/envio_aprovacao.png" width="50px"></div>';
        cell11.innerHTML = '<div onclick="reply_open()" style="vertical-align: middle;cursor: pointer; margin: 15px 0;"><img id="oID_'+a_lista[i]._id+'" src="./Icons/folder.png" width="50px"></div>';

        qtasrow = qtasrow+1
      }
         }
        }


      </script>
     <script>
    var usuario = api.auth.get_current_user()
    var texto = "Bem vindo, "+usuario.fullname
    document.getElementById("bemvindo").innerText = texto
</script>
<script>
function reply_start()
{
    var linha = event.srcElement.id
    console.log(linha)
    var linha_2 = linha.split("_")
    console.log("A Linha 2 "+linha_2[1])
    //console.log(linha_2[1])
    var qualVinculo = api.custom_objects.list_with_options("BR-FINEP_Vinculos",["_id","equal to",linha_2[1]]).results[0]
    var temposNovos = qualVinculo.tempos

    if (temposNovos.length === 0){
      var prepress = {}
      prepress["etapa"] = "vinculo"
      prepress["start"] = new Date()
      prepress["finish"] = ""
      temposNovos.push(prepress)
      console.log("Tempos Novos "+temposNovos)
      api.custom_objects.set_keys("BR-FINEP_Vinculos",linha_2[1],{"tempos":temposNovos,"status":"2_em_execucao"})
      } else {
      if (temposNovos[temposNovos.length-1].finish != ""){
      console.log("Vou adicionar um tempo")
      var prepress = {}
      prepress["etapa"] = "vinculo"
      prepress["start"] = new Date()
      prepress["finish"] = ""
      temposNovos.push(prepress)
      api.custom_objects.set_keys("BR-FINEP_Vinculos",linha_2[1],{"tempos":temposNovos,"status":"2_em_execucao"})
      }


    }

    setTimeout(() => { preencheLista() }, 1000);

}
</script>
<script>
  function reply_pause()
  {
      var linha = event.srcElement.id
      console.log(linha)
      var linha_2 = linha.split("_")
      console.log("A Linha 2 "+linha_2[1])
      //console.log(linha_2[1])
      var qualVinculo = api.custom_objects.list_with_options("BR-FINEP_Vinculos",["_id","equal to",linha_2[1]]).results[0]
      var temposNovos = qualVinculo.tempos
      temposNovos[temposNovos.length-1].finish = new Date()
      
      api.custom_objects.set_keys("BR-FINEP_Vinculos",linha_2[1],{"tempos":temposNovos,"status":"3_em_pause"})
      
      setTimeout(() => { preencheLista() }, 1000);
  
  }
  </script>
  
<script>
  function reply_approve()
  {
  if (confirm("Confirmar envio Aprovacao?")) {
    
      var linha = event.srcElement.id
      //console.log(linha)
      var linha_2 = linha.split("_")
      //console.log("A Linha 2 "+linha_2[1])
      //console.log(linha_2[1])
      var qualVinculo = api.custom_objects.list_with_options("BR-FINEP_Vinculos",["_id","equal to",linha_2[1]]).results[0]
      var temposNovos = qualVinculo.tempos
      temposNovos[temposNovos.length-1].finish = new Date()
      var inicio_aprova = {}
      inicio_aprova["etapa"] = "aprova"
      inicio_aprova["start"] = new Date()
      inicio_aprova["finish"] = ""
      temposNovos.push(inicio_aprova)

      api.custom_objects.set_keys("BR-FINEP_Vinculos",linha_2[1],{"tempos":temposNovos,"status":"2_em_execucao"})
      api.hub.start_from_whitepaper_with_files_and_variables("BR-FINEP_Aprovacao_Vinculo_etapas","aprovacao_vinculo_etapas",[qualVinculo.fileinfo.folder_path+encodeURIComponent(qualVinculo.fileinfo.file_name)],{"oID":linha_2[1]})
    
      setTimeout(() => { preencheLista() }, 1000);
    }
}
  
  </script>


  
<script>
  function filtro() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("o_cliente");
  filter = input.value.toUpperCase();
  table = document.getElementById("dtBasicExample");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[3];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
</script>
<script>
  function filtro2() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("cod_Vinculo");
  filter = input.value.toUpperCase();
  table = document.getElementById("dtBasicExample");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[2];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
</script>
<script>
  function filtro3() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("a_descricao");
  filter = input.value.toUpperCase();
  table = document.getElementById("dtBasicExample");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[4];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
</script>
<script>
  function filtro4(){
    console.log(document.getElementById("o_status").value)
    var input, filter, table, tr, td, i, txtValue, color_OP;
  input = document.getElementById("o_status").value;
  if (input == "todos"){
    table = document.getElementById("dtBasicExample");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
    tr[i].style.display = "";
  }
  } else {
  
  filter = input;
  table = document.getElementById("dtBasicExample");
  tr = table.getElementsByTagName("tr");
  for (i = 1; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    //console.log(td.style.backgroundColor)
    if (td) {
      
      txtValue =  td.children[0].style.backgroundColor;
      if (txtValue.indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
         
  }
  
}
  }
  
</script>


    </body>

</html>
