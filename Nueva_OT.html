<!doctype html>
<html>
    <head>
      <title>Nueva OT</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
      <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/table.css">
      <link href="css/bootstrap4-toggle.min.css" rel="stylesheet">
    
        <meta name="viewport" content="width=944">
        <meta name="robots" content="noindex, follow">
	<link rel="Shortcut icon" href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/favicon.ico" type="image/x-icon">
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon.png" rel="apple-touch-icon" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-idecon-precomposed" sizes="72x72" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
        <link href="/portal.cgi/PP_FILE_STORE/Sistema/assets/img/icons/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
        <link rel="stylesheet" href="fonts/fontawesome-all.min.css">
        <link rel="stylesheet" href="fonts/font-awesome.min.css">
        <link rel="stylesheet" href="fonts/fontawesome5-overrides.min.css">
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        <link href="https://use.fontawesome.com/releases/v5.0.1/css/all.css" rel="stylesheet">
        <script src="js/jquery.min.js"></script>
        <!-- <script src="js/bootstrap.min.js"></script> -->
        <script src="js/jscolor.js"></script>
        <script src="js/html-duration-picker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/example-styles.css">
    <link rel="stylesheet" type="text/css" href="css/demo-styles.css">
        <style>
            .multi-select-button:after {
              margin-left: 7px;  
            }
        </style> 
       <script type="text/javascript" src="js/jquery-2.2.4.min.js"></script>
 
        <script src="/portal.cgi/PP_FILE_STORE/Sistema/assets/js/vendor/modernizr-2.6.2.min.js"></script>
      	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-1.8.3.min.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-ui-1.9.2.custom.js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.cookie.js'></script>
    	<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js'></script>
    <!-- portal.js -->
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-linedtextarea.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/codemirror.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/javascript.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.tmpl.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery-regex.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/sitemapstyler.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/date.format.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.iframe-transport.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.fileupload.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.notify.min.js'></script>
    <!-- portal.js --> <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.event.drag-2.2.js'></script>
        <script type='text/javascript' src='/portal.cgi?api=js'></script>
    	<script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/portal/js/nixps-portal-api.js'></script>
        <script type='text/javascript' src='/portal.cgi/PP_FILE_STORE/Sistema/3rdParty/jquery.i18n.js'></script>
         <script src="js/bootstrap4-toggle.js"></script>
    
        <script>
            var today = new Date();
        </script>
       
        <script>
           function logout () {
        	$.cookie('user_id','', { expires: -1, path: '/' });
        	$.cookie('user_hash','', { expires: -1, path: '/' });
        	$.cookie('expiration_date','', { expires: -1, path: '/' });
        	$.cookie('customer_id','', { expires: -1, path: '/' });
        	$.cookie('customer_name', '', { expires: -1 , path: '/' });
       		$.cookie('username', '', { expires: -1 , path: '/' });
        	$.cookie('scope', '', { expires: -1 , path: '/' });
        	window.location = 'http://cf2.bosisio.com.ar:9091/portal.cgi/PP_FILE_STORE/Public/Login/login.html';
    	  }
		

      </script>
  
    

    </head>


    <body>

  		<div class="wrapper d-flex align-items-stretch">
  			<nav id="sidebar">
  				<div class="p-4 pt-5">
            <img>
  		  		<img src="./logo//logo_bosisio.png" style="width: 90%; margin-bottom: 50px;">
             
                  <ul class="active components mb-5">
              <li style="list-style-type: none">
               <a href="ordenes_dash.html"><img src="./Icons/ticket_dg.png" width="30px" style="margin-right: 5px;">Dashboard OTs</a>
              </li>
             
               <li  class="active" style="list-style-type: none">
               <a href="Nueva_OT.html"><img src="./Icons/entrada_ticket.png" width="30px" style="margin-right: 5px;">Nueva OT</a>
              </li>
             
               <!--    <li  style="list-style-type: none">
               <a href="reuniao_dg_mg4.html"><img src="./Icons/liberado_reuniao.png" width="20px" style="margin-right: 5px;">Reunião DG</a>
              </li> --> 
                    </ul>
                
             
                    
       
   
  	        <div class="footer">
  	        	<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0.
  						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a>
  						   Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
  	        </div>
  	      </div>
      	</nav>

          <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5">

          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">

              <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
              </button>
              <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <i class="fa fa-bars"></i>
              </button>
              <div id="bemvindo" style="margin-left: 20px;"></div>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav ml-auto">
                  
                 
                  <li class="nav-item">
                      <a class="nav-link" href="cambiar_pwd.html" target="_Blank">Cambiar contraseña</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" onclick="logout()">Logout</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div>
    <div style="padding-left: 2%; padding-right: 2%;">         
    <div id="info_testform" class="form-group" style="display: inline-block;">
   
    <!-- Informacion Cliente -->
    
      <div id="view_pagina" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/clientes.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Informaciones del Cliente</strong></h5>
    
        <div  class="form-group " style="display:inline-block;  width: 49%;vertical-align: top;">
                <label for="cliente">Cliente<sup>*</sup></label>
                   <input type="text" class="form-control" id="cliente"  onchange="llena_perfiles()"  name="cliente" list="os_clientes">
                   <datalist id="os_clientes"></datalist>
                   <span class="error" id="error_cliente"></span>
                 </div>
                 
                <div  class="form-group " style="display:inline-block;  width: 48%;vertical-align: top;margin-left: 1%">
                <label for="impresor">Impresor<sup>*</sup></label>
                   <input type="text" class="form-control" id="impresor" onfocusout="llena_perfiles()" name="impresor" list="os_impresores">
                   <datalist id="os_impresores"></datalist>
                   <span class="error" id="error_cliente"></span>
                 </div>
                  
                 <div  class="form-group" style="display:inline-block; width: 25%; vertical-align: top;">
                <label for="tipo_ordem">Tipo Orden</label>
                   <select class="form-control" id="tipo_ordem" onchange="muda_tipoordem()" name="tipo_ordem">
                       <option value="">Seleccionar...</option>
                       <option value="Flexografia">Flexografia</option>
                       <option value="Huecograbado">Huecograbado</option>
                    </select>
                 </div>
                 
                
        
      
   
    <div  class="form-group" style="display:inline-block; width: 32%; vertical-align: top; margin-left: 1%">
                <label for="tipo_trabajo">Tipo Trabajo<sup>*</sup></label>
                   <select class="form-control" id="tipo_trabajo"  onchange="cambia_tipo_trabajo()" name="tipo_trabajo">
                       <option value="undefined">Seleccionar...</option>
                    </select>
                 </div>
    <div id="div_ordenanterior"  class="form-group" style="display:none; width: 25%; vertical-align: top; margin-left: 1%">
                <label for="orden_anterior">Orden Anterior<sup>*</sup></label>
                   <input type="text" class="form-control" id="orden_anterior" onfocusout="llena_datos_orden()" name="orden_anterior" list="ordenes_anteriores">
                      <datalist id="ordenes_anteriores"></datalist>
    </div>
    
       <div id="div_codigoanterior"  class="form-group" style="display:none; width: 19%; vertical-align: top; margin-left: 1%">
                <label for="codigo_anterior">Código SAP</label>
                   <input type="text" class="form-control" id="codigo_anterior" onfocusout="busca_codigo_anterior()" name="codigo_anterior">
                    <span class="error" id="error_codigo_anterior" style="color: red"></span>
    </div>
        </div>
   
   
   
   <!-- Informacion Trabajo -->
        
   <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/entrada_ticket.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Informaciones del Trabajo</strong></h5>
    
  
    <div  class="form-group" style="display:inline-block;  width: 58%; vertical-align: top;">
                <label for="nombre_producto">Nombre del Producto<sup>*</sup></label>
                   <input type="text" class="form-control" id="nombre_producto" onkeyup="this.value=this.value.replace(/[^a-zA-Z0-9,_ ]/g, '')" name="nombre_producto">
                 </div>
                 
            <div  class="form-group" style="display:inline-block;  width: 40%; vertical-align: top; margin-left: 1%;">
                <label for="codigo_producto">Código del Producto<sup>*</sup></label>
                   <input type="text" class="form-control" id="codigo_producto" onkeyup="this.value=this.value.replace(/[^a-zA-Z0-9,_- ]/g, '')" name="codigo_producto">
                 </div>
    <div  class="form-group" style="display:inline-block; width: 30%; vertical-align: top;">
                <label for="prioridad">Prioridades<sup>*</sup></label>
                   <select class="form-control" id="prioridad"  name="prioridad">
                       <option value="undefined">Seleccionar...</option>
                    </select>
                 </div>
                 <div  class="form-group demo-example" style="display:inline-block; width: 68%;margin-left: 1%">
               <label for="polimeros_con">Enviar Productos Con</label>
            <select class="form-control" id="polimeros_con"   name="polimeros_con" multiple>
                
                </select>
        </div>
            <div  class="form-group demo-example" style="display:inline-block; width: 99%;">
               <label for="producto">Producto</label>
            <select class="form-control" id="producto"   name="producto" multiple>
                
                </select>
        </div>
            <div  class="form-group demo-example" style="display:inline-block; width: 99%">
               <label for="requiere">Requiere</label>
            <select class="form-control" id="requiere"   name="requiere" multiple>
                
                </select>
        </div>
    </div>
    
        
        <!-- Datos Técnicos -->
        
        <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/premeet.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Datos Técnicos</strong></h5>
       
       
       
        
       
         <div  class="form-group" style="display:inline-block; width: 21%; vertical-align: top;">
    <label>Gama Expandida</label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="gama_expandida" onchange="es_gamaexpandida()"  id="gamaexpandida_si" value="Si">
        <label class="form-check-label" for="gamaexpandida_si">Si</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="gama_expandida" onchange="es_gamaexpandida()" id="gamaexpandida_no" value="No">
        <label class="form-check-label" for="gamaexpandida_no">No</label>
    </div>
    </div>
    
    <div id="div_gamaexpandida"  class="form-group" style="display:none; width: 25%; vertical-align: top; margin-left: 1%">
                <label for="color_gamaexpandida">Colores<sup>*</sup></label>
                   <select class="form-control" id="color_gamaexpandida" onchange="llena_nombre()" name="color_gamaexpandida">
                       <option value="undefined">Seleccionar...</option>
                       <option>CMYKO</option>
                       <option>CMYKOG</option>
                       <option>CMYKOGV</option>
                       <option>CMYKV</option>
                       <option>CMYKOV</option>
                       <option>CMYKG</option>
                       <option>CMYKGV</option>
                    </select>
    </div>
    
  
           <div id="div_perfil" class="form-group" style="display:inline-block; width: 50%; vertical-align: top;">
                <label for="informacion_impresion">Información Impresión<sup>*</sup></label>
                   <select class="form-control" id="informacion_impresion" onchange="llena_infoperfil()"  name="informacion_impresion">
                       <option value="undefined">Seleccionar...</option>
                    </select>
            </div>
            <br>
        <div id="div_nombreperfil" class="form-group" style="display:inline-block;  width: 98%; vertical-align: top;">
                <label for="nombre_perfil">Nombre Perfil</label>
                   <input type="text" class="form-control"  id="nombre_perfil" name="nombre_perfil" readonly>
                 </div>
        <div id="div_aviso" class="form-group" style="display:none;  width: 98%; vertical-align: top; background-color: red; color: yellow; text-align: center; font-size: 1.2em; padding-top:10px">
        <p><strong>No se permite editar perfiles en el curso de la orden. Sin embargo, los cambios realizados se van a grabar como una modificación del proceso standarizado del cliente. Apenas realize cambios si estás seguro que no tienen un impacto en la calidad del trabajo.
        </strong></p></div>
        <br>
         <div  class="form-group" style="display:inline-block;  width: 35%; vertical-align: top;">
                <label for="material">Material</label>
                   <input type="text" class="form-control" id="material" name="material" onfocusout="calcula_cambio_perfil()" readonly list="materialcliente">
                   <datalist id="materialcliente"></datalist>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 20%; vertical-align: top; margin-left: 1%">
                <label for="sentido">Sentido Impresión</label>
                   <input type="text" class="form-control" id="sentido" name="sentido" onfocusout="calcula_cambio_perfil()" readonly list="ladoimpcliente">
                   <datalist id="ladoimpcliente">
                       <option value="FRENTE"></option>
                       <option value="DORSO"></option>
                   </datalist>
                 </div>
                   <div  class="form-group" style="display:inline-block;  width: 24%; vertical-align: top; margin-left: 1%">
                <label for="maquina">Máquina</label>
                   <input type="text" class="form-control" id="maquina" name="maquina" onfocusout="calcula_cambio_perfil()" readonly list="maquinascliente">
                 <datalist id="maquinascliente"></datalist>
                 </div>
                   <div  class="form-group" style="display:inline-block;  width: 15%; vertical-align: top;margin-left: 1%">
                <label for="lineatura">Lineatura</label>
                   <input type="text" class="form-control" id="lineatura" name="lineatura" onfocusout="calcula_cambio_perfil()" readonly list="lineaturacliente">
                <datalist id="lineaturacliente"></datalist>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 18%; vertical-align: top;">
                <label for="fabricante_polimero">Fabricante Fotopolímero</label>
                   <input type="text" class="form-control" id="fabricante_polimero" name="fabricante_polimero" onfocusout="calcula_cambio_perfil()"  readonly list="fabricanetepolimetocliente">
                    <datalist id="fabricanetepolimetocliente">
                        <option value="KODAK"></option>
                        <option value="DUPONT"></option>
                        <option value="XSYS"></option>
                        <option value="MCDERMID"></option>
                    </datalist>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 16%; vertical-align: top;margin-left: 1%">
                <label for="espesor_polimero">Espesor Polímero</label>
                   <input type="text" class="form-control" id="espesor_polimero" name="espesor_polimero" onfocusout="calcula_cambio_perfil()" readonly list="espessorpolimetocliente">
                    <datalist id="espessorpolimetocliente">
                    </datalist>
                
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 21%; vertical-align: top;margin-left: 1%">
                <label for="fabricante_polimeroblanco">Fab. Polímero Blanco</label>
                   <input type="text" class="form-control" id="fabricante_polimeroblanco" name="fabricante_polimeroblanco" onfocusout="calcula_cambio_perfil()"  readonly list="fabricanetepolblancocliente">
                     <datalist id="fabricanetepolblancocliente">
                        <option value="KODAK"></option>
                        <option value="DUPONT"></option>
                        <option value="XSYS"></option>
                        <option value="MCDERMID"></option>
                     </datalist>
               
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 23%; vertical-align: top;margin-left: 1%">
                <label for="fabricante_polimerobarniz">Fab. Polímero Barniz</label>
                   <input type="text" class="form-control" id="fabricante_polimerobarniz" name="fabricante_polimerobarniz" onfocusout="calcula_cambio_perfil()" readonly list="fabricanetepolbarnizcliente">
                   <datalist id="fabricanetepolbarnizcliente">
                       <option value="KODAK"></option>
                        <option value="DUPONT"></option>
                        <option value="XSYS"></option>
                        <option value="MCDERMID"></option>
                   </datalist>
               
                 </div>
                 <div  id="div_lapis" class="form-group" style="display:none;  width: 13%;margin-left: 1%">
              <img src="./Icons/analiseespecificacao_on.png" width="30px" style="cursor: pointer; margin-top: 37px" onclick="edit_perfil()">
              
              </div>
       
       </div>  
        
        <!-- Informacion arte -->
        
            <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/infoarte.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Informaciones del Arte</strong></h5>
    
         <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <p><strong>Corte</strong></p>
         <div  class="form-group" style="display:inline-block;  width: 19%; margin-right: 1%;">
                <label for="medida_corte">Medidas</label>
                   <input type="text" class="form-control" id="medida_corte" name="medida_corte" onfocusout="calcula_total_corte()" onkeyup="this.value=this.value.replace(/[^0-9,.]/g, '')" >
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 19%; margin-right: 1%;">
                <label for="repeticion_corte">Repetición</label>
                   <input type="text" class="form-control" id="repeticion_corte" name="repeticion_corte" onfocusout="calcula_total_corte()"  onkeyup="this.value=this.value.replace(/[^0-9]/g, '')" >
                 </div>
                  <div  class="form-group" style="display:none;  width: 19%; margin-right: 1%;">
                <label for="marcas_corte">Marcas</label>
                   <input type="number" class="form-control" id="marcas_corte" name="marcas_corte" onfocusout="calcula_total_corte()"  onkeyup="this.value=this.value.replace(/[^0-9,]/g, '')" value="6" step="0.5">
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 19%; margin-right: 1%;">
                <label for="total_corte">Medida Total</label>
                   <input type="text" class="form-control" id="total_corte" name="total_corte" readonly>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 19%;margin-right: 1%; ">
                <label for="deformacionmedida_corte">Medidas Deformación</label>
                   <input type="text" class="form-control" id="deformacionmedida_corte" name="deformacionmedida_corte"  readonly>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 18%; ">
                <label for="deformacionfactor_corte">Factor Deformación</label>
                   <input type="number" class="form-control" id="deformacionfactor_corte" name="deformacionfactor_corte" onfocusout="calcula_total_corte()" value="1.000" step="0.001" >
                 </div>
        
        </div>
      
      
         <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
        <p><strong>Desarollo</strong></p>
         <div id="div_medidadesarollo" class="form-group" style="display:inline-block;  width: 19%; margin-right: 1%;">
                <label for="medida_desarollo">Medidas</label>
                   <input type="text" class="form-control" id="medida_desarollo" name="medida_desarollo" onfocusout="calcula_total_desarollo()"  onkeyup="this.value=this.value.replace(/[^0-9,.]/g, '')" >
                 </div>
                  <div id="div_repeticionesdesarollo" class="form-group" style="display:inline-block;  width: 19%;margin-right: 1%; ">
                <label for="repeticion_desarollo">Repeticiones</label>
                   <input type="text" class="form-control" id="repeticion_desarollo" name="repeticion_desarollo" onfocusout="calcula_total_desarollo()" onkeyup="this.value=this.value.replace(/[^0-9]/g, '')" >
                 </div>
                  <div id="div_separacion" class="form-group" style="display:none;  width: 12%;margin-right: 1%; ">
                <label for="separacion">Separación</label>
                   <input type="text" class="form-control" id="separacion" name="separacion" onfocusout="calcula_total_desarollo()" onkeyup="this.value=this.value.replace(/[^0-9]/g, '')" value="0" >
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 19%; margin-right: 1%;">
                <label for="total_desarollo">Medida Total L</label>
                   <input type="text" class="form-control" id="total_desarollo" name="total_desarollo"  readonly>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 19%; margin-right: 1%;">
                <label for="deformacionmedida_desarollo">Medidas Deformación</label>
                   <input type="number" class="form-control" id="deformacionmedida_desarollo" name="deformacionmedida_desarollo"   onfocusout="calcula_factor_hueco()" step="0.01" readonly>
                 </div>
                  <div  class="form-group" style="display:inline-block;  width: 18%; ">
                <label for="deformacionfactor_desarollo">Factor Deformación</label>
                   <input type="number" class="form-control" id="deformacionfactor_desarollo" name="deformacionfactor_desarollo"  onfocusout="calcula_total_desarollo()"  value="1.000000" step="0.0001">
                 </div>
        
        </div>
       
         <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-left: 1%">
          <div  class="form-group" style="display:inline-block;  width: 43%; vertical-align:top; margin-right: 1%"> 
          <p><strong>Dimensiones Fotocélula</strong></p>
          
          <div  class="form-group" style="display:inline-block;  width: 22%; vertical-align: top;">
                   <input type="checkbox" class="form-group" id="fotocelula_seaplica" name="fotocelula_seaplica" onchange="mostra_aplica()" checked >
                    <label for="fotocelula_seaplica">No se aplica</label>
               
        </div>
        <div id="div_dimensoes_taco" style="display: none; width: 77%;vertical-align: top;">
           <div  class="form-group" style="display:inline-block;  width: 49%; margin-right: 1%; ">
                <label for="ancho_fotocelula">Ancho</label>
                   <input type="text" class="form-control" id="ancho_fotocelula" name="ancho_fotocelula" onkeyup="this.value=this.value.replace(/[^0-9,.]/g, '')" >
                 </div>
          
           <div  class="form-group" style="display:inline-block;  width: 48%;">
                <label for="alto_fotocelula">Alto</label>
                   <input type="text" class="form-control" id="alto_fotocelula" name="alto_fotocelula" onkeyup="this.value=this.value.replace(/[^0-9,.]/g, '')" >
                 </div>
          
           <div  class="form-group" style="display:inline-block;  width:100%; vertical-align:top"> 
          <p><strong>Calado Fotocélulas</strong></p>
          <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"   id="fotocelula_caladotintas" value="fotocelula_caladotintas">
                  <label class="form-check-label" for="fotocelula_caladotintas">Tintas</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"  id="fotocelula_caladobarniz" value="fotocelula_caladobarniz">
                  <label class="form-check-label" for="fotocelula_caladobarniz">Barniz</label>
                </div>
          
          </div>
          <div  class="form-group" style="display:inline-block;  width: 48%;">
                <label for="color_calle">Color Calle</label>
                   <select  class="form-control" id="color_calle" name="color_calle" >
                       <option value="undefined">Seleccionar</option>
                       <option>Color de Fondo</option>
                       <option>Cristal</option>
                       <option>Sin Dato</option>
                       <option>Blanca</option>
                    </select>
                 </div>
          </div>
          </div>
      
         <div  class="form-group" style="display:inline-block;  width: 55%; vertical-align:top">
        <p><strong>Ubicación Fotocélula</strong></p>
        <div  class="form-group" style="display:inline-block;  width: 100%; ">
                   <input type="checkbox" class="form-group" id="fotocelula_segunplano" name="fotocelula_segunplano" onchange="mostra_fotocelula()" disabled>
                    <label for="fotocelula_segunplano">Según Plan Mecânico</label>
               
        </div>
                   <div id="mostra_fotocelula1" style ="width: 100%; display: none">
                    <div style="height: 50px; margin-left: 50px; display: inline-block;">
                        
                    
                        <div style="width: 20px;display: inline-block; cursor: pointer">
                            <span id="90ES" onclick="adiciona_fotocelula()" style="margin-top:5px;height:50px;width:20px;background-color:lightgray;display:inline-block">
                            </span>
                        </div>
                        <div style="width: 40px;display: inline-block;">
                        </div>
                        <div style="width: 20px;display: inline-block; ; cursor: pointer">
                            <span id="90CS" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:50px;width:20px;background-color:lightgray;display:inline-block">
                            </span>
                        </div>
                        <div style="width: 40px;display: inline-block;">
                        </div>
                         <div style="width: 20px;display: inline-block; ; cursor: pointer">
                            <span id="90DS" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:50px;width:20px;background-color:lightgray;display:inline-block">
                            </span>
                        </div>
                        <div style="width: 50px;display: inline-block;">
                        </div>
                </div>
            </div>
            <div id="mostra_fotocelula2" style="width: 100%;display: none">
            <div style ="width: 50px; height: 200px; display: inline-block;">
                <div style="width: 50px;display: inline-block; ; cursor: pointer">
                            <span id="0ES" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:20px;width:50px;background-color:lightgray;display:inline-block">
                            </span>
                </div>
                <div style="height 70px:width: 50px;display: inline-block;">
                    <span  style="margin-top:5px;height:50px;width:50px;background-color:#FAFAFA;display:inline-block">
                            </span>
                        </div>
               <div style="width: 50px;display: inline-block; ; cursor: pointer">
                            <span id="0EC" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:20px;width:50px;background-color:lightgray;display:inline-block">
                            </span>
                </div>
                <div style="height 70px:width: 50px;display: inline-block;">
                    <span  style="margin-top:5px;height:50px;width:50px;background-color:#FAFAFA;display:inline-block">
                            </span>
                        </div>
                <div style="width: 50px;display: inline-block;; cursor: pointer">
                            <span id="0EI" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:20px;width:50px;background-color:lightgray;display:inline-block">
                            </span>
                </div>
            </div>
            <div style ="width: 160px; height: 220px; display: inline-block; vertical-align: top;">
                <img src="./Icons/A.png" width="100%">
                </div>
            <div style ="width: 50px; height: 200px; display: inline-block;">
                <div style="width: 50px;display: inline-block;; cursor: pointer">
                            <span id="0DS" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:20px;width:50px;background-color:lightgray;display:inline-block">
                            </span>
                </div>
                <div style="height 70px:width: 50px;display: inline-block;">
                    <span  style="margin-top:5px;height:50px;width:50px;background-color:#FAFAFA;display:inline-block">
                            </span>
                        </div>
               <div style="width: 50px;display: inline-block;; cursor: pointer">
                            <span id="0DC" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:20px;width:50px;background-color:lightgray;display:inline-block">
                            </span>
                </div>
                <div style="height 70px:width: 50px;display: inline-block;">
                    <span  style="margin-top:5px;height:50px;width:50px;background-color:#FAFAFA;display:inline-block">
                            </span>
                        </div>
                <div style="width: 50px;display: inline-block;; cursor: pointer">
                            <span id="0DI" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:20px;width:50px;background-color:lightgray;display:inline-block">
                            </span>
                </div>
            </div>
            </div>
            <div id="mostra_fotocelula3" style="width: 100%;display: none">
                    <div style="height: 50px; margin-left: 50px; display: inline-block;">
                        
                    
                        <div style="width: 20px;display: inline-block;; cursor: pointer">
                            <span id="90EI" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:50px;width:20px;background-color:lightgray;display:inline-block">
                            </span>
                        </div>
                        <div style="width: 40px;display: inline-block;">
                        </div>
                        <div style="width: 20px;display: inline-block;; cursor: pointer">
                            <span id="90CI" onclick="adiciona_fotocelula()"  style="margin-top:5px;height:50px;width:20px;background-color:lightgray;display:inline-block">
                            </span>
                        </div>
                        <div style="width: 40px;display: inline-block;">
                        </div>
                         <div style="width: 20px;display: inline-block;; cursor: pointer">
                            <span id="90DI" onclick="adiciona_fotocelula()" q style="margin-top:5px;height:50px;width:20px;background-color:lightgray;display:inline-block">
                            </span>
                        </div>
                        <div style="width: 50px;display: inline-block;">
                        </div>
                </div>
            </div>
            
      
        </div>
          <div  class="form-group" style="display:inline-block;  width: 40%; vertical-align:top">
         </div>
       </div>
        
        
        <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
           
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 12%; margin-right: 1%">
        <p><strong>Pie de Imprenta</strong></p> 
        <label></label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_pieimprenta" onchange="existe_pieimprenta()"  id="pie_imprenta_si" value="Si">
        <label class="form-check-label" for="pie_imprenta_si">Si</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_pieimprenta" onchange="existe_pieimprenta()" id="pie_imprenta_no" value="No" checked>
        <label class="form-check-label" for="pie_imprenta_no">N/A</label>
    </div>
       </div>
    
        
      <div id="div_pie_imprenta" style="display: none; width: 86%">
         <div  class="form-group" style="display:inline-block;  width: 30%; vertical-align: top; margin-right: 1%">
          <p><strong>Dimensiones</strong></p>
           <div  class="form-group" style="display:inline-block;  width: 49%; vertical-align: top; margin-right: 1%">
                <label for="ancho_pie">Ancho</label>
                   <input type="text" class="form-control" id="ancho_pie" name="ancho_pie" onkeyup="this.value=this.value.replace(/[^0-9,.]/g, '')" >
                 </div>
          
           <div  class="form-group" style="display:inline-block;  width: 48%; ">
                <label for="alto_pie">Alto</label>
                   <input type="text" class="form-control" id="alto_pie" name="alto_pie" onkeyup="this.value=this.value.replace(/[^0-9,.]/g, '')" >
                 </div>
         </div>
         <div  class="form-group" style="display:inline-block;  width: 68%; vertical-align: top;">
          <p><strong>Información Pié de Imprenta</strong></p>
          
         
         <div  class="form-group" style="display:inline-block;  width: 35%; ">
                <label for="posicion_pie">Ubicación</label>
                   <input type="text" class="form-control" id="posicion_pie" name="posicion_pie" list="posicion_pie">
                       <datalist id="posicion_pie">
                       <option value="Fotocélula"></option>
                       <option value="Codigo de Barras"></option>
                       <option value="Fuelle (Doypack)"></option>
                    </datalist>
                 </div>
                <div  class="form-group" style="display:inline-block;  width: 63%; ">
                <label for="texto_pie">Texto</label>
                   <input type="text" class="form-control" id="texto_pie" name="texto_pie" onkeyup="this.value=this.value.toUpperCase()" >
                 </div>
        <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"  id="pie_caladotintas" value="pie_caladotintas">
                  <label class="form-check-label" for="pie_caladotintas">Calado Tintas</label>
        </div>
          </div>      
         </div> 
         
          </div>
       
       <div style="background-color: #FAFAFA;  width: 34%;display: inline-block; vertical-align: top; margin-right: 1%">
        <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
        <p><strong>Linea de Refile</strong></p>
          <div class="form-group" style="display:inline-block; vertical-align: top; width: 31%; margin-right: 1%">
        <label></label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_linerefile" onchange="existe_linearefile()"  id="linea_refile_si" value="Si">
        <label class="form-check-label" for="linea_refile_si">Si</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_linerefile" onchange="existe_linearefile()" id="linea_refile_no" value="No" checked>
        <label class="form-check-label" for="linea_refile_no">N/A</label>
    </div>
       </div>
        <div  id="div_anchopie" class="form-group" style="display:none;  width: 66%; ">
                <label for="ancho_linearefile">Ancho</label>
                   <input type="text" class="form-control" id="ancho_linearefile" name="ancho_linearefile" onkeyup="this.value=this.value.replace(/[^0-9, ]/g, '')" >
                 </div>
         <div id="div_ubicacionpie"  class="form-group" style="display:none;  width: 100%; ">
                <label for="posicion_linearefile">Ubicación</label>
                   <input type="text" class="form-control" id="posicion_linearefile" name="posicion_linearefile" onkeyup="this.value=this.value.toUpperCase()" >
         </div>
       
       </div>   
     </div>
        <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 64%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
        <p><strong>Código de Barras</strong></p>
           <div class="form-group" style="display:inline-block; vertical-align: top; width: 17%; margin-right: 1%">
        <label></label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_codigobarras" onchange="existe_codigobarras()"  id="codigo_barras_si" value="Si">
        <label class="form-check-label" for="codigo_barras_si">Si</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_codigobarras" onchange="existe_codigobarras()" id="codigo_barras_no" value="No" checked>
        <label class="form-check-label" for="codigo_barras_no">N/A</label>
    </div>
       </div>
        
        <div id="div_numerocodigo" class="form-group" style="display:none;  width: 46%; margin-right: 1%">
                <label for="numero_codigobarras">Número</label>
                   <input type="text" class="form-control" id="numero_codigobarras" name="numero_codigobarras" onkeyup="this.value=this.value.replace(/[^0-9 -]/g, '')" >
                 </div>
         <div id="div_magcodigo" class="form-group" style="display:none;  width: 32%; ">
                <label for="magnificacion_codigobarras">Magnificación (%)</label>
                   <input type="text" class="form-control" id="magnificacion_codigobarras" name="magnificacion_codigobarras" onkeyup="this.value=this.value.replace(/[^0-9.,]/g, '')" >
            </div>
         <div id="div_bwrcodigo"  class="form-group" style="display:none;  width: 21%; margin-right: 1%">
                <label for="bwr_codigobarras">BWR</label>
                   <input type="text" class="form-control" id="bwr_codigobarras" name="bwr_codigobarras" onkeyup="this.value=this.value.replace(/[^0-9.,]/g, '')" >
         </div>
        <div  id="div_caladocodigo" class="form-group" style="display:none;  width: 30%;">
                     <p><strong>Calado Código de Barras</strong></p>
                 <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"  id="codigobarras_caladotintas" value="codigobarras_caladotintas">
                  <label class="form-check-label" for="codigobarras_caladotintas">Tintas</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"   id="codigobarras_caladobarniz" value="codigobarras_caladobarniz">
                  <label class="form-check-label" for="codigobarras_caladobarniz">Barniz</label>
                </div>
                </div>
       
       </div>   
       
          <div style="background-color: #FAFAFA;  width: 100%;display: inline-block; vertical-align: top;">
         <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
        <p><strong>Textos Legales</strong></p>
        
         <div class="form-group" style="display:inline-block; vertical-align: top; width: 12%; margin-right: 1%">
        <label></label><br>
        <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_textolegal" onchange="existe_textolegal()"  id="textolegal_si" value="Si">
        <label class="form-check-label" for="textolegal_si">Si</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="existe_textolegal" onchange="existe_textolegal()" id="textolegal_no" value="No" checked>
        <label class="form-check-label" for="textolegal_no">N/A</label>
    </div>
       </div>
    <div id="div_textoslegales" style="display: none; width: 86%">
            <div  class="form-group" style="display:inline-block;  width: 19%; vertical-align: top; margin-right: 1%">
                <label for="senasa">SENASA</label>
                   <input type="text" class="form-control" id="senasa" name="senasa">
                 </div>
                 <div  class="form-group" style="display:inline-block;  width: 19%; vertical-align: top; margin-right: 1%">
                <label for="rne">R.N.E.</label>
                   <input type="text" class="form-control" id="rne" name="rne">
                 </div>
                 <div  class="form-group" style="display:inline-block;  width: 19%; vertical-align: top; margin-right: 1%">
                <label for="rnpa">R.N.P.A</label>
                   <input type="text" class="form-control" id="rnpa" name="rnpa">
                 </div>
                 <div  class="form-group" style="display:inline-block;  width: 19%; vertical-align: top; margin-right: 1%">
                <label for="rin">R.I.N.</label>
                   <input type="text" class="form-control" id="rin" name="rin">
                 </div>
                 <div  class="form-group" style="display:inline-block;  width: 18%; vertical-align: top;">
                <label for="pams">P.A.M.S.</label>
                   <input type="text" class="form-control" id="pams" name="pams">
                 </div>
        
        
        </div>
       
        </div>
        </div>
      
         
         <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 49%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 1%">
        <p><strong>Plano</strong></p>
        <div  class="form-group" style="display:inline-block;  width: 100%; ">
                <label for="codigo_plano">Código</label>
                   <input type="text" class="form-control" id="codigo_plano" name="codigo_plano">
                 </div>
        </div>  
         <div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 49%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">
        <p><strong>Sentido Impresión</strong></p>
        
        
          <div class="form-group" style="display:inline-block; vertical-align: top; width: 79%; margin-right: 2%"> 
        <div class="form-group" style="display:none; vertical-align: top; width: 47%; margin-right: 2%">
         <label for="referencia_arte">Referência</label>
            <select class="form-control"   id="referencia_arte" onchange="muda_figura()" name="referencia_arte">
            <option value="Código de Barras">Código de Barras</option>
            <option value="Gramagem">Gramagem</option>
            <option value="Logo" selected>Logo</option>
            <option value="Liso">Liso</option>
             </select> 
        </div>   
         <div class="form-group" style="display:none; vertical-align: top; width: 47%;">
         <label for="lado_fotocelula">Fotocélula</label>
            <select class="form-control"   id="lado_fotocelula" onchange="muda_figura()" name="lado_fotocelula">
            <option value="Direita">Direita</option>
            <option value="Dupla">Dupla</option>
            <option value="Esquerda">Esquerda</option>
            <option value="Sem Fotocélula" selected>Sem Fotocélula</option>
             </select> 
        </div>
            
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 47%;">
         <label for="lado_impressao">Lado</label>
            <select class="form-control"   id="lado_impressao" onchange="muda_figura()" name="lado_impressao">
            <option value="Externa">Externa</option>
            <option value="Interna">Interna</option>
             </select> 
        </div>
        
        <div class="form-group" style="display:inline-block; vertical-align: top; width: 47%; margin-right: 2%">
         <label for="sentido_impresion">Sentido</label>
            <select class="form-control"   id="sentido_impresion" onchange="muda_figura()" name="sentido_impresion">
            <option value="Cabeça">Arriba</option>
            <option value="Horizontal">Derecha</option>
            <option value="Horizontal Rotacionado">Izquierda</option>
            <option value="Pé">Abajo</option>
             </select> 
        </div>
        
       
        </div>
          <div class="form-group" style="display:inline-block; vertical-align: top; width: 14%;">
            <img src="./Icons/bob_puxada/Logo_Externa_Cabeça_Sem Fotocélula.png" style="width: 100%" id="img_puxada">
        </div>
      
       
        <div  class="form-group" style="display:none;  width: 70%; ">
                <label for="sentido_impresion2">Lado</label>
                   <select class="form-control" id="sentido_impresion2" onchange="cambiaimg_sentido()" name="sentido_impresion2">
                       <option>Abajo</option>
                       <option>Derecha</option>
                       <option>Arriba</option>
                       <option>Izquierda</option>
                    </select>
                 </div>
                 <div  class="form-group" style="display:none;  width: 29%; ">
                     <img id="img_sentido" src="./Icons/sentidoimpresion.png" width="40px">
                     </div>
        </div>  
        
        </div>
                   
           
           </div>
           </div>
          
         <!-- Colores Flexo -->   
            
             <div id="div_colores_flexo" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/tintas.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Colores</strong></h5>
                     
                 
                 
                      <div  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right:1%;">
                <p><strong>Info Color</strong></p> 
                 
                <input type="text" style="width: 3%; border: none; margin-rigth: 5px" id="acor" name="acor">
                 <div class="form-group" style="display:inline-block; width: 22%">
                <label for="nombre_tinta">Pantone</label>
                  <input type="text" class="form-control" id="nombre_tinta" name="nombre_tinta" onchange="seleciona_pantone()" list="as_cores">
                  <datalist id="as_cores"></datalist>
                 </div>
                  
               
               
                <div  class="form-group" style="display:inline-block; width: 16%; margin-left: 1%;">
                 <input type="checkbox" checked data-toggle="toggle" id="se_produce" data-on="Producir" data-off="No Producir" data-onstyle="success" data-offstyle="danger" data-width="150" data-height="30">
                </div> 
                
                
                <div class="form-group" style="display:none; width: 78%;">
                  <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"  onchange="existe_trama_solidos()" id="hay_tramasolidos" value="hay_tramasolidos">
                  <label class="form-check-label" for="hay_tramasolidos">Trama Sólidos</label>
                </div>
               </div>
               
               
               <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top;">
                 <label for="lineatura_flexo">Lineatura</label>
                  <input type="text" class="form-control" id="lineatura_flexo" name="lineatura_flexo">
                  <span class="error" id="error_lineatura_flexo" style="color: red"></span>
                 </div>
                 
                 <div class="form-group" style="display:inline-block; width: 14%; margin-left: 1%;vertical-align: top;">
                 <label for="angulo_flexo">Angulo</label>
                  <select class="form-control" id="angulo_flexo" name="angulo_flexo">
                  <option value="undefined">Seleccionar..</option>
                  <option>7.5</option>
                  <option>22.5</option>
                  <option>52.5</option>
                  <option>82.5</option>
                  </select>
                  
                 </div>
                 
                 
                  <div class="form-group" style="display:inline-block; width: 13%; margin-left: 1%;vertical-align: top;">
                 <label for="trama_flexo">Trama</label>
                  <select class="form-control" id="trama_flexo" name="trama_flexo">
                  <option value="undefined">Seleccionar..</option>
                  </select>
                  <span class="error" id="error_trama_flexo" style="color: red"></span>
                 </div>
                 
               
                    <div  class="form-group" style="display:inline-block; width: 11%; margin-left: 1%; vertical-align: top;">
                 <label for="trama_solidos_flexo">Trama Sólido</label>
                  <select class="form-control" id="trama_solidos_flexo" name="trama_solidos_flexo">
                  </select>
                  <span class="error" id="error_trama_solidos_flexo" style="color: red"></span>
                 </div>
                
                   <div id="div_valoresLAB" class="form-group" style="display:none; width: 100%; vertical-align: top;">
                 <i>Para ingresar una tinta que no está registrada en la base de datos, por favor ingrese con el valor LAB de la misma.</i><br>
                 <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top;">
                 <label for="valor_L">L</label>
                  <input type="text" class="form-control"  onfocusout="muda_cor()" id="valor_L" name="valor_L">
                 </div>
                 
                 <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top; margin-left: 1%">
                 <label for="valor_A">a</label>
                  <input type="text" class="form-control"  onfocusout="muda_cor()" id="valor_A" name="valor_A">
                 </div>
                 
                 <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top; margin-left: 1%">
                 <label for="valor_B">b</label>
                  <input type="text" class="form-control"  onfocusout="muda_cor()" id="valor_B" name="valor_B">
                 </div>
               
                 </div>
              
                </div>
            
               
              
               
                <div  class="form-group" style="display:inline-block; margin-right: 1%;">
                    <button id="btn-masinfotinta" class="btn btn-secondary" onclick="mostra_info_tinta()" style="cursor: pointer">Más Opciones</button>
                    <button id="btn-menosinfotinta" class="btn btn-secondary" onclick="mostra_info_tinta()" style="cursor: pointer; display: none">Menos Opciones</button>
                </div>
                 <div class="form-group" style="display:inline-block;margin-right: 1%;">
                 
                 <button class="btn btn-primary" onclick="adicionar_tinta_flexo()">Agregar Tinta</button>
                
                 </div>
                 <div class="form-group" style="display:inline-block; margin-right: 1%;">
                 <button class="btn btn-secondary" onclick="adicionar_cuerpo_libre()">Agregar Cuerpo Libre</button>
               </div>
               <div class="form-group" style="display:inline-block; margin-right: 1%;">
                 <button class="btn btn-secondary" style="background-color: blue;" onclick="adicionar_CMYK()">Agregar CMYK</button>
               </div>
               <div class="form-group" style="display:inline-block;margin-right: 1%;">
                 <button class="btn btn-secondary" style="background-color: orange;" onclick="adicionar_ogv()">Agregar OGV</button>
               </div>
            
                
               <div id="tramasolidos" style="display: none; width: 100%">
                </div>
                
                <div id="masinfotinta" style="display: none; width: 100%">
                <hr>
              
                 <div  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right:1%;">
                <p><strong>Info Placa</strong></p> 
                  <div class="form-group" style="display:inline-block; width: 22%; margin-right: 1%">
                 <label for="cantidad_planchas">Repeticiones</label>
                  <input type="number" class="form-control" id="cantidad_planchas" onkeyup="this.value=this.value.replace(/[^0-9]/g, '').toUpperCase()" value="1"> 
                 </div>  
                 <div class="form-group" style="display:inline-block; width: 22%; margin-right: 1%">
                 <label for="herramental">Herramental</label>
                  <input type="text" class="form-control" id="herramental"> 
                 </div> 
                  <div class="form-group" style="display:inline-block; width: 22%;">
                 <label for="armado">Armado</label>
                  <select class="form-control" id="armado" name="armado">
                  <option>A</option>
                  <option>AB</option>
                  <option>ABC</option>
                  <option>AC</option>
                  <option>B</option>
                  <option>BC</option>
                  <option>C</option>
                  </select>
                 </div>
                 </div>
                
               
                   <div  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
                <p><strong>Corte</strong></p> 
               <div class="form-group" style="display:inline-block; width: 24%; margin-right: 1%">
                 <label for="tipo_corte">Tipo de Corte</label>
                  <select class="form-control" id="tipo_corte" name="tipo_corte">
                  <option>Normal</option>
                  <option>Diferencial</option>
                  <option>Escalonado</option>
                  <option>Sinusoidal</option>
                  </select>
                 </div>
               <div class="form-group" style="display:inline-block; width: width: 24%; margin-right: 1%">  
                 <div class="form-check form-check-inline">
                  <input class="form-check-input"  type="checkbox"  id="desplazado" value="desplazado">
                  <label class="form-check-label" for="desplazado">Desplazado</label>
                </div>
               </div>
               <div class="form-group" style="display:inline-block; width: 24%; margin-right: 1%;">
                 <label for="corte_especial">Corte Especial</label>
                  <input type="text" class="form-control" id="corte_especial"> 
                 </div> 
                 <div class="form-group" style="display:inline-block; width: 23%;">
                 <label for="desarollo_especial">Desarollo Especial</label>
                  <input type="text" class="form-control" id="desarollo_especial"> 
                 </div> 
               
               </div>
                    
                    
                </div>
      
                <br>
               
              
                 
                 
                
                 
                 
                 
           
      <div  id="error_tinta" class="form-group col-md-11"></div>    
 
    <div id="altera_tinta" style="display: none">99</div>
          
       </div>
     
          <!-- Tabla Colores Flexo -->   
     
         
         <div id="div_lista_flexo" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/novasequencia.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Listado Colores</strong></h5>
         
       
          <table id="tabela_receitas_flexo" class="table custom_table" cellspacing="0" width="100%" style="display: inline-block">
          <thead>
            <tr>
            
            
              <th class="col" style="width: 20%; text-align: left; font-size: 0.8em; vertical-align: top;">Color
              </th>
              <th class="col" style="width: 7.5%; font-size: 0.8em; vertical-align: top;">Lineatura
              </th>
              <th class="col" style="width: 7.5%; font-size: 0.8em; vertical-align: top;">Trama
              </th>
              <th class="col" style="width: 7.5%; font-size: 0.8em; vertical-align: top;">Ángulo
              </th>
              <th class="col" style="width: 5%; font-size: 0.8em; vertical-align: top;">Prod.
              </th>
              <th class="col" style="width: 7.5%; font-size: 0.8em; vertical-align: top;">Armado
              </th>
              <th class="col" style="width: 9%; font-size: 0.8em; vertical-align: top;">Trama Sólido
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: top;">C.B.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna()" id="col-codigo_barras">
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: top;">P.I.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna()" id="col-pie_imprenta">
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: top;">F.C.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna()" id="col-fotocelula">
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: top;">L.R.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna()" id="col-linea_refile">
              </th>
              <th class="col" style="width: 8%; font-size: 0.8em; vertical-align: top;">Rep.
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: top;">
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: bottom;"><img src="./Icons/edit.png" style="width: 30px; cursor: pointer" onclick="editar_todastintas()">
              </th>
              <th class="col" style="width: 4%; font-size: 0.8em; vertical-align: top;">
              </th>
           
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        

                
         </div>       
    
             <!-- Colores Hueco -->   

        <div id="div_colores_hueco" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/tintas.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Colores</strong></h5>
                     
                 
                <input type="text" style="width: 3%; border: none; margin-right: 5px" id="acor2" name="acor2">
                 <div class="form-group" style="display:inline-block; width: 25%; margin-right: 1%;">
                <label for="nombre_tinta2">Pantone</label>
                  <input type="text" class="form-control" id="nombre_tinta2" name="nombre_tinta2" onchange="seleciona_pantone2()" list="as_cores2">
                  <datalist id="as_cores2"></datalist>
                 </div>
                 <div class="form-group" style="display:none; width: 19%; margin-right: 1%;">
                 <label for="alma">N<sup>o</sup> Alma</label>
                  <input type="text" class="form-control" id="alma"> 
                 </div>
                  <div class="form-group" style="display:none; width: 16%; margin-right: 1%;">
                 <label for="tabla">Tabla</label>
                  <input type="text" class="form-control" id="tabla"> 
                 </div>  
                  <div class="form-group" style="display:inline-block; width: 17%; margin-right: 1%;">
                 <label for="diametro">Diâmetro</label>
                  <input type="number" class="form-control" id="diametro" step="0.01"> 
                 </div>  
                 <div class="form-group" style="display:inline-block; width: 18%;">
                 <label for="distorcion">Distorción</label>
                  <input type="text" class="form-control" id="distorcion"> 
                 </div>  
                 
               
                
                
                
                      <div id="div_valoresLAB2" class="form-group" style="display:none; width: 100%; vertical-align: top;">
                 <i>Para ingresar una tinta que no está registrada en la base de datos, por favor ingrese con el valor LAB de la misma.</i><br>
                 <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top;">
                 <label for="valor_L2">L</label>
                  <input type="text" class="form-control"  onfocusout="muda_cor2()" id="valor_L2" name="valor_L">
                 </div>
                 
                 <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top; margin-left: 1%">
                 <label for="valor_A2">a</label>
                  <input type="text" class="form-control"  onfocusout="muda_cor2()" id="valor_A2" name="valor_A">
                 </div>
                 
                 <div class="form-group" style="display:inline-block; width: 13%; vertical-align: top; margin-left: 1%">
                 <label for="valor_B2">b</label>
                  <input type="text" class="form-control"  onfocusout="muda_cor2()" id="valor_B2" name="valor_B2">
                 </div>
               
                 </div>
            
               
                   
                  <div class="form-group" style="display:inline-block; width: 19%; margin-right: 1%;">
                 <label for="herciline">Herciline</label>
                  <input type="text" class="form-control" id="herciline"> 
                 </div> 
                 <div class="form-group" style="display:inline-block; width: 19%; margin-right: 1%;">
                 <label for="tipo_grabacion">Tipo Grabación</label>
                  <select class="form-control" id="tipo_grabacion">
                      <option value="">Seleccionar...</option>
                      <option>Electrônico</option>
                      <option>Laser</option>
                      </select>
                 </div>
                 <div class="form-group" style="display:none; width: 19%; margin-right: 1%;">
                 <label for="en_planta">En Planta</label>
                  <select class="form-control" id="en_planta">
                      <option value="undefined">Seleccionar...</option>
                      <option>Si</option>
                      <option>No</option>
                      </select>
                 </div>
                <div class="form-group" style="display:none; width: 18%;">
                 <label for="tabla_2">Tabla 2</label>
                  <input type="text" class="form-control" id="tabla_2"> 
                 </div> 
                 
                 <div  class="form-group" style="display:inline-block; width: 13%; margin-left: 1%;">
                 <input type="checkbox" checked data-toggle="toggle" id="se_produce2" data-on="Producir" data-off="No Producir" data-onstyle="success" data-offstyle="danger" data-width="150" data-height="30">
                </div> 
                 <div class="form-group" style="display:inline-block; width: 100%;">
                 <label for="observaciones_cilindro">Observaciones</label>
                  <textarea class="form-control" id="observaciones_cilindro" rows="2"></textarea> 
                 </div> 
              
               
                
               

        
                <br>
               
                 <div class="form-group" style="display:inline-block; margin-top: 20px; margin-right: 1%;">
                 
                 <button class="btn btn-primary" onclick="adicionar_tinta_hueco()">Agregar Tinta</button>
                
                 </div>
                 <div class="form-group" style="display:inline-block; margin-right: 1%;">
                 <button class="btn btn-secondary" onclick="adicionar_cuerpo_libre2()">Agregar Cuerpo Libre</button>
               </div>
               <div class="form-group" style="display:inline-block; margin-right: 1%;">
                 <button class="btn btn-secondary" style="background-color: blue;" onclick="adicionar_CMYK2()">Agregar CMYK</button>
               </div>
               <div class="form-group" style="display:inline-block; margin-right: 1%;">
                 <button class="btn btn-secondary" style="background-color: orange;" onclick="adicionar_ogv2()">Agregar OGV</button>
               </div>
            
                 
                 
                
                 
                 
                 
           
      <div  id="error_tinta" class="form-group col-md-11"></div>    
 
    <div id="altera_tinta" style="display: none">99</div>
          
       </div>
     
                
                 
                 
                 
           <!-- Tabla Colores Hueco -->   
     
          
         <div id="div_lista_hueco" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/novasequencia.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Listado Colores</strong></h5>
                 
          <table id="tabela_receitas_hueco" class="table custom_table" cellspacing="0" width="100%" style="display: inline-block">
          <thead>
            <tr>
            
            
              <th class="col" style="width: 29%; text-align: left; vertical-align: top;">Color
              </th>
              <th class="col" style="width: 10%;; vertical-align: top;">Tabla
              </th>
              <th class="col" style="width: 10%;; vertical-align: top;">Diâmetro
              </th>
              <th class="col" style="width: 10%;; vertical-align: top;">Distorción
              </th>
              <th class="col" style="width: 4%;; vertical-align: top;">Prod
              </th>
               <th class="col" style="width: 4%">F.C.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna2()" id="col2-fotocelula">
              </th>
              <th class="col" style="width: 4%">P.I.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna2()" id="col2-pie_imprenta">
              </th>
              <th class="col" style="width: 4%">C.B.<br><input type="checkbox"  class="form-control" onchange="selecciona_columna2()" id="col2-codigo_barras">
              </th>
              <th class="col" style="width: 13%;; vertical-align: top;">Tipo
              </th>
               <th class="col" style="width: 4%">
                </th>
                <th class="col" style="width: 4%; vertical-align: bottom;"><img src="./Icons/edit.png" style="width: 30px; cursor: pointer" onclick="editar_todastintas2()">
                </th>
                <th class="col" style="width: 4%">
                </th>
           
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        

                
         </div>       
           
          
           <div  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/pregravacao_on.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Indicaciones</strong></h5>
      
      
        <div  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h6>Nueva Indicación</h6>
      
                <div class="form-group" style="display:inline-block; width: 25%; margin-right: 1%; vertical-align: top;">
                 <label for="depto_indicaciones">Depto</label>
                  <select class="form-control" id="depto_indicaciones" name="depto_indicaciones">
                  <option value="undefined">Seleccionar..</option>
                  <option>Soporte</option>
                  <option>Programación</option>
                  <option>Preprensa</option>
                  <option>Calidad</option>
                  <option>Grabación</option>
                  <option>General</option>
                  <option>Facturación</option>
                  

                  </select>
                 </div>
                 <div class="form-group" style="display:inline-block; width: 73%; ">
                 <label for="indicacion">Indicación</label><br>
                  <textarea class="form-control" id="indicacion" name="indicacion"  style="display: inline-block; width:90%; vertical-align: middle" rows="2"></textarea>
                  <span><img src="./Icons/icone_mais.png" width="40px" style="cursor: pointer;" onclick="adiciona_indicacion()"></span>
                 </div>
      
      </div>
      <div id="div_colores_hueco" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h6>Listado de Indicaciones</h6>
      
         <table id="tabela_indicaciones" class="table custom_table" cellspacing="0" width="100%" style="display: inline-block">
          <thead>
            <tr>
            
            
              <th class="col" style="width: 15%; text-align: left;">Fecha Creación
              </th>
              <th class="col" style="width: 15%; text-align: left;">Creado por
              </th>
              <th class="col" style="width: 15%">Depto
              </th>
              <th class="col" style="width: 45%">Indicación
              </th>
              <th class="col" style="width: 5%">Editar
              </th>
              <th class="col" style="width: 5%">Borrar
              </th>
              
           
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
       
      
      </div>
      
      </div>   
            
             
         
             <div  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/uploadedownload.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Trabajos Nuevos</strong></h5>
         <div class="form-group" style="display:inline-block; width: 40%; margin-right: 1%">
                 <label for="carpeta_trabajo">Seleccionar Carpeta del Trabajo</label>
                  <select class="form-control" id="carpeta_trabajo" onchange="select_folder()" name="carpeta_trabajo">
                  <option value="undefined">Seleccionar..</option>
                  
                  </select>
                 </div>
            
               
      
       <div id="div_asignararchivos"  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: none; padding: 20px; vertical-align: top;margin-bottom: 30px;">
    <p><strong>Asignar Archivos</strong></p><br>
    <div id="div_tabela_pastas" style="width: 25%; display: inline-block">
              <table id="tabela_pastas" class="table custom-table" style="display: inline-block; min-width: 200px; vertical-align: top;">
          <thead>
            <tr>
             
             
              
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:90%;vertical-align: top; text-align: left;">
              </th>
               
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
  
        
    </div>
    
    <div id="div_tabela_subpastas" style="width: 70%; display: inline-block">
              <table id="tabela_subpastas" class="table custom-table" style="display: inline-block; min-width: 200px; vertical-align: top;">
          <thead>
            <tr>
             
             
             
              <th class="th-sm" style="width:5%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:60%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:5%;vertical-align: top; text-align: left;">Arte
              </th>
               <th class="th-sm" style="width:5%;vertical-align: top; text-align: left;">Plano
              </th>
               <th class="th-sm" style="width:5%;vertical-align: top; text-align: left;">E.T.
              </th>
               
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
  
        
    </div>
    
    
   
        
    </div>
   
      <div  id="div_arte" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 32%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 1%">
        <h5 style="margin-top: -9px;"><img src="./Icons/uploadedownload.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Arte</strong></h5>
        
        
        <div style="width: 100%; display: flex; justify-content:center">
        <img id="preview_arte" src="" style="max-height: 400px; max-width: 100%">
        </div>
      
        <div style="margin: auto; text-align: center;"><strong id="div_filename" style="text-align: center;"></strong></div>
        
        </div>
     
      <div  id="div_plano" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 32%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 1%">
        <h5 style="margin-top: -9px;"><img src="./Icons/uploadedownload.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Plano</strong></h5>
        
        
        <div style="width: 100%; display: flex; justify-content:center">
        <img id="preview_plano" src="" style="max-height: 400px;  max-width: 100%">
        </div>
      
        <div style="margin: auto; text-align: center;"><strong id="div_filename2" style="text-align: center;"></strong></div>
        
        </div>
     
     
      <div  id="div_pedido" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 31%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px;">
        <h5 style="margin-top: -9px;"><img src="./Icons/uploadedownload.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Pedido</strong></h5>
        
        
        <div style="width: 100%; display: flex; justify-content:center">
        <img id="preview_pedido" src="" style="max-height: 400px; max-width: 100%">
        </div>
      
        <div style="margin: auto; text-align: center;"><strong id="div_filename3" style="text-align: center;"></strong></div>
        
        </div>
     
      
      </div>
      
      
     <div id="div_mostrareferencia" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px">
        <h5 style="margin-top: -9px;"><img src="./Icons/uploadedownload.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Archivos Referência</strong></h5>
         
            
               
      
       <div id="div_asignararchivosref"  style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top;margin-bottom: 30px;">
    <p><strong>Carpeta Trabajo</strong></p><br>
   <div class="form-group" style="display:none; width: 40%; margin-right: 1%">
                 <label for="carpeta_trabajoref">Seleccionar Carpeta del Trabajo</label>
                  <select class="form-control" id="carpeta_trabajoref" onchange="select_folder()" name="carpeta_trabajo">
                  <option value="undefined">Seleccionar..</option>
                  
                  </select>
                 </div>
   
   
    <div  style="width: 25%; display: inline-block">
   
   
              <table id="tabela_pastasref" class="table custom-table" style="display: inline-block; min-width: 200px; vertical-align: top;">
          <thead>
            <tr>
             
             
              
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:90%;vertical-align: top; text-align: left;">
              </th>
               
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
  
        
    </div>
    
    <div  style="width: 70%; display: inline-block">
              <table id="tabela_subpastasref" class="table custom-table" style="display: inline-block; min-width: 200px; vertical-align: top;">
          <thead>
            <tr>
             
             
             
              <th class="th-sm" style="width:10%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:80%;vertical-align: top;">
              </th>
              <th class="th-sm" style="width:1%;vertical-align: top; text-align: left;">Referência
              </th>
              
               
              
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
  
        
    </div>
    
    
   
        
    </div>
   
      <div  id="div_arteref" style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 32%;display: none; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 1%">
        <h5 style="margin-top: -9px;"><img src="./Icons/uploadedownload.png" width="30px" style="display: inline-block; margin-right: 5px"><strong>Arte Referência</strong></h5>
        
        
        <div style="width: 100%; display: flex; justify-content:center">
        <img id="preview_arteref" src="" style="max-height: 400px; max-width: 100%">
        </div>
      
        <div style="margin: auto; text-align: center;"><strong id="div_filenameref" style="text-align: center;"></strong></div>
        
        </div>
     
     
     
     
      
      </div>
                    
                   
                <div id="mensagem_alteracao" style="background-color: green; heigth: 100px; width: 100%; font-size: 3em; color: white; display: none; text-align: center;">BLOQUEAR O ITEM NO SAP!!</div>
             <hr>
                     <div id="mostra_botao_salvar" class="form-group" style="display: inline-block; width: 100%;">
                    
                       <div  class="form-group" style="display:inline-block; width: 22%; vertical-align: baseline; margin-right: 2%">
                <label for="liberado_preprensa">Liberado Preprensa</label>
                   <input class="form-control" id="liberado_preprensa" style="background-color: red; color: white; text-align: center; cursor:pointer;"  onclick="liberar_preprensa()" name="liberado_preprensa" readonly value="No">
                      
                 </div>
                  <div  class="form-group" style="display:inline-block; vertical-align: baseline; margin-right: 2%">
                 <button id="button_nuevaorden" class="btn btn-primary" style="cursor: pointer" onclick="verifica_campos()" >Generar Nueva Orden de Trabajo</button>
                  </div>
                  <div  class="form-group" style="display:inline-block; vertical-align: baseline; margin-right: 2%">
                      <button class="btn btn-primary" style="cursor: pointer" onclick="verifica_campos('duplicar')" >Grabar y Duplicar Datos</button>
                 
                     </div>
                       </div>
                  <div id="msg_ot" style="color: green"></div>
                </div>
                
              
         
        
         
       <br>
     
               
         </div>     
            </div>
        
       
  	
  		
<!-- <script src="js/popper.js"></script> -->
  <script src="js/main.js"></script>	
  		<script>
  		    // variables globales
  		    
  		    var indicaciones = []
  		    var arteselec = []
  		    var pedidoselec = []
  		    var plantaselec = []
  		</script>
  	<script>
  	    // funcoes de apoio
  	    
  	  var usuario = api.auth.get_current_user()
  	    
  	   document.getElementById("bemvindo").innerText = "bien venido, "+usuario.fullname
  	    
              function clearTable(table) {
          var rows = table.rows;
          var i = rows.length;
          while (--i) {
            rows[i].parentNode.removeChild(rows[i]);
            // or
            // table.deleteRow(i);
          }
        }
        
        function onlyUnique(value, index, self) {
          return self.indexOf(value) === index;
        }

function cmyk2rgb(c, m, y, k, normalized){
    c = (c / 100);
    m = (m / 100);
    y = (y / 100);
    k = (k / 100);
    
    c = c * (1 - k) + k;
    m = m * (1 - k) + k;
    y = y * (1 - k) + k;
    
    var r = 1 - c;
    var g = 1 - m;
    var b = 1 - y;
    
    if(!normalized){
        r = Math.round(255 * r);
        g = Math.round(255 * g);
        b = Math.round(255 * b);
    }
    
    return {
        r: r,
        g: g,
        b: b
    }
}

function rgb2cmyk(r, g, b, normalized){
    var c = 1 - (r / 255);
    var m = 1 - (g / 255);
    var y = 1 - (b / 255);
    var k = Math.min(c, Math.min(m, y));
    
    c = (c - k) / (1 - k);
    m = (m - k) / (1 - k);
    y = (y - k) / (1 - k);
    
    if(!normalized){
        c = Math.round(c * 10000) / 100;
        m = Math.round(m * 10000) / 100;
        y = Math.round(y * 10000) / 100;
        k = Math.round(k * 10000) / 100;
    }
    
    c = isNaN(c) ? 0 : c;
    m = isNaN(m) ? 0 : m;
    y = isNaN(y) ? 0 : y;
    k = isNaN(k) ? 0 : k;
    
    return {
        c: c,
        m: m,
        y: y,
        k: k
    }
}



function msToTime(s) {
  var ms = s % 1000;
  s = (s - ms) / 1000;
  var secs = s % 60;
  s = (s - secs) / 60;
  var mins = s % 60;
  var hrs = (s - mins) / 60;

  return hrs + ':' + mins + ':' + secs + '.' + ms;
}

function componentToHex(c) {
  var hex = c.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}



 function array_move(arr, old_index, new_index) {
    if (new_index >= arr.length) {
        var k = new_index - arr.length + 1;
        while (k--) {
            arr.push(undefined);
        }
    }
    arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);
    return arr; // for testing
};


function findMissingNumbers(arr) { var missingNumbers = []; 
                                    var min = 1; var max = Math.max(...arr); 
                                    for (var i = min; i <= max; i++) {
                                        if (!arr.includes(i)) {missingNumbers.push(i);
                                            
                                        }
                                        
                                    } return missingNumbers; 
    
}


// preenche dados se existe ordem

if (usuario.scope_name != undefined){
    var nome_scope = usuario.scope_name[0].split("_")
   
}




// preenche Selects

var infoForm = api.custom_objects.list("AR-BOSIS_formulario").results[0]






var selectTipoTrabajo = document.getElementById("tipo_trabajo")
var tipo_de_trabajo = infoForm.tipo_trabajo.sort()
for (var i = 0; i<tipo_de_trabajo.length; i++){
        var opt = document.createElement('option');
        opt.value = tipo_de_trabajo[i];
        opt.innerHTML = tipo_de_trabajo[i];
        selectTipoTrabajo.appendChild(opt);
    }
    
    var selectPrioridad = document.getElementById("prioridad")
for (var i = 0; i<infoForm.prioridad.length; i++){
        var opt = document.createElement('option');
        opt.value = infoForm.prioridad[i];
        opt.innerHTML = infoForm.prioridad[i];
        selectPrioridad.appendChild(opt);
    }
    
   var selectTrama = document.getElementById("trama_flexo")
   
for (var i = 0; i<infoForm.tramas.length; i++){
        var opt = document.createElement('option');
        opt.value = infoForm.tramas[i];
        opt.innerHTML = infoForm.tramas[i];
        selectTrama.appendChild(opt);
    }
    
    
    
     var selectTramaSolido = document.getElementById("trama_solidos_flexo")
   
for (var i = 0; i<infoForm.tramas_solidos.length; i++){
        var opt = document.createElement('option');
        opt.value = infoForm.tramas_solidos[i];
        opt.innerHTML = infoForm.tramas_solidos[i];
        selectTramaSolido.appendChild(opt);
    }
    
    
   // var selectCodigoFacturacion = document.getElementById("codigo_facturacion")
   
//for (var i = 0; i<infoForm.codigo_faturacion.length; i++){
  //      var opt = document.createElement('option');
    //    opt.value = infoForm.codigo_faturacion[i];
     //   opt.innerHTML = infoForm.codigo_faturacion[i];
      //  selectCodigoFacturacion.appendChild(opt);
//    }
    
     var selectPolimeroCon = document.getElementById("polimeros_con")
   
    
    for (i=0;i<infoForm.polimero_con.length;i++){
      var opt = document.createElement('option');
        opt.value = infoForm.polimero_con[i];
        opt.innerHTML = infoForm.polimero_con[i];
        selectPolimeroCon.appendChild(opt);
   }
    
    
     var selectProducto = document.getElementById("producto")
    
   
   for (i=0;i<infoForm.producto.length;i++){
     var opt = document.createElement('option');
        opt.value = infoForm.producto[i];
        opt.innerHTML = infoForm.producto[i];
        selectProducto.appendChild(opt);
   }
    
    
   var selectRequiere = document.getElementById("requiere")
   
   for (i=0;i<infoForm.requiere.length;i++){
      var opt = document.createElement('option');
        opt.value = infoForm.requiere[i];
        opt.innerHTML = infoForm.requiere[i];
        selectRequiere.appendChild(opt);
   }
   
   
  var trabajos_nuevos = api.folder.list_with_options(["cloudflow.enclosing_folder","equal to","cloudflow://Trabajo_Nuevo/"],["name","ascending"],["cloudflow","name","subfolders"]).results
 
   var selectCarpetas = document.getElementById("carpeta_trabajo")
   
   for (i=0;i<trabajos_nuevos.length;i++){
      var opt = document.createElement('option');
        opt.value = trabajos_nuevos[i]._id;
        opt.innerHTML = trabajos_nuevos[i].name;
        selectCarpetas.appendChild(opt);
   }
    
 
    
    // preenche Datalist
    
         
    var as_tintas = api.custom_objects.list("PantoneColor").results
        
        
         var options=''; // variable to store the options
        for(var i = 0; i < as_tintas.length; i++){
            
        options += '<option value="'+as_tintas[i].nome+'" />';

        }
         document.getElementById('as_cores').innerHTML = options;
         document.getElementById('as_cores2').innerHTML = options;
         
         
  var los_clientes = api.custom_objects.list_with_options("AR-BOSISIO_clientes",[],["DENOMINACION","ascending"],["DENOMINACION"]).results
        
        
         var options=''; // variable to store the options
        for(var i = 0; i < los_clientes.length; i++){
            
        options += '<option value="'+los_clientes[i].DENOMINACION+'" />';

        }
         document.getElementById('os_clientes').innerHTML = options;
          document.getElementById('os_impresores').innerHTML = options;


// preenche  checklists

   
   
   
   
   
   
   
   
    
         
         
         
// preenche data de hoje

var hoje = new Date()

  	</script>
  	

  <script>
      function cambiaimg_sentido(){
          
          var ladoimpreso = document.getElementById("sentido_impresion").value
          
          if (ladoimpreso === "Arriba"){
              document.getElementById("img_sentido").style.transform = "rotate(180deg)"
          }
          if (ladoimpreso === "Abajo"){
              
              document.getElementById("img_sentido").style.transform = "rotate(0deg)"
          }
          if (ladoimpreso === "Izquierda"){
              document.getElementById("img_sentido").style.transform = "rotate(90deg)"
          }
          if (ladoimpreso === "Derecha"){
              document.getElementById("img_sentido").style.transform = "rotate(-90deg)"
          }
      }
  </script>	
  	
  	
  	
   <script>
       function salva_ticket(){
           var data = {}
            data["tipo_trabalho"] = document.getElementById("tipo_trabalho").value
            data["criado_em"] = new Date()
            data["criado_por"] = usuario
            var info_arte = {}
            info_arte["codigo"] = document.getElementById("codigo_arte").value
            info_arte["revisao"] = document.getElementById("arte_revisao").value
            info_arte["evolucao"] = document.getElementById("arte_evolucao").value
            data["info_arte"] = info_arte
            data["cliente"] = document.getElementById("cliente").value
            data["responsavel_comercial"] = document.getElementById("responsavel_comercial").value
            data["descricao"] = document.getElementById("descricao").value
            data["item"] = document.getElementById("item").value
            data["item_referencia"] = document.getElementById("item_referencia").value
            data["priorizado"] = false
            data["arte_iniciado"] = false
            data["arte_finalizado"] = false
            data["ticket_dg"] = document.getElementById("numero_ticket").value
            var info_checklist = {}
            info_checklist["Arte OK"] = document.getElementById("Arte OK").checked
            info_checklist["Referencia de Cor"] = document.getElementById("Referencia de Cor").checked
            info_checklist["Especificacao"] = document.getElementById("Especificacao").checked
            data["checklist_entrada"] = info_checklist
            console.log(data)
            var info_observa = {}
            info_observa["quem"] = usuario
            info_observa["quando"] = new Date()
            info_observa["texto"] = document.getElementById("observacoes").value
            var as_observacoes = []
            as_observacoes.push(info_observa)
            data["observacoes"] = as_observacoes
            
            
            //api.custom_objects.create("BR-VALFI_Tickets",data)
           
           // document.getElementById("info_ticket").innerText = "Ticket criado com sucesso!"
            
           setTimeout(function(){document.getElementById("info_ticket").innerText = ""}, 3000);
       }
       
      
   </script>
   <script>
    var tintas_flexo = []
    function adicionar_tinta_flexo(){
       var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         
    
        var info_tinta = {}
        info_tinta["nombre_tinta"] = document.getElementById("nombre_tinta").value
        info_tinta["lineatura_flexo"] = document.getElementById("lineatura_flexo").value
        info_tinta["trama_flexo"] = document.getElementById("trama_flexo").value
        info_tinta["angulo_flexo"] = document.getElementById("angulo_flexo").value
        info_tinta["trama_solidos_flexo"] = document.getElementById("trama_solidos_flexo").value
        info_tinta["codigo_facturacion"] = ""
        info_tinta["fotocelula"] = false
        info_tinta["linea_refile"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["hex"] = valor_hex
        info_tinta["producir"] = document.getElementById("se_produce").checked
        info_tinta["armado"] = document.getElementById("armado").value
        info_tinta["cantidad_planchas"] = document.getElementById("cantidad_planchas").value
        info_tinta["herramental"] = document.getElementById("herramental").value
        info_tinta["tipo_corte"] = document.getElementById("tipo_corte").value
        info_tinta["desplazado"] = document.getElementById("desplazado").checked
        info_tinta["corte_especial"] = document.getElementById("corte_especial").value
        info_tinta["desarollo_especial"] = document.getElementById("desarollo_especial").value
        info_tinta["doble_copia"] = false
        
        
        tintas_flexo.push(info_tinta)
          document.getElementById("error_tinta").style = "color: green"
         document.getElementById("error_tinta").innerText = "Tinta creada con êxito"
         setTimeout(document.getElementById("error_tinta").innerText = "", 3000)
        
       
        
        document.getElementById("nombre_tinta").value = ""
        document.getElementById("acor").style = "background-color: rgb(255, 255, 255); width: 30px; border: none; display: inline-block;"
        document.getElementById("altera_tinta").innerText = "99"
        
        
        
        
        
       
        
        preenche_tabela_receita()
      
        
    }
    
     function adicionar_cuerpo_libre(){
    //   var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         
        var info_tinta = {}
        info_tinta["nombre_tinta"] = "Cuerpo Libre"
        info_tinta["lineatura_flexo"] = "N/A"
        info_tinta["lineatura_flexo2"] = ""
        info_tinta["trama_flexo"] = "N/A"
        info_tinta["trama_flexo2"] = ""
        info_tinta["angulo_flexo"] = "N/A"
        info_tinta["angulo_flexo2"] = ""
        info_tinta["trama_solidos_flexo"] = "N/A"
        info_tinta["codigo_facturacion"] = ""
        info_tinta["fotocelula"] = false
        info_tinta["linea_refile"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["hex"] = "#FFFFFF"
        info_tinta["producir"] = false
        info_tinta["armado"] = ""
        info_tinta["cantidad_planchas"] = ""
        info_tinta["herramental"] = ""
        info_tinta["lineatura_2"] = ""
        info_tinta["trama_2"] = ""
        info_tinta["tipo_corte"] = ""
        info_tinta["desplazado"] = ""
        info_tinta["corte_especial"] = ""
        info_tinta["desarollo_especial"] = ""
        info_tinta["doble_copia"] = false
        tintas_flexo.push(info_tinta)
          document.getElementById("error_tinta").style = "color: green"
         document.getElementById("error_tinta").innerText = "Tinta creada con êxito"
         setTimeout(document.getElementById("error_tinta").innerText = "", 3000)
        
       
        
        document.getElementById("nombre_tinta").value = ""
        document.getElementById("acor").style = "background-color: rgb(255, 255, 255); width: 30px; border: none; display: inline-block;"
        document.getElementById("altera_tinta").innerText = "99"
        
        
        
        
        
       
        
        preenche_tabela_receita()
      
        
    }
    
    
      function adicionar_CMYK(){
    //   var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         var verifica_campos = true
        var tintas = ["Cyan","Magenta","Yellow","Black","Blanco"]
        var reticulas = ["52.5","22.5","7.5","82.5","Pleno"]
        
        for (i=0;i<tintas.length;i++){
        var nombre = tintas[i]
        
        var existe_tinta = false
        
        for (j=0;j<tintas_flexo.length;j++){
            if (tintas_flexo[j]["nombre_tinta"] == nombre){
                existe_tinta = true
            }
        }
        if (existe_tinta === false){
        var info_tinta = {}
        info_tinta["nombre_tinta"] = nombre
        if (theveryoneprofile == ""){
        if (document.getElementById("lineatura_flexo").value != ""){
        info_tinta["lineatura_flexo"] = document.getElementById("lineatura_flexo").value
        } else {
            document.getElementById("tramasolidos").style.display = "inline-block"
            document.getElementById("lineatura_flexo").style.borderColor = "red"
             document.getElementById("error_lineatura_flexo").innerText = "Llenar lineatura"
            verifica_campos = false
        }
        } else {
            if (theveryoneprofile.LINEATURA_N.indexOf(" - ") > -1){
                    var onearray = theveryoneprofile.LINEATURA_N.split(" - ")
                    info_tinta["lineatura_flexo"] =  onearray[1]
            } else {
                    info_tinta["lineatura_flexo"] = theveryoneprofile.LINEATURA_N
                    
            }
        }
        
        if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
        if (document.getElementById("trama_flexo").value  != "undefined"){
        info_tinta["trama_flexo"] = document.getElementById("trama_flexo").value
        } else {
            document.getElementById("tramasolidos").style.display = "inline-block"
            document.getElementById("trama_flexo").style.borderColor = "red"
            document.getElementById("error_trama_flexo").innerText = "Eligir un tipo de trama"
            verifica_campos = false
        }
        } else {
        if (theveryoneprofile.TRAMA_N.indexOf(" - ") === -1){
        info_tinta["trama_flexo"] = theveryoneprofile.TRAMA_N
        } else {
            var trama_array = theveryoneprofile.TRAMA_N.split(" - ")
            info_tinta["trama_flexo"] = trama_array[1]
        }
        }
        
        if (nombre == "Cyan"){
            if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
            info_tinta["angulo_flexo"] = reticulas[i]
            } else {
            if (theveryoneprofile.ANGULOS_N.indexOf(" - ") === -1){
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULOS_N
            } else {
                var angulo_array = theveryoneprofile.ANGULOS_N.split(" - ")
                info_tinta["angulo_flexo"] = angulo_array[1]
            }
            }
            info_tinta["hex"] = "#00FFFF"
        }
        if (nombre == "Magenta"){
            if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
            info_tinta["angulo_flexo"] = reticulas[i] 
            } else {
            if (theveryoneprofile.ANGULOMAGENTA_N.indexOf(" - ") === -1){
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULOMAGENTA_N
            } else {
               var angulo_array = theveryoneprofile.ANGULOMAGENTA_N.split(" - ")
               info_tinta["angulo_flexo"] = angulo_array[1]
            }
            }
            info_tinta["hex"] = "#FF00FF"
        }
        if (nombre == "Yellow"){
            if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
            info_tinta["angulo_flexo"] = reticulas[i]
            } else {
            if (theveryoneprofile.ANGULOAMARILLO_N.indexOf(" - ") === -1){
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULOAMARILLO_N
            } else {
               var angulo_array = theveryoneprofile.ANGULOAMARILLO_N.split(" - ")
               info_tinta["angulo_flexo"] = angulo_array[1]
            }
            }
            info_tinta["hex"] = "#FFFF00"
        }
        if (nombre == "Black"){
            if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
            info_tinta["angulo_flexo"] = reticulas[i]
            
            } else {
            if (theveryoneprofile.ANGULONEGRO_N.indexOf(" - ") === -1){
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULONEGRO_N
            } else {
              var angulo_array = theveryoneprofile.ANGULONEGRO_N.split(" - ")
               info_tinta["angulo_flexo"] = angulo_array[1]  
               
            }
            }
            info_tinta["hex"] = "#000000"
        }
        if (nombre == "Blanco"){
            if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
            info_tinta["angulo_flexo"] = reticulas[i] 
            } else {
            if (theveryoneprofile.ANGULONEGRO_N.indexOf(" - ") === -1){
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULONEGRO_N
            } else {
               var angulo_array = theveryoneprofile.ANGULONEGRO_N.split(" - ")
               info_tinta["angulo_flexo"] = angulo_array[1]  
            }
            }
            info_tinta["hex"] = "#FFFFFF"
        }
        if (theveryoneprofile == "" || theveryoneprofile.ALIAS_0_ID === undefined){
        if (document.getElementById("trama_solidos_flexo").value  != "undefined"){
        info_tinta["trama_solidos_flexo"] = document.getElementById("trama_solidos_flexo").value 
        } else {
           document.getElementById("tramasolidos").style.display = "inline-block"
            document.getElementById("trama_solidos_flexo").style.borderColor = "red"
             document.getElementById("error_trama_solidos_flexo").innerText = "Eligir un tipo de trama"
            verifica_campos = false 
        }
        } else {
        info_tinta["trama_solidos_flexo"] = theveryoneprofile.TRATAMIENTOSOLIDOSPLE
        }
      //  info_tinta["codigo_facturacion"] = "N/A"
        info_tinta["fotocelula"] = false
        info_tinta["linea_refile"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["doble_copia"] = false
        
        
        
        info_tinta["producir"] = document.getElementById("se_produce").checked
        info_tinta["armado"] = document.getElementById("armado").value
        info_tinta["cantidad_planchas"] = document.getElementById("cantidad_planchas").value
        info_tinta["herramental"] =  document.getElementById("herramental").value
        info_tinta["tipo_corte"] =  document.getElementById("tipo_corte").value
        info_tinta["desplazado"] =  document.getElementById("desplazado").checked
        info_tinta["corte_especial"] =  document.getElementById("corte_especial").value
        info_tinta["desarollo_especial"] =  document.getElementById("desarollo_especial").value
        info_tinta["doble_copia"] = false
        if (verifica_campos == true){
        tintas_flexo.push(info_tinta)
        }
        }
        }
        
        
        
        
       
        if (verifica_campos === true){
        preenche_tabela_receita()
        } else {
            alert("Verificar campos en blanco/ No seleccionados!")
            setTimeout(function(){document.getElementById("trama_solidos_flexo").style.borderColor = "#236423";
                                   document.getElementById("trama_flexo").style.borderColor = "#236423";
                                   document.getElementById("lineatura_flexo").style.borderColor = "#236423";
                                   document.getElementById("error_lineatura_flexo").innerText = "";
                                   document.getElementById("error_trama_flexo").innerText = "";
                                   document.getElementById("error_trama_solidos_flexo").innerText = ""
            }, 4000)
        }
     
        
    }
    
    
    
    function adicionar_ogv(){
    //   var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         var verifica_campos = true
        var tintas = ["Orange","Green","Violet"]
        var reticulas = ["52.5","22.5","82.5"]
        
        for (i=0;i<tintas.length;i++){
        var nombre = tintas[i]
        
        var existe_tinta = false
        
        for (j=0;j<tintas_flexo.length;j++){
            if (tintas_flexo[j]["nombre_tinta"] == nombre){
                existe_tinta = true
            }
        }
        if (existe_tinta === false){
        var info_tinta = {}
        info_tinta["nombre_tinta"] = nombre
        if (theveryoneprofile == ""){
        if (document.getElementById("lineatura_flexo").value != ""){
        info_tinta["lineatura_flexo"] = document.getElementById("lineatura_flexo").value
        
        } else {
            document.getElementById("tramasolidos").style.display = "inline-block"
            document.getElementById("lineatura_flexo").style.borderColor = "red"
             document.getElementById("error_lineatura_flexo").innerText = "Llenar lineatura"
            verifica_campos = false
        } } else {
            if (theveryoneprofile.LINEATURA_N.indexOf(" - ") > -1){
                    var onearray = theveryoneprofile.LINEATURA_N.split(" - ")
                    info_tinta["lineatura_flexo"] =  onearray[1]
            } else {
                    info_tinta["lineatura_flexo"] = theveryoneprofile.LINEATURA_N  
            }
        }
        
        if (theveryoneprofile == ""){
        if (document.getElementById("trama_flexo").value  != "undefined"){
        info_tinta["trama_flexo"] = document.getElementById("trama_flexo").value
        } else {
          document.getElementById("tramasolidos").style.display = "inline-block"
            document.getElementById("trama_flexo").style.borderColor = "red"
            document.getElementById("error_trama_flexo").innerText = "Eligir un tipo de trama"
            verifica_campos = false
        }
        } else {
        info_tinta["trama_flexo"] = theveryoneprofile.TRAMA_N
        }
        
        if (nombre == "Green"){
            if (theveryoneprofile == ""){
            info_tinta["angulo_flexo"] = reticulas[i] 
            } else {
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULOVERDE_N
            }
            info_tinta["hex"] = "#00FF00"
        }
        if (nombre == "Orange"){
            if (theveryoneprofile == ""){
            info_tinta["angulo_flexo"] = reticulas[i] 
            } else {
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULONARANJA_N
            }
            info_tinta["hex"] = "#FFA500"
        }
        if (nombre == "Violet"){
            if (theveryoneprofile == ""){
            info_tinta["angulo_flexo"] = reticulas[i] 
            } else {
            info_tinta["angulo_flexo"] = theveryoneprofile.ANGULOVIOLETA_N
            }
            info_tinta["hex"] = "#8F00FF"
        }
        
     if (theveryoneprofile == ""){
        if (document.getElementById("trama_solidos_flexo").value  != "undefined"){
        info_tinta["trama_solidos_flexo"] = document.getElementById("trama_solidos_flexo").value 
        
        } else {
           document.getElementById("tramasolidos").style.display = "inline-block"
            document.getElementById("trama_solidos_flexo").style.borderColor = "red"
             document.getElementById("error_trama_solidos_flexo").innerText = "Eligir un tipo de trama"
            verifica_campos = false 
        }
        } else {
        info_tinta["trama_solidos_flexo"] = theveryoneprofile.TRATAMIENTOSOLIDOSPLE
        }
        //  info_tinta["codigo_facturacion"] = "N/A"
        info_tinta["fotocelula"] = false
        info_tinta["linea_refile"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["doble_copia"] = false
        
        
        
        info_tinta["producir"] = document.getElementById("se_produce").checked
        info_tinta["armado"] = document.getElementById("armado").value
        info_tinta["cantidad_planchas"] = document.getElementById("cantidad_planchas").value
        info_tinta["herramental"] =  document.getElementById("herramental").value
        info_tinta["tipo_corte"] =  document.getElementById("tipo_corte").value
        info_tinta["desplazado"] =  document.getElementById("desplazado").checked
        info_tinta["corte_especial"] =  document.getElementById("corte_especial").value
        info_tinta["desarollo_especial"] =  document.getElementById("desarollo_especial").value
        info_tinta["doble_copia"] = false
        if (verifica_campos == true){
        tintas_flexo.push(info_tinta)
        }
        
        }
        }
        
        
        
        
       
        
       if (verifica_campos === true){
        preenche_tabela_receita()
        } else {
            alert("Verificar campos en blanco/ No seleccionados!")
            setTimeout(function(){document.getElementById("trama_solidos_flexo").style.borderColor = "#236423";
                                   document.getElementById("trama_flexo").style.borderColor = "#236423";
                                   document.getElementById("lineatura_flexo").style.borderColor = "#236423";
                                   document.getElementById("error_lineatura_flexo").innerText = "";
                                   document.getElementById("error_trama_flexo").innerText = "";
                                   document.getElementById("error_trama_solidos_flexo").innerText = ""
            }, 4000)
        }
      
        
    }
    
 
</script>


<script>
   var numero_cilindro = 0
   
    function adicionar_tinta_hueco(){
       var valor_hex = chroma(document.getElementById("acor2").style.backgroundColor).hex()
         
        var info_tinta = {}
        info_tinta["nombre_tinta"] = document.getElementById("nombre_tinta2").value
        info_tinta["diametro"] = document.getElementById("diametro").value
        info_tinta["distorcion"] = document.getElementById("distorcion").value
        info_tinta["en_planta"] = document.getElementById("en_planta").value
        info_tinta["herciline"] = document.getElementById("herciline").value
        info_tinta["alma"] = document.getElementById("alma").value
        info_tinta["tabla"] = document.getElementById("tabla").value
        info_tinta["tabla_2"] = document.getElementById("tabla_2").value
        info_tinta["tipo_grabacion"] = document.getElementById("tipo_grabacion").value
        info_tinta["observaciones"] = document.getElementById("observaciones_cilindro").value
        info_tinta["fotocelula"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["hex"] = valor_hex
        info_tinta["producir"] = document.getElementById("se_produce2").checked
        info_tinta["doble_copia"] = false
        
        
        tintas_flexo.push(info_tinta)
          document.getElementById("error_tinta").style = "color: green"
         document.getElementById("error_tinta").innerText = "Tinta creada con êxito"
         setTimeout(document.getElementById("error_tinta").innerText = "", 3000)
        
        
        
        document.getElementById("nombre_tinta2").value = ""
        document.getElementById("alma").value = ""
        document.getElementById("acor").style = "background-color: rgb(255, 255, 255); width: 30px; border: none; display: inline-block;"
        
        
        
        
        
       
        
        preenche_tabela_receita2()
      
        
    }
    
     function adicionar_cuerpo_libre2(){
    //   var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         
        var info_tinta = {}
        info_tinta["nombre_tinta"] = "Cuerpo Libre"
        info_tinta["diametro"] = ""
        info_tinta["distorcion"] = ""
        info_tinta["en_planta"] = false
        info_tinta["herciline"] = ""
        info_tinta["alma"] = ""
        info_tinta["tabla"] = ""
        info_tinta["tabla_2"] = ""
        info_tinta["tipo_grabacion"] = ""
        
        info_tinta["fotocelula"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["producir"] = false
        info_tinta["doble_copia"] = false
        info_tinta["observaciones"] = ""
        
        tintas_flexo.push(info_tinta)
          document.getElementById("error_tinta").style = "color: green"
         document.getElementById("error_tinta").innerText = "Tinta creada con êxito"
         setTimeout(document.getElementById("error_tinta").innerText = "", 3000)
        
       
        
        document.getElementById("nombre_tinta2").value = ""
        document.getElementById("altera_tinta").innerText = "99"
        
        
        
        
        
       
        
        preenche_tabela_receita2()
      
        
    }
    
    
      function adicionar_CMYK2(){
    //   var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         var verifica_campos = true
        var tintas = ["Cyan","Magenta","Yellow","Black","Blanco"]
        var reticulas = ["52.5","22.5","7.5","82.5","Pleno"]
        
        for (i=0;i<tintas.length;i++){
        var nombre = tintas[i]
        
        var existe_tinta = false
        
        for (j=0;j<tintas_flexo.length;j++){
            if (tintas_flexo[j]["nombre_tinta"] == nombre){
                existe_tinta = true
            }
        }
        if (existe_tinta === false){
        var info_tinta = {}
        info_tinta["nombre_tinta"] = nombre
        
        if (nombre == "Cyan"){
           
            info_tinta["hex"] = "#00FFFF"
        }
        if (nombre == "Magenta"){
           
            info_tinta["hex"] = "#FF00FF"
        }
        if (nombre == "Yellow"){
           
            info_tinta["hex"] = "#FFFF00"
        }
        if (nombre == "Black"){
           
            info_tinta["hex"] = "#000000"
        }
        if (nombre == "Blanco"){
           
            info_tinta["hex"] = "#FFFFFF"
        }
       
        info_tinta["diametro"] = document.getElementById("diametro").value
        info_tinta["distorcion"] = document.getElementById("distorcion").value
        info_tinta["en_planta"] = document.getElementById("en_planta").value
        info_tinta["herciline"] = document.getElementById("herciline").value
        info_tinta["alma"] = document.getElementById("alma").value
        info_tinta["tabla"] = document.getElementById("tabla").value
        info_tinta["tabla_2"] = document.getElementById("tabla_2").value
        info_tinta["tipo_grabacion"] = document.getElementById("tipo_grabacion").value
        info_tinta["observaciones"] = document.getElementById("observaciones_cilindro").value
        info_tinta["fotocelula"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["producir"] = document.getElementById("se_produce2").checked
        info_tinta["doble_copia"] = false
        
        if (verifica_campos == true){
        tintas_flexo.push(info_tinta)
        }
        }
        }
        
        
        
        
       
        if (verifica_campos === true){
        preenche_tabela_receita2()
        } else {
            alert("Verificar campos en blanco/ No seleccionados!")
            setTimeout(function(){document.getElementById("trama_solidos_flexo").style.borderColor = "#236423";
                                   document.getElementById("trama_flexo").style.borderColor = "#236423";
                                   document.getElementById("lineatura_flexo").style.borderColor = "#236423";
                                   document.getElementById("error_lineatura_flexo").innerText = "";
                                   document.getElementById("error_trama_flexo").innerText = "";
                                   document.getElementById("error_trama_solidos_flexo").innerText = ""
            }, 4000)
        }
     
        
    }
    
    
    
    function adicionar_ogv2(){
    //   var valor_hex = chroma(document.getElementById("acor").style.backgroundColor).hex()
         var verifica_campos = true
        var tintas = ["Orange","Green","Violet"]
        var reticulas = ["52.5","22.5","82.5"]
        
        for (i=0;i<tintas.length;i++){
        var nombre = tintas[i]
        
        var existe_tinta = false
        
        for (j=0;j<tintas_flexo.length;j++){
            if (tintas_flexo[j]["nombre_tinta"] == nombre){
                existe_tinta = true
            }
        }
        if (existe_tinta === false){
        var info_tinta = {}
        info_tinta["nombre_tinta"] = nombre
        
        
        if (nombre == "Green"){
           
            info_tinta["hex"] = "#00FF00"
        }
        if (nombre == "Orange"){
           
            info_tinta["hex"] = "#FFA500"
        }
        if (nombre == "Violet"){
           
            info_tinta["hex"] = "#8F00FF"
        }
        
      info_tinta["diametro"] = document.getElementById("diametro").value
        info_tinta["distorcion"] = document.getElementById("distorcion").value
        info_tinta["en_planta"] = document.getElementById("en_planta").value
        info_tinta["herciline"] = document.getElementById("herciline").value
        info_tinta["alma"] = document.getElementById("alma").value
        info_tinta["tabla"] = document.getElementById("tabla").value
        info_tinta["tabla_2"] = document.getElementById("tabla_2").value
        info_tinta["tipo_grabacion"] = document.getElementById("tipo_grabacion").value
        info_tinta["observaciones"] = document.getElementById("observaciones_cilindro").value
        info_tinta["fotocelula"] = false
        info_tinta["pie_imprenta"] = false
        info_tinta["codigo_barras"] = false
        info_tinta["hex"] = valor_hex
        info_tinta["producir"] = document.getElementById("se_produce2").checked
        info_tinta["doble_copia"] = false
        
        if (verifica_campos == true){
        tintas_flexo.push(info_tinta)
        }
        
        }
        }
        
        
        
        
       
        
       if (verifica_campos === true){
        preenche_tabela_receita2()
        } else {
            alert("Verificar campos en blanco/ No seleccionados!")
            setTimeout(function(){document.getElementById("trama_solidos_flexo").style.borderColor = "#236423";
                                   document.getElementById("trama_flexo").style.borderColor = "#236423";
                                   document.getElementById("lineatura_flexo").style.borderColor = "#236423";
                                   document.getElementById("error_lineatura_flexo").innerText = "";
                                   document.getElementById("error_trama_flexo").innerText = "";
                                   document.getElementById("error_trama_solidos_flexo").innerText = ""
            }, 4000)
        }
      
        
    }
    
 
</script>
<script>
    function preenche_tabela_receita2(){
       console.log(tintas_flexo.length)
        
        
        clearTable(document.getElementById("tabela_receitas_hueco"))
          
          
         var table = document.getElementById("tabela_receitas_hueco")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<tintas_flexo.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
            var cell9 = row.insertCell(8);
            var cell10 = row.insertCell(9);
            var cell11 = row.insertCell(10);
            var cell12 = row.insertCell(11);
            
           
           
           cell1.style.textAlign = "left"
          if (tintas_flexo[i].doble_copia == true){
            numero_cilindro = numero_cilindro
          } else {
           
            numero_cilindro = numero_cilindro+1
          
          }
          if (numero_cilindro%2 === 0){
              row.style.backgroundColor = "#e6d8ee"
          }
        //   numero_cilindro = tintas_flexo[i].secuencia
           var color_produce = "red"
           
           if (tintas_flexo[i].producir === true){
               color_produce = "green"
           }
           
           var color_enplanta = "red"
           if (tintas_flexo[i].en_planta === "Si"){
               color_enplanta = "green"
           }
           
        // checkbox para cambiar tintas en Batch     
          // cell1.innerHTML = '<div style="font-size: 0.8em; display: inline-block;"><input type="checkbox" id="batch_'+tintas_flexo[i].nombre_tinta+'" onclick="batch_tintas()"><div style="display:inline-block; margin-left: 3px"><i onclick="move_acima()" id="'+i+'" class="fas fa-arrow-up" style="margin-right: 5px; cursor: pointer;"></i><i  onclick="move_abaixo()" id="'+i+'" class="fas fa-arrow-down" style="margin-right: 5px;cursor: pointer;"></i><span style="margin-top:5px;height:20px;width:20px;background-color:'+tintas_flexo[i].hex+';border-radius:50%;display:inline-block"></span></div><span style="display: inline-block;"></span></div><strong> '+numero_cilindro+' - '+tintas_flexo[i].nombre_tinta+'</strong></div>'
           
           
         if (tintas_flexo[i].doble_copia == false){
           cell1.innerHTML = '<div style="font-size: 0.6em; display: inline-block; text-align: left;"><div style="display:inline-block; margin-left: 3px"><i onclick="move_acima2()" id="'+i+'" class="fas fa-arrow-up" style="margin-right: 5px; cursor: pointer; font-size: 15px;"></i><i onclick="move_abaixo2()" id="'+i+'" class="fas fa-arrow-down" style="margin-right: 5px;cursor: pointer;font-size: 15px;"></i><img id="'+qtasrow+'" onclick="mostraDisclosure2()" src="./Icons/showinfo.png" height="20px" id="disclosure_'+i+'" style="margin-left: 5px; margin-right: 5px; vertical-align: baseline;"><span style="vertical-align: baseline;height:15px;width:15px;background-color:'+tintas_flexo[i].hex+';border-radius:50%;display:inline-block"></span></div><span style="display: inline-block;"></span></div><strong> '+numero_cilindro+' - '+tintas_flexo[i].nombre_tinta.replace("PANTONE","P.")+'</strong></div>'
           } else {
           cell1.innerHTML = '<div style="font-size: 0.6em; display: inline-block; text-align: left;"><div style="display:inline-block; margin-left: 3px"><i  id="'+i+'" class="fas fa-times-circle" style="margin-right: 5px;font-size: 15px;"></i><i  id="'+i+'" class="fas fa-times-circle" style="margin-right: 5px;font-size: 15px;"></i><img id="'+qtasrow+'" onclick="mostraDisclosure2()" src="./Icons/showinfo.png" height="20px" id="disclosure_'+i+'" style="margin-left: 5px; margin-right: 5px; vertical-align: baseline;"><span style="vertical-align: baseline;height:15px;width:15px;background-color:'+tintas_flexo[i].hex+';border-radius:50%;display:inline-block"></span></div><span style="display: inline-block;"></span></div><strong> '+numero_cilindro+' - '+tintas_flexo[i].nombre_tinta.replace("PANTONE","P.")+'</strong></div>'
               
           }
          
           cell2.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="tabla_'+i+'" value="'+tintas_flexo[i].tabla+'" class="form-control"  style="font-size: 1em; text-align: center;" readonly></div>'
           cell3.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="diametro_'+i+'" value="'+tintas_flexo[i].diametro+'" class="form-control" style="font-size: 1em; text-align: center;"  readonly></div>'
           cell4.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="alma_'+i+'" value="'+tintas_flexo[i].distorcion+'" class="form-control"  style="font-size: 1em; text-align: center;" readonly></div>'
          
           cell5.innerHTML = '<div><span id="'+i+'" style="margin-top:5px;height:15px;width:15px;background-color:'+color_produce+';border-radius:50%;display:inline-block; cursor: pointer" onclick="cambia_seproduce2()"></span></div>'
          
           
             
            
         if (tintas_flexo[i].fotocelula === undefined){
          cell6.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="fotocelula_'+i+'" class="form-control" style="height: 1em"  disabled></div>'
         } else {
             if (tintas_flexo[i].fotocelula == true){
                cell6.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="fotocelula_'+i+'" class="form-control" style="height: 1em" checked disabled></div>'
           
             } else {
                     cell6.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="fotocelula_'+i+'" class="form-control" style="height: 1em"disabled></div>'
            
             }
             
         }
          if (tintas_flexo[i].pie_imprenta === undefined){
          cell7.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="pie_imprenta_'+i+'" class="form-control" style="height: 1em"  disabled></div>'
         } else {
             if (tintas_flexo[i].pie_imprenta == true){
                cell7.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="pie_imprenta_'+i+'" class="form-control" style="height: 1em" checked disabled></div>'
           
             } else {
                     cell7.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="pie_imprenta_'+i+'" class="form-control" style="height: 1em"disabled></div>'
            
             }
             
         }
          if (tintas_flexo[i].codigo_barras === undefined){
          cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="codigobarras_'+i+'" class="form-control" style="height: 1em"  disabled></div>'
         } else {
             if (tintas_flexo[i].codigo_barras == true){
                cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="codigobarras_'+i+'" class="form-control" style="height: 1em" checked disabled></div>'
           
             } else {
                     cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="codigobarras_'+i+'" class="form-control" style="height: 1em"disabled></div>'
            
             }
             
         }
           cell9.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="tipo_grabacion_'+i+'" value="'+tintas_flexo[i].tipo_grabacion+'" class="form-control" style="font-size: 1em; text-align: center;"  readonly></div>'
            cell10.innerHTML = '<div><img id="editartintaflexo_'+i+'" src="Icons/duplicar.png" height="20px" onclick="duplicarTinta2()" style="cursor: pointer;"></div>'
            
            cell11.innerHTML = '<div><img id="editartintaflexo_'+i+'" src="Icons/edit.png" height="20px" onclick="editarTinta2()" style="cursor: pointer;"></div>'
            cell12.innerHTML = '<div><img id="editartintaflexo_'+i+'" src="Icons/trashcan.png" height="20px" onclick="apagarTinta2()" style="cursor: pointer;"></div>'
           
            qtasrow = qtasrow +1
      
           var table = document.getElementById("tabela_receitas_hueco")
             var qtasrow = table.rows.length
              var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 12
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            
             
             var string_div = '<div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">'
            
            
            
             
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 30%; vertical-align: top; margin-right: 1%">'
             
             
              string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 49%; vertical-align: top; margin-right: 1%">'
             string_div = string_div+'<label>Alma</label>'
             if (tintas_flexo[i].alma== ""){
             string_div = string_div+'<input type="text" class="form-control" id="tabla_'+i+'" value="No Aplica" readonly>'
             } else {
             string_div = string_div+'<input type="text" class="form-control" id="tabla_'+i+'" value="'+tintas_flexo[i].alma+'" style="text-align: center" readonly>'
                 
             }
             string_div = string_div+'</div>'
             
             
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 48%; vertical-align: top;">'
             string_div = string_div+'<label >Tabla 2</label>'
             if (tintas_flexo[i].tabla_2== ""){
             string_div = string_div+'<input type="text" class="form-control" id="tabla2_'+i+'" value="No Aplica" readonly>'
             } else {
             string_div = string_div+'<input type="text" class="form-control" id="tabla2_'+i+'" value="'+tintas_flexo[i].tabla_2+'" style="text-align: center" readonly>'
                 
             }
             string_div = string_div+'</div>'
             
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 100%; vertical-align: top;">'
             string_div = string_div+'<label >En Planta</label>'
             if (tintas_flexo[i].en_planta== "undefined"){
             string_div = string_div+'<input type="text" class="form-control" id="enplanta_'+i+'" value="No Definido" readonly>'
             } else {
             string_div = string_div+'<input type="text" class="form-control" id="enplanta_'+i+'" value="'+tintas_flexo[i].en_planta+'" style="text-align: center" readonly>'
                 
             }
             string_div = string_div+'</div>'
            
            string_div = string_div+'</div>'
             
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 67%; vertical-align: top;">'
             string_div = string_div+'<label >Observaciones</label>'
             if (tintas_flexo[i].observaciones == ""){
             string_div = string_div+'<textarea" class="form-control" id="observacionescilindro_'+i+'" readonly rows="4"></textarea>'
             } else {
             string_div = string_div+'<textarea class="form-control" id="observacionescilindro_'+i+'"  style="text-align: center" readonly rows="4">'+tintas_flexo[i].observaciones+'</textarea>'
                 
             }
             string_div = string_div+'</div>'
            
             string_div = string_div+"</div>"
             
             cell1_2.innerHTML = string_div
           
              qtasrow = qtasrow +1
             
                
            }
            
   
        numero_cilindro = 0
   
    }
    
    
    	function mostraDisclosure2(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        
        var table = document.getElementById("tabela_receitas_hueco")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 12
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
        
      }
    
    function cambia_seproduce2(){
      var linha = parseInt(event.srcElement.id)
      if (tintas_flexo[linha].producir === false){
          tintas_flexo[linha].producir = true
      } else {
          tintas_flexo[linha].producir = false
      }
      preenche_tabela_receita2()
    }
    
   
    
    
    
  
       
       function coloca_fotocelula2(){
           var linha = event.srcElement.id
           
           for (i=0;i<tintas_flexo.length;i++){
               if (tintas_flexo[i].nombre_tinta === linha){
                   
                   tintas_flexo[i].fotocelula = document.getElementById(linha).checked
               }
           }
       }
      
        
    
    
    
    
    
    
    
     function apagarTinta2(){
    var linha = event.srcElement.id
    console.log(linha)
    var linha_array = linha.split("_")
    
    var tira = tintas_flexo.splice(parseInt(linha_array[1]),1)
    
    
    
       
        preenche_tabela_receita2()

        
     }
     
    
     function editarTinta2(){
     var linha = event.srcElement.id
    console.log(linha)
    var linha_array = linha.split("_")
   
    var div_alma = "alma_"+linha_array[1]
    var div_diametro = "diametro_"+linha_array[1]
    var div_grabacion = "tipo_grabacion_"+linha_array[1]
    var div_tabla = "tabla_"+linha_array[1]
    var div_tabla2 = "tabla2_"+linha_array[1]
    var div_enplanta = "enplanta_"+linha_array[1]
    var div_observaciones = "observacionescilindro_"+linha_array[1]
    var div_codigobarras = "codigobarras_"+linha_array[1]
      var div_pieimprenta = "pie_imprenta_"+linha_array[1]
      var div_fotocelula = "fotocelula_"+linha_array[1]
      
    
    if (document.getElementById(div_alma).readOnly === true){
        document.getElementById(div_alma).readOnly = false
        document.getElementById(div_diametro).readOnly = false
        document.getElementById(div_grabacion).readOnly = false
        document.getElementById(div_tabla).readOnly = false
        document.getElementById(div_tabla2).readOnly = false
        document.getElementById(div_enplanta).readOnly = false
        document.getElementById(div_observaciones).readOnly = false
        document.getElementById(div_codigobarras).disabled = false
        document.getElementById(div_pieimprenta).disabled = false
        document.getElementById(div_fotocelula).disabled = false
       
    } else {
        document.getElementById(div_alma).readOnly = true
        document.getElementById(div_diametro).readOnly = true
        document.getElementById(div_grabacion).readOnly = true
        document.getElementById(div_tabla).readOnly = true
        document.getElementById(div_tabla2).readOnly = true
        document.getElementById(div_enplanta).readOnly = true
        
        document.getElementById(div_observaciones).readOnly = true
        document.getElementById(div_codigobarras).disabled = true
        document.getElementById(div_pieimprenta).disabled = true
        document.getElementById(div_fotocelula).disabled = true
       
        
        var cual_tinta = parseInt(linha_array[1])
        tintas_flexo[cual_tinta]["alma"] = document.getElementById(div_alma).value
        tintas_flexo[cual_tinta]["diametro"] = document.getElementById(div_diametro).value
        tintas_flexo[cual_tinta]["tipo_grabacion"] = document.getElementById(div_grabacion).value
        tintas_flexo[cual_tinta]["tabla"] = document.getElementById(div_tabla).value
        tintas_flexo[cual_tinta]["tabla_2"] = document.getElementById(div_tabla2).value
        tintas_flexo[cual_tinta]["en_planta"] = document.getElementById(div_enplanta).value
        tintas_flexo[cual_tinta]["codigobarras"] = document.getElementById(div_codigobarras).checked
        tintas_flexo[cual_tinta]["pieimprenta"] = document.getElementById(div_pieimprenta).checked
        tintas_flexo[cual_tinta]["fotocelula"] = document.getElementById(div_fotocelula).checked
        tintas_flexo[cual_tinta]["observaciones"] = document.getElementById(div_observaciones).value
        
    }
    
    }
    
  </script>
  <script>
      	function muda_figura(){
  	    var ref = document.getElementById("referencia_arte").value
  	    var lado = document.getElementById("lado_impressao").value
  	    var puxada = document.getElementById("sentido_impresion").value
  	    var fot = document.getElementById("lado_fotocelula").value
  	    var figura = ref+"_"+lado+"_"+puxada+"_"+fot+".png"
  	    document.getElementById("img_puxada").src = "./Icons/bob_puxada/"+figura
  	}
  </script>

<script>



    function preenche_tabela_receita(){
       console.log(tintas_flexo.length)
        
        
        clearTable(document.getElementById("tabela_receitas_flexo"))
          
          
         var table = document.getElementById("tabela_receitas_flexo")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<tintas_flexo.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
            var cell9 = row.insertCell(8);
            var cell10 = row.insertCell(9);
            var cell11 = row.insertCell(10);
            var cell12 = row.insertCell(11);
            var cell13 = row.insertCell(12);
            var cell14 = row.insertCell(13);
            var cell15 = row.insertCell(14);
            
           
           
           cell1.style.textAlign = "left"
           
           console.log(numero_cilindro)
           
           if (tintas_flexo[i].doble_copia == true){
            numero_cilindro = numero_cilindro
          } else {
           
            numero_cilindro = numero_cilindro+1
          
          }
          if (numero_cilindro%2 === 0){
              row.style.backgroundColor = "#e6d8ee"
          }
          
           var color_produce = "red"
           
           if (tintas_flexo[i].producir === true){
               color_produce = "green"
           }
           
        // checkbox para cambiar tintas en Batch     
          // cell1.innerHTML = '<div style="font-size: 0.8em; display: inline-block;"><input type="checkbox" id="batch_'+tintas_flexo[i].nombre_tinta+'" onclick="batch_tintas()"><div style="display:inline-block; margin-left: 3px"><i onclick="move_acima()" id="'+i+'" class="fas fa-arrow-up" style="margin-right: 5px; cursor: pointer;"></i><i  onclick="move_abaixo()" id="'+i+'" class="fas fa-arrow-down" style="margin-right: 5px;cursor: pointer;"></i><span style="margin-top:5px;height:20px;width:20px;background-color:'+tintas_flexo[i].hex+';border-radius:50%;display:inline-block"></span></div><span style="display: inline-block;"></span></div><strong> '+numero_cilindro+' - '+tintas_flexo[i].nombre_tinta+'</strong></div>'
           
           if (tintas_flexo[i].doble_copia == false){
           cell1.innerHTML = '<div style="font-size: 0.6em; display: inline-block; text-align: left;"><div style="display:inline-block; margin-left: 3px"><i onclick="move_acima()" id="'+i+'" class="fas fa-arrow-up" style="margin-right: 5px; cursor: pointer; font-size: 15px;"></i><i onclick="move_abaixo()" id="'+i+'" class="fas fa-arrow-down" style="margin-right: 5px;cursor: pointer;font-size: 15px;"></i><img id="'+qtasrow+'" onclick="mostraDisclosure()" src="./Icons/showinfo.png" height="20px" id="disclosure_'+i+'" style="margin-left: 5px; margin-right: 5px; vertical-align: baseline;"><span style="vertical-align: baseline;height:15px;width:15px;background-color:'+tintas_flexo[i].hex+';border-radius:50%;display:inline-block"></span></div><span style="display: inline-block;"></span></div><strong> '+numero_cilindro+' - '+tintas_flexo[i].nombre_tinta.replace("PANTONE","P.")+'</strong></div>'
           } else {
           cell1.innerHTML = '<div style="font-size: 0.6em; display: inline-block; text-align: left;"><div style="display:inline-block; margin-left: 3px"><i  id="'+i+'" class="fas fa-times-circle" style="margin-right: 5px;font-size: 15px;"></i><i  id="'+i+'" class="fas fa-times-circle" style="margin-right: 5px;font-size: 15px;"></i><img id="'+qtasrow+'" onclick="mostraDisclosure()" src="./Icons/showinfo.png" height="20px" id="disclosure_'+i+'" style="margin-left: 5px; margin-right: 5px; vertical-align: baseline;"><span style="vertical-align: baseline;height:15px;width:15px;background-color:'+tintas_flexo[i].hex+';border-radius:50%;display:inline-block"></span></div><span style="display: inline-block;"></span></div><strong> '+numero_cilindro+' - '+tintas_flexo[i].nombre_tinta.replace("PANTONE","P.")+'</strong></div>'
               
           }
           cell2.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="tinta_'+i+'" value="'+tintas_flexo[i].lineatura_flexo+'" class="form-control"  style="font-size: 1em; text-align: center;" readonly></div>'
           cell3.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="trama_'+i+'" value="'+tintas_flexo[i].trama_flexo+'" class="form-control" style="font-size: 1em; text-align: center;"  readonly></div>'
            cell4.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="angulo_'+i+'" value="'+tintas_flexo[i].angulo_flexo+'" class="form-control" style="font-size: 1em; text-align: center;"  readonly></div>'
           cell5.innerHTML = '<div><span id="'+i+'" style="margin-top:5px;height:15px;width:15px;background-color:'+color_produce+';border-radius:50%;display:inline-block; cursor: pointer" onclick="cambia_seproduce()"></span></div>'
         
           var info_armado = ""
           info_armado = info_armado+'<select class="form-control"  id="tipoarmado_'+i+'" style="background-color:#e9ecef; font-size: 1em; text-align: center;" name="tipo_ordem">'
             info_armado = info_armado+'<option disabled>A</option>'
             info_armado = info_armado+'<option disabled>AB</option>'
             info_armado = info_armado+'<option disabled>ABC</option>'
             info_armado = info_armado+'<option disabled>AC</option>'
             info_armado = info_armado+'<option disabled>B</option>'
             info_armado = info_armado+'<option disabled>BC</option>'
             info_armado = info_armado+'<option disabled>C</option>'
             info_armado = info_armado+'</select>'
             
            cell6.innerHTML = '<div style="font-size:1em; cursor: pointer">'+info_armado+'</div>'
            cell7.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="tramasolido_'+i+'" value="'+tintas_flexo[i].trama_solidos_flexo+'" class="form-control" style="font-size: 1em; text-align: center;" readonly></div>'
         
         if (tintas_flexo[i].codigo_barras === undefined){
          cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="codigobarras_'+i+'" class="form-control" style="height: 1em" disabled></div>'
         } else {
             if (tintas_flexo[i].codigo_barras == true){
                cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="codigobarras_'+i+'" class="form-control" style="height: 1em" checked disabled></div>'
           
             } else {
                     cell8.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="codigobarras_'+i+'" class="form-control" style="height: 1em"disabled></div>'
            
             }
             
         }
         if (tintas_flexo[i].pie_imprenta === undefined){
           cell9.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="pieimprenta_'+i+'" class="form-control" style="height: 1em" disabled ></div>'
         } else {
             if (tintas_flexo[i].pie_imprenta == true){
                  cell9.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="pieimprenta_'+i+'" class="form-control" style="height: 1em" checked disabled ></div>'
       
             } else {
           cell9.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="pieimprenta_'+i+'" class="form-control" style="height: 1em" disabled ></div>'
            
             }
             
         }
         if (tintas_flexo[i].fotocelula === undefined){
        
           cell10.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="fotocelula_'+i+'" class="form-control" style="height: 1em" disabled></div>'
         } else {
             if (tintas_flexo[i].fotocelula == true){
           cell10.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="fotocelula_'+i+'" class="form-control" style="height: 1em" checked disabled></div>'
       
             } else {
           cell10.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="fotocelula_'+i+'" class="form-control" style="height: 1em" disabled></div>'
            
             }
             
         }
          if (tintas_flexo[i].linea_refile === undefined){
        
           cell11.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="linearefile_'+i+'" class="form-control" style="height: 1em" disabled ></div>'
          } else {
             if (tintas_flexo[i].linea_refile == true){
           cell11.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="linearefile_'+i+'" class="form-control" style="height: 1em" checked disabled ></div>'
       
             } else {
           cell11.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="checkbox" id="linearefile_'+i+'" class="form-control" style="height: 1em" disabled ></div>'
            
             }
             
         }
            cell12.innerHTML = '<div style="font-size:1em; cursor: pointer"><input type="text" id="cantidad_'+i+'" value="'+tintas_flexo[i].cantidad_planchas+'" class="form-control" style="font-size: 1em; text-align: center;" readonly></div>'
            cell13.innerHTML = '<div><img id="editartintaflexo_'+i+'" src="Icons/duplicar.png" height="20px" onclick="duplicarTinta()" style="cursor: pointer;"></div>'
           
            cell14.innerHTML = '<div><img id="editartintaflexo_'+i+'" src="Icons/edit.png" height="20px" onclick="editarTinta()" style="cursor: pointer;"></div>'
            cell15.innerHTML = '<div><img id="editartintaflexo_'+i+'" src="Icons/trashcan.png" height="20px" onclick="apagarTinta()" style="cursor: pointer;"></div>'
           
            qtasrow = qtasrow +1
      
           var table = document.getElementById("tabela_receitas_flexo")
             var qtasrow = table.rows.length
              var row2 =  table.insertRow(qtasrow);
            var cell1_2 = row2.insertCell(0);
            cell1_2.colSpan = 14
            cell1_2.style = "background-color: lightgray"
            cell1_2.style = "display: none;"
            
             var string_div = '<div style="width: 100%; display:inline-block; vertical-align: top; padding-top: 5px; ">'
            
            
             
             //div Herramental
             string_div = string_div+'<div style="width: 20%; display:inline-block; vertical-align: top; margin-right: 1% ">'
              string_div = string_div+'<div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 100%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px; margin-right: 1%">'
             string_div = string_div+'<p><strong>Herramental</strong></p>'
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 100%; vertical-align: top;">'
             string_div = string_div+'<label style="font-size: 0.8em">Tipo Herramental</label>'
             if (tintas_flexo[i].herramental== "undefined"){
             string_div = string_div+'<input type="text" class="form-control" id="herramental_'+i+'" style="font-size: 0.8em" value="No Aplica" readonly>'
             } else {
             string_div = string_div+'<input type="text" class="form-control" id="herramental_'+i+'" style="font-size: 0.8em" value="'+tintas_flexo[i].herramental+'" style="text-align: center" readonly>'
                 
             }
             string_div = string_div+'</div>'
             
             
             string_div = string_div+'</div>'
             string_div = string_div+'</div>'
             
             
             
             
            
           
             // div Doble Lineatura
             string_div = string_div+'<div style="border-radius: 20px; background-color: #FAFAFA; box-shadow: 2px 2px #246425; width: 77%;display: inline-block; padding: 20px; vertical-align: top; margin-bottom: 10px;">'
             string_div = string_div+'<p><strong>Corte de Plancha</strong></p>'
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 25%; margin-right: 1%;">'
             string_div = string_div+'<label style="font-size: 0.8em">Tipo de Corte</label>'
             string_div = string_div+'<select class="form-control" id="tipocorte_'+i+'" style="background-color:#e9ecef; text-align: center; font-size: 0.8em" onchange="cambia_tipocorte()" >'
             string_div = string_div+'<option selected>Normal</option>'
             string_div = string_div+'<option disabled>Diferencial</option>'
             string_div = string_div+'<option disabled>Escalonado</option>'
             string_div = string_div+'<option disabled>Sinusoidal</option>'
             string_div = string_div+'</select>'
             string_div = string_div+'</div>'
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 20%;">'
             if (tintas_flexo[i].desplazado === false){
             string_div = string_div+'<input type="checkbox" class="form-group" id="desplazado_'+i+'" disabled>'
             } else {
             string_div = string_div+'<input type="checkbox" class="form-group" id="desplazado_'+i+'" checked disabled>'    
             }
             string_div = string_div+'<label style="font-size: 0.8em">Desplazado</label>'
             string_div = string_div+'</div>'
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 26%; vertical-align: top; margin-right: 1%">'
             string_div = string_div+'<label style="font-size: 0.8em">Corte Especial</label>'
             if (tintas_flexo[i].nombre_tintate_especial === ""){ 
             string_div = string_div+'<input type="text" class="form-control" id="corteespecial_'+i+'" style="font-size: 0.8em" value="No Aplica" readonly>'
             } else {
             string_div = string_div+'<input type="text" class="form-control" id="corteespecial_'+i+'" style="font-size: 0.8em" value="'+tintas_flexo[i].corte_especial+'" readonly>'
                 
             }
             string_div = string_div+'</div>'
             string_div = string_div+'<div  class="form-group" style="display:inline-block; width: 26%; vertical-align: top;">'
             string_div = string_div+'<label style="font-size: 0.8em">Desa. Especial</label>'
             if (tintas_flexo[i].desarollo_especial === ""){ 
             string_div = string_div+'<input type="text" class="form-control" id="desaespecial_'+i+'" style="font-size: 0.8em" value="No Aplica" readonly>'
             } else {
             string_div = string_div+'<input type="text" class="form-control" id="desaespecial_'+i+'" style="font-size: 0.8em" value="'+tintas_flexo[i].desarollo_especial+'" readonly>'
                 
             }
             string_div = string_div+'</div>'
            
             string_div = string_div+"</div>"
             
             cell1_2.innerHTML = string_div
           
              qtasrow = qtasrow +1
            var div_tipocorte = "tipocorte_"+i
           document.getElementById(div_tipocorte).value = tintas_flexo[i].tipo_corte
            var div_tipoarmado = "tipoarmado_"+i
            document.getElementById(div_tipoarmado).value = tintas_flexo[i].armado
            
                
            }
            
   
        numero_cilindro = 0
   
    }
    
    
    	function mostraDisclosure(){
  	 console.log(event.srcElement.id)
        var linha = parseInt(event.srcElement.id)+1
        
        var table = document.getElementById("tabela_receitas_flexo")
  
        if (table.rows[linha].children[0].style.display == "none"){
            table.rows[linha].children[0].style = "background-color: #EEE;"
            table.rows[linha].children[0].colSpan = 14
        } else {
            table.rows[linha].children[0].style = "display: none;" 
        }
        
      }
    
    function cambia_seproduce(){
      var linha = parseInt(event.srcElement.id)
      if (tintas_flexo[linha].producir === false){
          tintas_flexo[linha].producir = true
      } else {
          tintas_flexo[linha].producir = false
      }
      preenche_tabela_receita()
    }
    
   
    
    
    function cambia_tipocorte(){
      var linha = event.srcElement.id
      var linha_array = linha.split("_")
      var div_corteespecial= "corteespecial_"+linha_array[1]
      var div_desaespecial= "desaespecial_"+linha_array[1]
      
      if (document.getElementById(linha).value == "Normal"){
          document.getElementById(div_corteespecial).readOnly = true
          document.getElementById(div_desaespecial).readOnly = true
      } else {
        
          document.getElementById(div_corteespecial).readOnly = false
          document.getElementById(div_desaespecial).readOnly = false  
          document.getElementById(div_corteespecial).value = "No Aplica"
          document.getElementById(div_desaespecial).value = "No Aplica"
      }
    }
    
   function move_acima(){
             var linha = parseInt(event.srcElement.id)
        var mover = []
       var outras = []
       
       if (tintas_flexo[linha].doble_copia === false){
       var nome_cor = tintas_flexo[linha].nombre_tinta
       var eh_igual = new RegExp(".*"+nome_cor+".*")
       for (i=linha;i<tintas_flexo.length;i++){
           if (eh_igual.test(tintas_flexo[i].nombre_tinta) === true){
               mover.push([tintas_flexo[i],i])
           } 
           
       }
       for (i=0;i<linha;i++){
           
               outras.push([tintas_flexo[i],i])
           
           
       }
       }
       
       outras = outras.reverse()
       
       var encontra_proxima = []
       
       for (i=0;i<outras.length;i++){
           if (outras[i][0].doble_copia === false){
               encontra_proxima.push(outras[i])
           }
       }
       
       var busca_ultima = encontra_proxima[0][1]
       
       
       for (i=0;i<mover.length;i++){
        if (linha > 0){
   
            var linha_final = busca_ultima+i
            console.log("Mover de "+mover[i][1]+" para "+linha_final)
       array_move(tintas_flexo,mover[i][1],linha_final)
             
             
        }
       }
       
       
       
      // var linha_destino = linha-1
      // if (linha > 0){
      // array_move(tintas_flexo,linha,linha_destino)
       
       
       preenche_tabela_receita()
      // }
      
        }
        
        function move_abaixo(){
             var linha = parseInt(event.srcElement.id)
          //   linha = parseInt(linha.split("_")[1])
       console.log(linha)
       var mover = []
       var outras = []
       if (tintas_flexo[linha].doble_copia === false){
       var nome_cor = tintas_flexo[linha].nombre_tinta
       var eh_igual = new RegExp(".*"+nome_cor+".*")
       for (i=linha;i<tintas_flexo.length;i++){
           if (eh_igual.test(tintas_flexo[i].nombre_tinta) === true){
               mover.push([tintas_flexo[i],i])
           } else {
               outras.push([tintas_flexo[i],i])
           }
           
           
       }
       var busca_ultima = outras[0][0].nombre_tinta
       var eh_proxima = new RegExp(".*"+busca_ultima+".*")
       var proxima_cor = []
       for (i=outras[0][1];i<tintas_flexo.length;i++){
           if (eh_proxima.test(tintas_flexo[i].nombre_tinta) === true){
               proxima_cor.push(tintas_flexo[i])
           }
       }
       
       
       mover = mover.reverse()
       //console.log(mover)
       console.log("A proxima cor")
       console.log(proxima_cor.length)
      for (i=0;i<mover.length;i++){
       // if (posicao_ultimo < tintas_flexo.length-1){
   
            var linha_final = mover[i][1]+proxima_cor.length
            console.log("Mover de "+mover[i][1]+" para "+linha_final)
        array_move(tintas_flexo,mover[i][1],linha_final)
             
             
        }
    //   }
      //var linha_destino = linha+1
      // if (linha < tintas_flexo.length-1){
      // array_move(tintas_flexo,linha,linha_destino)
       
       
      preenche_tabela_receita()
      // }
       }
      
        }
        
       
          function move_acima2(){
        var linha = parseInt(event.srcElement.id)
        var mover = []
       var outras = []
       
       if (tintas_flexo[linha].doble_copia === false){
       var nome_cor = tintas_flexo[linha].nombre_tinta
       var eh_igual = new RegExp(".*"+nome_cor+".*")
       for (i=linha;i<tintas_flexo.length;i++){
           if (eh_igual.test(tintas_flexo[i].nombre_tinta) === true){
               mover.push([tintas_flexo[i],i])
           } 
           
       }
       for (i=0;i<linha;i++){
           
               outras.push([tintas_flexo[i],i])
           
           
       }
       }
       
       outras = outras.reverse()
       
       var encontra_proxima = []
       
       for (i=0;i<outras.length;i++){
           if (outras[i][0].doble_copia === false){
               encontra_proxima.push(outras[i])
           }
       }
       
       var busca_ultima = encontra_proxima[0][1]
       
       
       for (i=0;i<mover.length;i++){
        if (linha > 0){
   
            var linha_final = busca_ultima+i
            console.log("Mover de "+mover[i][1]+" para "+linha_final)
       array_move(tintas_flexo,mover[i][1],linha_final)
             
             
        }
       }
       
       
       
      // var linha_destino = linha-1
      // if (linha > 0){
      // array_move(tintas_flexo,linha,linha_destino)
       
       
       preenche_tabela_receita2()
      // }
      
        }
        
        function move_abaixo2(){
             var linha = parseInt(event.srcElement.id)
          //   linha = parseInt(linha.split("_")[1])
       console.log(linha)
       var mover = []
       var outras = []
       if (tintas_flexo[linha].doble_copia === false){
       var nome_cor = tintas_flexo[linha].nombre_tinta
       var eh_igual = new RegExp(".*"+nome_cor+".*")
       for (i=linha;i<tintas_flexo.length;i++){
           if (eh_igual.test(tintas_flexo[i].nombre_tinta) === true){
               mover.push([tintas_flexo[i],i])
           } else {
               outras.push([tintas_flexo[i],i])
           }
           
           
       }
       var busca_ultima = outras[0][0].nombre_tinta
       var eh_proxima = new RegExp(".*"+busca_ultima+".*")
       var proxima_cor = []
       for (i=outras[0][1];i<tintas_flexo.length;i++){
           if (eh_proxima.test(tintas_flexo[i].nombre_tinta) === true){
               proxima_cor.push(tintas_flexo[i])
           }
       }
       
       
       mover = mover.reverse()
       //console.log(mover)
       console.log("A proxima cor")
       console.log(proxima_cor.length)
      for (i=0;i<mover.length;i++){
       // if (posicao_ultimo < tintas_flexo.length-1){
   
            var linha_final = mover[i][1]+proxima_cor.length
            console.log("Mover de "+mover[i][1]+" para "+linha_final)
        array_move(tintas_flexo,mover[i][1],linha_final)
             
             
        }
    //   }
      //var linha_destino = linha+1
      // if (linha < tintas_flexo.length-1){
      // array_move(tintas_flexo,linha,linha_destino)
       
       
      preenche_tabela_receita2()
      // }
       }
      
        }
       
       function coloca_cameron(){
           var linha = event.srcElement.id
           
           for (i=0;i<tintas_flexo.length;i++){
               if (tintas_flexo[i].nombre_tinta === linha){
                   tintas_flexo[i].cameron = document.getElementById(linha).checked
               }
           }
       }
       
       function coloca_fotocelula(){
           var linha = event.srcElement.id
           
           for (i=0;i<tintas_flexo.length;i++){
               if (tintas_flexo[i].nombre_tinta === linha){
                   
                   tintas_flexo[i].fotocelula = document.getElementById(linha).checked
               }
           }
       }
      
        
    
    
    
    
    
    
    
     function apagarTinta(){
    var linha = event.srcElement.id
    console.log(linha)
    var linha_array = linha.split("_")
    
    var tira = tintas_flexo.splice(parseInt(linha_array[1]),1)
    
    
    
       
        preenche_tabela_receita()

        
     }
     
    
     function editarTinta(){
     var linha = event.srcElement.id
    console.log(linha)
    var linha_array = linha.split("_")
   
    var div_lineatura = "tinta_"+linha_array[1]
    var div_trama = "trama_"+linha_array[1]
    var div_angulo = "angulo_"+linha_array[1]
    var div_cantidad = "cantidad_"+linha_array[1]
     var div_tipoarmado= "tipoarmado_"+linha_array[1]
     var div_tipocorte= "tipocorte_"+linha_array[1]
     var div_desplazado= "desplazado_"+linha_array[1]
      var div_corteespecial= "corteespecial_"+linha_array[1]
      var div_desaespecial= "desaespecial_"+linha_array[1]
      var div_codigobarras = "codigobarras_"+linha_array[1]
      var div_pieimprenta = "pieimprenta_"+linha_array[1]
      var div_fotocelula = "fotocelula_"+linha_array[1]
      var div_linearefile = "linearefile_"+linha_array[1]
      var div_herramental = "herramental_"+linha_array[1]
      var div_tramasolido = "tramasolido_"+linha_array[1]
    
    if (document.getElementById(div_lineatura).readOnly === true){
        document.getElementById(div_lineatura).readOnly = false
        document.getElementById(div_trama).readOnly = false
        document.getElementById(div_herramental).readOnly = false
        document.getElementById(div_angulo).readOnly = false
        document.getElementById(div_cantidad).readOnly = false
        document.getElementById(div_tramasolido).readOnly = false
        document.getElementById(div_codigobarras).disabled = false
        document.getElementById(div_pieimprenta).disabled = false
        document.getElementById(div_fotocelula).disabled = false
        document.getElementById(div_linearefile).disabled = false
        var selectArmado = document.getElementById(div_tipoarmado)
        for (i=0;i<selectArmado.options.length;i++){
            selectArmado.options[i].disabled = false
        }
        selectArmado.style.backgroundColor = "white"
       var selectTipocorte = document.getElementById(div_tipocorte)
       for (i=0;i<selectTipocorte.options.length;i++){
            selectTipocorte.options[i].disabled = false
        }
        selectTipocorte.style.backgroundColor = "white"
        document.getElementById(div_desplazado).disabled = false
         document.getElementById(div_corteespecial).readOnly = false
         document.getElementById(div_desaespecial).readOnly = false
       
    } else {
         document.getElementById(div_lineatura).readOnly = true
        document.getElementById(div_trama).readOnly = true
        document.getElementById(div_angulo).readOnly = true
        document.getElementById(div_cantidad).readOnly = true
         document.getElementById(div_herramental).readOnly = true
        
        document.getElementById(div_tramasolido).readOnly = true
        document.getElementById(div_codigobarras).disabled = true
        document.getElementById(div_pieimprenta).disabled = true
        document.getElementById(div_fotocelula).disabled = true
        document.getElementById(div_linearefile).disabled = true
        
        var selectArmado = document.getElementById(div_tipoarmado)
        for (i=0;i<selectArmado.options.length;i++){
            selectArmado.options[i].disabled = true
            
        }
        selectArmado.style.backgroundColor = "#e9ecef"
       var selectTipocorte = document.getElementById(div_tipocorte)
       for (i=0;i<selectTipocorte.options.length;i++){
            selectTipocorte.options[i].disabled = true
        }
        selectTipocorte.style.backgroundColor = "#e9ecef"
        document.getElementById(div_desplazado).disabled = true
         document.getElementById(div_corteespecial).readOnly = true
         document.getElementById(div_desaespecial).readOnly = true
        
        var cual_tinta = parseInt(linha_array[1])
        tintas_flexo[cual_tinta]["lineatura_flexo"] = document.getElementById(div_lineatura).value
        tintas_flexo[cual_tinta]["angulo_flexo"] = document.getElementById(div_angulo).value
        tintas_flexo[cual_tinta]["trama_flexo"] = document.getElementById(div_trama).value
        tintas_flexo[cual_tinta]["cantidad_planchas"] = document.getElementById(div_cantidad).value
        tintas_flexo[cual_tinta]["tipo_armado"] = document.getElementById(div_tipoarmado).value
        tintas_flexo[cual_tinta]["tipo_corte"] = document.getElementById(div_tipocorte).value
        tintas_flexo[cual_tinta]["codigo_barras"] = document.getElementById(div_codigobarras).checked
        tintas_flexo[cual_tinta]["pie_imprenta"] = document.getElementById(div_pieimprenta).checked
        tintas_flexo[cual_tinta]["fotocelula"] = document.getElementById(div_fotocelula).checked
        tintas_flexo[cual_tinta]["linea_refile"] = document.getElementById(div_linearefile).checked
        tintas_flexo[cual_tinta]["herramental"] = document.getElementById(div_herramental).value
        tintas_flexo[cual_tinta]["trama_solidos_flexo"] = document.getElementById(div_tramasolido).value
        
    }
    
    }
    
    
    
      function duplicarTinta(){
           var linha = event.srcElement.id
           var linha_array = parseInt(linha.split("_")[1])
          console.log(linha_array)
          var para_duplicar = tintas_flexo[linha_array]
          var outro = tintas_flexo[linha_array]
          var nome_cor = para_duplicar.nombre_tinta.replace(" DC","").replace(" DC2","").replace(" DC3","").replace(" DC4","")
          var busca_outras = new RegExp(".*"+nome_cor+".*")
          var existem = 0
          for (i=0;i<tintas_flexo.length;i++){
              if (busca_outras.test(tintas_flexo[i].nombre_tinta) === true){
                  existem = existem+1
              }
          }
          var total = existem
          if (total > 1){
          var numero = "DC"+total
          } else {
            var numero = "DC"
          }
          
           var info_tinta = {}
         info_tinta["nombre_tinta"] = nome_cor+" "+numero
         info_tinta["lineatura_flexo"] = para_duplicar.lineatura_flexo
        
        info_tinta["angulo_flexo"] = para_duplicar.angulo_flexo
        info_tinta["trama_flexo"] = para_duplicar.trama_flexo
        info_tinta["cantidad_planchas"] = para_duplicar.cantidad_planchas
        info_tinta["tipo_armado"] = para_duplicar.tipo_armado
        info_tinta["tipo_corte"] = para_duplicar.tipo_corte
        info_tinta["codigo_barras"] = para_duplicar.codigobarras
        info_tinta["pie_imprenta"] = para_duplicar.pieimprenta
        info_tinta["fotocelula"] = para_duplicar.fotocelula
        info_tinta["linea_refile"] = para_duplicar.linearefile
        info_tinta["herramental"] = para_duplicar.herramental
        info_tinta["trama_solidos_flexo"] = para_duplicar.trama_solidos_flexo
        info_tinta["armado"] = para_duplicar.armado
        info_tinta["producir"] = true
        info_tinta["hex"] = para_duplicar.hex
        info_tinta["doble_copia"] = true

         
          
          tintas_flexo.splice(linha_array+1, 0, info_tinta)
          
          preenche_tabela_receita()
      }
      
      function duplicarTinta2(){
           var linha = event.srcElement.id
           var linha_array = parseInt(linha.split("_")[1])
          console.log(linha_array)
          var para_duplicar = tintas_flexo[linha_array]
          var outro = tintas_flexo[linha_array]
          var nome_cor = para_duplicar.nombre_tinta.replace(" DC","").replace(" DC2","").replace(" DC3","").replace(" DC4","")
          var busca_outras = new RegExp(".*"+nome_cor+".*")
          var existem = 0
          for (i=0;i<tintas_flexo.length;i++){
              if (busca_outras.test(tintas_flexo[i].nombre_tinta) === true){
                  existem = existem+1
              }
          }
          var total = existem
          if (total > 1){
          var numero = "DC"+total
          } else {
            var numero = "DC"
          }
          
           var info_tinta = {}
         info_tinta["nombre_tinta"] = nome_cor+" "+numero
        info_tinta["diametro"] = para_duplicar.diametro
        info_tinta["distorcion"] = para_duplicar.distorcion
        info_tinta["en_planta"] = para_duplicar.en_planta
        info_tinta["herciline"] = para_duplicar.herciline
        info_tinta["alma"] = para_duplicar.alma
        info_tinta["tabla"] = para_duplicar.tabla
        info_tinta["tabla_2"] = para_duplicar.tabla_2
        info_tinta["tipo_grabacion"] = para_duplicar.tipo_grabacion
        info_tinta["observaciones"] = para_duplicar.observaciones
        info_tinta["fotocelula"] = para_duplicar.fotocelula
        info_tinta["pie_imprenta"] = para_duplicar.pie_imprenta
        info_tinta["codigo_barras"] = para_duplicar.codigo_barras
        info_tinta["hex"] = para_duplicar.hex
        info_tinta["producir"] = para_duplicar.producir
        info_tinta["doble_copia"] = true
        
        
        

         
          
          tintas_flexo.splice(linha_array+1, 0, info_tinta)
          
          preenche_tabela_receita2()
      }
    
    
       function selecciona_columna(){
       var linha = event.srcElement.id
       var linha_array = linha.split("-")[1]
       var nome_linha = linha_array.replace("_","")
       
       for (i=0;i<tintas_flexo.length;i++){
           var linha_mudar = nome_linha+"_"+i
           if (document.getElementById(linha).checked === true){
               tintas_flexo[i][linha_array] = true
               document.getElementById(linha_mudar).checked = true
           } else {
               tintas_flexo[i][linha_array] = false
               document.getElementById(linha_mudar).checked = false
           }
       }
     //  preenche_tabela_receita()
    }
   
    
    
        function editar_todastintas(){
   for (j=0;j<tintas_flexo.length;j++){
    var div_lineatura = "tinta_"+j
    var div_trama = "trama_"+j
    var div_angulo = "angulo_"+j
    var div_cantidad = "cantidad_"+j
     var div_tipoarmado= "tipoarmado_"+j
     var div_tipocorte= "tipocorte_"+j
     var div_desplazado= "desplazado_"+j
      var div_corteespecial= "corteespecial_"+j
      var div_desaespecial= "desaespecial_"+j
      var div_codigobarras = "codigobarras_"+j
      var div_pieimprenta = "pieimprenta_"+j
      var div_fotocelula = "fotocelula_"+j
      var div_linearefile = "linearefile_"+j
      var div_herramental = "herramental_"+j
      var div_tramasolido = "tramasolido_"+j
      
   
    
    if (document.getElementById(div_lineatura).readOnly === true){
        document.getElementById(div_lineatura).readOnly = false
        document.getElementById(div_trama).readOnly = false
        document.getElementById(div_herramental).readOnly = false
        document.getElementById(div_angulo).readOnly = false
        document.getElementById(div_cantidad).readOnly = false
        document.getElementById(div_tramasolido).readOnly = false
        document.getElementById(div_codigobarras).disabled = false
        document.getElementById(div_pieimprenta).disabled = false
        document.getElementById(div_fotocelula).disabled = false
        document.getElementById(div_linearefile).disabled = false
        var selectArmado = document.getElementById(div_tipoarmado)
        for (i=0;i<selectArmado.options.length;i++){
            selectArmado.options[i].disabled = false
        }
        selectArmado.style.backgroundColor = "white"
       var selectTipocorte = document.getElementById(div_tipocorte)
       for (i=0;i<selectTipocorte.options.length;i++){
            selectTipocorte.options[i].disabled = false
        }
        selectTipocorte.style.backgroundColor = "white"
        document.getElementById(div_desplazado).disabled = false
         document.getElementById(div_corteespecial).readOnly = false
         document.getElementById(div_desaespecial).readOnly = false
       
    } else {
         document.getElementById(div_lineatura).readOnly = true
        document.getElementById(div_trama).readOnly = true
        document.getElementById(div_angulo).readOnly = true
        document.getElementById(div_cantidad).readOnly = true
         document.getElementById(div_herramental).readOnly = true
        
        document.getElementById(div_tramasolido).readOnly = true
        document.getElementById(div_codigobarras).disabled = true
        document.getElementById(div_pieimprenta).disabled = true
        document.getElementById(div_fotocelula).disabled = true
        document.getElementById(div_linearefile).disabled = true
        
        var selectArmado = document.getElementById(div_tipoarmado)
        for (i=0;i<selectArmado.options.length;i++){
            selectArmado.options[i].disabled = true
            
        }
        selectArmado.style.backgroundColor = "#e9ecef"
       var selectTipocorte = document.getElementById(div_tipocorte)
       for (i=0;i<selectTipocorte.options.length;i++){
            selectTipocorte.options[i].disabled = true
        }
        selectTipocorte.style.backgroundColor = "#e9ecef"
        document.getElementById(div_desplazado).disabled = true
         document.getElementById(div_corteespecial).readOnly = true
         document.getElementById(div_desaespecial).readOnly = true
        
       // var cual_tinta = parseInt(linha_array[1])
        tintas_flexo[j]["lineatura_flexo"] = document.getElementById(div_lineatura).value
        tintas_flexo[j]["angulo_flexo"] = document.getElementById(div_angulo).value
        tintas_flexo[j]["trama_flexo"] = document.getElementById(div_trama).value
        tintas_flexo[j]["cantidad_planchas"] = document.getElementById(div_cantidad).value
        tintas_flexo[j]["tipo_armado"] = document.getElementById(div_tipoarmado).value
        tintas_flexo[j]["tipo_corte"] = document.getElementById(div_tipocorte).value
        tintas_flexo[j]["codigobarras"] = document.getElementById(div_codigobarras).checked
        tintas_flexo[j]["pieimprenta"] = document.getElementById(div_pieimprenta).checked
        tintas_flexo[j]["fotocelula"] = document.getElementById(div_fotocelula).checked
        tintas_flexo[j]["linearefile"] = document.getElementById(div_linearefile).checked
        tintas_flexo[j]["herramental"] = document.getElementById(div_herramental).value
        tintas_flexo[j]["trama_solidos_flexo"] = document.getElementById(div_tramasolido).value
        
    }
   }
    
    }
    
    
    
     function selecciona_columna2(){
       var linha = event.srcElement.id
       var linha_array = linha.split("-")[1]
         var nome_linha = linha_array.replace("_","")
     
       for (i=0;i<tintas_flexo.length;i++){
          var linha_mudar = nome_linha+"_"+i
        
           if (document.getElementById(linha).checked === true){
               tintas_flexo[i][linha_array] = true
               document.getElementById(linha_mudar).checked = true
           } else {
               tintas_flexo[i][linha_array] = false
               document.getElementById(linha_mudar).checked = false
           }
       }
    //    preenche_tabela_receita2()
    }
    
    
    
 function editar_todastintas2(){
   
   
   for (j=0;j<tintas_flexo.length;j++){
  
    var div_alma = "alma_"+j
    var div_diametro = "diametro_"+j
    var div_grabacion = "tipo_grabacion_"+j
    var div_tabla = "tabla_"+j
    var div_tabla2 = "tabla2_"+j
    var div_enplanta = "enplanta_"+j
    var div_observaciones = "observacionescilindro_"+j
    var div_codigobarras = "codigobarras_"+j
      var div_pieimprenta = "pie_imprenta_"+j
      var div_fotocelula = "fotocelula_"+j
      
    
    if (document.getElementById(div_alma).readOnly === true){
        document.getElementById(div_alma).readOnly = false
        document.getElementById(div_diametro).readOnly = false
        document.getElementById(div_grabacion).readOnly = false
        document.getElementById(div_tabla).readOnly = false
        document.getElementById(div_tabla2).readOnly = false
        document.getElementById(div_enplanta).readOnly = false
        document.getElementById(div_observaciones).readOnly = false
        document.getElementById(div_codigobarras).disabled = false
        document.getElementById(div_pieimprenta).disabled = false
        document.getElementById(div_fotocelula).disabled = false
       
    } else {
        document.getElementById(div_alma).readOnly = true
        document.getElementById(div_diametro).readOnly = true
        document.getElementById(div_grabacion).readOnly = true
        document.getElementById(div_tabla).readOnly = true
        document.getElementById(div_tabla2).readOnly = true
        document.getElementById(div_enplanta).readOnly = true
        
        document.getElementById(div_observaciones).readOnly = true
        document.getElementById(div_codigobarras).disabled = true
        document.getElementById(div_pieimprenta).disabled = true
        document.getElementById(div_fotocelula).disabled = true
       
        
       // var cual_tinta = parseInt(linha_array[1])
        tintas_flexo[j]["alma"] = document.getElementById(div_alma).value
        tintas_flexo[j]["diametro"] = document.getElementById(div_diametro).value
        tintas_flexo[j]["tipo_grabacion"] = document.getElementById(div_grabacion).value
        tintas_flexo[j]["tabla"] = document.getElementById(div_tabla).value
        tintas_flexo[j]["tabla_2"] = document.getElementById(div_tabla2).value
        tintas_flexo[j]["en_planta"] = document.getElementById(div_enplanta).value
        tintas_flexo[j]["codigobarras"] = document.getElementById(div_codigobarras).checked
        tintas_flexo[j]["pieimprenta"] = document.getElementById(div_pieimprenta).checked
        tintas_flexo[j]["fotocelula"] = document.getElementById(div_fotocelula).checked
        tintas_flexo[j]["observaciones"] = document.getElementById(div_observaciones).value
        
    }
   }
    
    }
  </script>
  <script>
  
  
  
        function muda_cor(){
    if (document.getElementById("valor_L").value != "" &&
        document.getElementById("valor_A").value != "" &&
        document.getElementById("valor_B").value != ""){
    
      var o_L = parseInt(document.getElementById("valor_L").value)
       var o_A = parseInt(document.getElementById("valor_A").value)
        var o_B = parseInt(document.getElementById("valor_B").value)
     
        
    var resultado = chroma.lab(o_L,o_A,o_B)
     var valores_reg = resultado._rgb 
     var hex = rgbToHex(parseInt(valores_reg[0]),parseInt(valores_reg[1]),parseInt(valores_reg[2]))
     var valorlch = chroma.lab(o_L,o_A,o_B).lch()
     document.getElementById("acor").style = "background-color: "+hex+"; width: 30px; border: none; display: inline-block;"
     document.getElementById("nombre_tinta").value = valorlch[0].toFixed(0)+"_"+valorlch[1].toFixed(0)+"_"+valorlch[2].toFixed(0)+"-"+nombre_color_actual
  
  
   setTimeout(function(){document.getElementById("div_valoresLAB").style.display = "none";document.getElementById("valor_L").value = "";
                        document.getElementById("valor_A").value = "";document.getElementById("valor_B").value = "" },2000)
            
            
        } else {
      document.getElementById("nombre_tinta").value = nombre_color_actual
      
      
  }
  
        }
  
  var nombre_color_actual = ""
    function seleciona_pantone(){
        
        var busca_tinta = api.custom_objects.list_with_options("PantoneColor",["nome","equal to",document.getElementById("nombre_tinta").value]).results
        document.getElementById("div_valoresLAB").style.display = "none"
        if (busca_tinta.length > 0){
            
            
             document.getElementById("acor").style = "background-color: "+busca_tinta[0].cor+"; width: 30px; border: none; display: inline-block;"
           
            
        } else {
            document.getElementById("div_valoresLAB").style.display = "inline-block"
            nombre_color_actual = document.getElementById("nombre_tinta").value
        }
    }
    
    
    
     function muda_cor2(){
    if (document.getElementById("valor_L2").value != "" &&
        document.getElementById("valor_A2").value != "" &&
        document.getElementById("valor_B2").value != ""){
    
      var o_L = parseInt(document.getElementById("valor_L2").value)
       var o_A = parseInt(document.getElementById("valor_A2").value)
        var o_B = parseInt(document.getElementById("valor_B2").value)
     
        
    var resultado = chroma.lab(o_L,o_A,o_B)
     var valores_reg = resultado._rgb 
     var hex = rgbToHex(parseInt(valores_reg[0]),parseInt(valores_reg[1]),parseInt(valores_reg[2]))
     var valorlch = chroma.lab(o_L,o_A,o_B).lch()
     document.getElementById("acor2").style = "background-color: "+hex+"; width: 30px; border: none; display: inline-block;"
     document.getElementById("nombre_tinta2").value = valorlch[0].toFixed(0)+"_"+valorlch[1].toFixed(0)+"_"+valorlch[2].toFixed(0)+"-"+nombre_color_actual
  
  
   setTimeout(function(){document.getElementById("div_valoresLAB2").style.display = "none";document.getElementById("valor_L2").value = "";
                        document.getElementById("valor_A2").value = "";document.getElementById("valor_B2").value = "" },2000)
            
            
        } else {
      document.getElementById("nombre_tinta2").value = nombre_color_actual2
      
      
  }
  
        }
    
     var nombre_color_actual2 = ""
    function seleciona_pantone2(){
        
        var busca_tinta = api.custom_objects.list_with_options("PantoneColor",["nome","equal to",document.getElementById("nombre_tinta2").value]).results
        document.getElementById("div_valoresLAB2").style.display = "none"
        if (busca_tinta.length > 0){
            
            
             document.getElementById("acor2").style = "background-color: "+busca_tinta[0].cor+"; width: 30px; border: none; display: inline-block;"
           
            
        } else {
            document.getElementById("div_valoresLAB2").style.display = "inline-block"
            nombre_color_actual2 = document.getElementById("nombre_tinta2").value
        }
    }
    
    

  
  
    </script>
 
  	
<script>
  
    
  
</script>
 



<script>

var n_butonsTimeOut = 0;
var workButonsTimeOut
var butonsTimeOut = function ()
{   n_butonsTimeOut++;
    buttonsControls()
    console.log("Opa olha eu aqui ..."+n_butonsTimeOut)
    if (n_butonsTimeOut>300)
    {   //workButonsTimeOut = setTimeout(butonsTimeOut, 5000); // Roda apenas 1x
      clearInterval(workButonsTimeOut)
      //workButonsTimeOut = setInterval(butonsTimeOut, 6000)
    }
}

function buttonsControls(st)
    {  if (st != undefined) 
        { 
        }
        else {st=""}
        success = document.getElementsByClassName("success")
        statuses = document.getElementsByClassName("status")
        console.log(success.length)
        console.log(statuses.length)
        botaoenv = document.getElementById("registerButton")
        botaoup = document.getElementsByClassName("upload_button")
        if ((success.length==2) && (statuses.length>=0))
        { if(success[0].innerText.indexOf("Completed")>=0)
          { botaoenv.style.display = "inline-block"
            botaoup[0].style.display = "inline-block"
          }      
        }   
        if ((success.length<=1) && (statuses.length<0))
        { 
            botaoenv.style.display = "none"
            botaoup[0].style.display = "inline-block"
            botaoup[0].style.background = "none"  
        } 
    }
    
//document.getElementById("hora_email").max = dateFormat(new Date(),"yyyy-mm-dd")

</script>


<script>
     var fotocelulas = []
  	    
  	    function adiciona_fotocelula(){
  	         var linha = event.srcElement.id
  	         console.log(linha)
  	        var existe = false
  	        for (i=0;i<fotocelulas.length;i++){
  	            if (fotocelulas[i] == linha){
  	                existe = true
  	            }
  	        }
  	        
  	        console.log(existe)
  	        if (existe === false){
  	            var objeto = document.getElementById(linha)
                 objeto.style.background = "black"
                 fotocelulas.push(linha)
  	        } else {
  	            for (i=0;i<fotocelulas.length;i++){
  	                if (fotocelulas[i] == linha){
  	                    var tira = fotocelulas.splice(i,1)
  	                    var objeto = document.getElementById(linha)
                 objeto.style.background = "lightgray"
  	                    
  	                }
  	            }
  	        }
  	        
  	        
  	        
  	    }
</script>
    <script type="text/javascript" src="js/jquery.multi-select.js"></script>
<script>
     $('#polimeros_con').multiSelect()
     $('#producto').multiSelect()
     $('#requiere').multiSelect()
</script>
 <script>
     function verifica_facturable(){
      var que_cliente = api.custom_objects.list_with_options("AR-BOSISIO_clientes",["DENOMINACION","equal to",document.getElementById("facturable_a").value],[],["lista_precios"]).results   
      console.log(que_cliente.length)
      
      if (que_cliente.length > 0){
      
      $("#lista_precios").find('option').not(':first').remove()
      
      var nombres_lista = []
      
      for (i=0;i<que_cliente[0].lista_precios.length;i++){
          nombres_lista.push(que_cliente[0].lista_precios[i].NombreLP)
      }
      var lista_unicos = nombres_lista.filter(onlyUnique)
      
      var selectListaPrecio = document.getElementById("lista_precios")
   
   for (i=0;i<lista_unicos.length;i++){
      var opt = document.createElement('option');
        opt.value = lista_unicos[i];
        opt.innerHTML = lista_unicos[i];
        selectListaPrecio.appendChild(opt);
   }
      }
         
     }
 </script> 	
  
<script>
    function existe_pieimprenta(){
        if (document.getElementById("pie_imprenta_si").checked === true){
            document.getElementById("div_pie_imprenta").style.display = "inline-block"
        } else {
            document.getElementById("div_pie_imprenta").style.display = "none"
        }
    }
    
    function liberar_preprensa(){
        if (document.getElementById("liberado_preprensa").value === "Si"){
            document.getElementById("liberado_preprensa").value = "No"
            document.getElementById("liberado_preprensa").style.backgroundColor = "red"
        } else {
            document.getElementById("liberado_preprensa").value = "Si"
            document.getElementById("liberado_preprensa").style.backgroundColor = "green"
        }
    }
    
    
    
      function existe_linearefile(){
        if (document.getElementById("linea_refile_si").checked === true){
            document.getElementById("div_anchopie").style.display = "inline-block"
            document.getElementById("div_ubicacionpie").style.display = "inline-block"
        } else {
            document.getElementById("div_anchopie").style.display = "none"
            document.getElementById("div_ubicacionpie").style.display = "none"
            document.getElementById("ancho_linearefile").value = ""
            document.getElementById("posicion_linearefile").value = ""
        }
    }
    
    
    
      function existe_codigobarras(){
        if (document.getElementById("codigo_barras_si").checked === true){
            document.getElementById("div_numerocodigo").style.display = "inline-block"
            document.getElementById("div_magcodigo").style.display = "inline-block"
            document.getElementById("div_bwrcodigo").style.display = "inline-block"
            document.getElementById("div_caladocodigo").style.display = "inline-block"
            
        } else {
            document.getElementById("div_numerocodigo").style.display = "none"
            document.getElementById("div_magcodigo").style.display = "none"
            document.getElementById("div_bwrcodigo").style.display = "none"
            document.getElementById("div_caladocodigo").style.display = "none"
        }
    }
    
    function existe_textolegal(){
       if (document.getElementById("textolegal_si").checked === true){
            document.getElementById("div_textoslegales").style.display = "inline-block"
        } else {
            document.getElementById("div_textoslegales").style.display = "none"
        } 
        
        
    }
  
    function cambia_tipo_trabajo(){
        if (document.getElementById("tipo_trabajo").value == "CAMBIOS" || document.getElementById("tipo_trabajo").value == "REPOSICIÓN POR RECLAMO" || document.getElementById("tipo_trabajo").value == "REPOSICIÓN SIN CAMBIOS"){
            document.getElementById("div_ordenanterior").style.display = "inline-block"
             document.getElementById("div_codigoanterior").style.display = "inline-block"
        } else {
            document.getElementById("div_ordenanterior").style.display = "none"
             document.getElementById("div_codigoanterior").style.display = "none"
        }
    }
</script>

<script>

   
    function muda_tipoordem(){
        if (document.getElementById("tipo_ordem").value == "Huecograbado"){
            document.getElementById("div_colores_hueco").style.display = "inline-block"
            document.getElementById("div_lista_hueco").style.display = "inline-block"
            document.getElementById("div_colores_flexo").style.display = "none"
            document.getElementById("div_lista_flexo").style.display = "none"
            document.getElementById("deformacionmedida_desarollo").readOnly = false
            document.getElementById("deformacionfactor_desarollo").readOnly = true
            document.getElementById("div_medidadesarollo").style.width = "12%"
            document.getElementById("div_repeticionesdesarollo").style.width = "12%"
            document.getElementById("div_separacion").style.display = "inline-block"
        } else {
            document.getElementById("div_colores_hueco").style.display = "none"
             document.getElementById("div_lista_hueco").style.display = "none"
             document.getElementById("div_medidadesarollo").style.width = "19%"
            document.getElementById("div_repeticionesdesarollo").style.width = "19%"
            document.getElementById("div_separacion").style.display = "none"
           
            document.getElementById("div_colores_flexo").style.display = "inline-block"
            document.getElementById("div_lista_flexo").style.display = "inline-block"
            document.getElementById("deformacionmedida_desarollo").readOnly = true
            document.getElementById("deformacionfactor_desarollo").readOnly = false
        }
        
        var eltipo = document.getElementById("tipo_ordem").value
           var thecliente = document.getElementById("cliente").value
        
            var numeros_orden_antigos = api.custom_objects.list_with_options("AR-BOSISIO_calypso",["cliente","equal to",thecliente,'and',"tipo_trabajo","not equal to","REPOSICION SIN CAMBIOS","and","tipo_orden","equal to",eltipo],[],["numero_op","fecha_ingreso"]).results
           
           
              var options2=''; // variable to store the options
        for(var i = 0; i < numeros_orden_antigos.length; i++){
            
        options2 += '<option value="'+numeros_orden_antigos[i].numero_op+'" />';

        }
         document.getElementById('ordenes_anteriores').innerHTML = options2;
          
        
    }
    
    var selectPerfiles = []
    var apenasCMYK = new RegExp(".*CMYK")
    var apenasCMYKOVG = new RegExp(".*CMYKOGV")
    
    
    var thecmyk_profiles = []
        var thecmyko_profiles = []
        var thecmykog_profiles = []
        var thecmykogv_profiles = []
        var thecmykg_profiles = []
        var thecmykgv_profiles = []
        var thecmykov_profiles = []
        var thecmykv_profiles = []
   
    function es_gamaexpandida(){
        $("#informacion_impresion").find('option').not(':first').remove();
      
                 selectPerfiles = []
        
            document.getElementById("div_perfil").style.display = "inline-block"
               document.getElementById("nombre_perfil").value = ""
               // document.getElementById("nombre_perfil").style.color = "white"
            //    document.getElementById("nombre_perfil").style.backgroundColor = "green"
                document.getElementById("material").value = ""
                document.getElementById("sentido").value =""
                document.getElementById("maquina").value = ""
                document.getElementById("lineatura").value = ""
                document.getElementById("fabricante_polimero").value = ""
                document.getElementById("espesor_polimero").value = ""
                document.getElementById("fabricante_polimeroblanco").value = ""
                document.getElementById("fabricante_polimerobarniz").value = ""
                theveryoneprofile= ""
        
        // perfiles 7 tintas
        var indice_cmykogv = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKOGV") > -1){
                indice_cmykogv.push(i)
            }
        }
        indice_cmykogv.reverse()
        for (i=0;i<indice_cmykogv.length;i++){
            thecmykogv_profiles.push(perfiles[indice_cmykogv[i]])
             var tira = perfiles.splice(indice_cmykogv[i],1)
        }
        
        // perfils ORANGE GREEN
        
        var indice_cmykog = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKOG") > -1){
                indice_cmykog.push(i)
            }
        }
        indice_cmykog.reverse()
        for (i=0;i<indice_cmykog.length;i++){
            thecmykog_profiles.push(perfiles[indice_cmykog[i]])
             var tira = perfiles.splice(indice_cmykog[i],1)
        }
        
        //perfiles ORANGE VIOLET
        
         var indice_cmykov = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKOV") > -1){
                indice_cmykov.push(i)
            }
        }
        indice_cmykov.reverse()
        for (i=0;i<indice_cmykov.length;i++){
            thecmykov_profiles.push(perfiles[indice_cmykov[i]])
             var tira = perfiles.splice(indice_cmykov[i],1)
        }
        
         //perfiles GREEN VIOLET
        
         var indice_cmykgv = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKGV") > -1){
                indice_cmykgv.push(i)
            }
        }
        indice_cmykgv.reverse()
        for (i=0;i<indice_cmykgv.length;i++){
            thecmykgv_profiles.push(perfiles[indice_cmykgv[i]])
             var tira = perfiles.splice(indice_cmykgv[i],1)
        }
        
        // PERFILES ORANGE
        
          var indice_cmyko = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKO") > -1){
                indice_cmyko.push(i)
            }
        }
        indice_cmyko.reverse()
        for (i=0;i<indice_cmyko.length;i++){
            thecmyko_profiles.push(perfiles[indice_cmyko[i]])
             var tira = perfiles.splice(indice_cmyko[i],1)
        }
        
         // PERFILES GREEN
        
          var indice_cmykg = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKG") > -1){
                indice_cmykg.push(i)
            }
        }
        indice_cmykg.reverse()
        for (i=0;i<indice_cmykg.length;i++){
            thecmykg_profiles.push(perfiles[indice_cmykg[i]])
             var tira = perfiles.splice(indice_cmykg[i],1)
        }
        
         // PERFILES VIOLET
        
          var indice_cmykv = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYKV") > -1){
                indice_cmykv.push(i)
            }
        }
        indice_cmykv.reverse()
        for (i=0;i<indice_cmykv.length;i++){
            thecmykv_profiles.push(perfiles[indice_cmykv[i]])
             var tira = perfiles.splice(indice_cmykv[i],1)
        }
        
         // PERFILES CMYK
        
          var indice_cmyk = []
        for (i=0;i<perfiles.length;i++){
            if (perfiles[i].CODIGO.indexOf("CMYK") > -1){
                indice_cmyk.push(i)
            }
        }
        indice_cmyk.reverse()
        for (i=0;i<indice_cmyk.length;i++){
            thecmyk_profiles.push(perfiles[indice_cmyk[i]])
             var tira = perfiles.splice(indice_cmyk[i],1)
        }
       
       
       
       if (document.getElementById("gamaexpandida_si").checked === false){
           document.getElementById("color_gamaexpandida").value = "undefined"
           document.getElementById('div_gamaexpandida').style.display = "none"
           
           for (i=0;i<thecmyk_profiles.length;i++){
                console.log(thecmyk_profiles[i].CODIGO)
                if (thecmyk_profiles[i].CODIGO != undefined){
                   selectPerfiles.push([thecmyk_profiles[i].CODIGO.replaceAll("_CMYK",""),thecmyk_profiles[i].CODIGO])
                }
           }
           
       } else {
            document.getElementById("color_gamaexpandida").value = "undefined"
          document.getElementById("informacion_impresion").value = "undefined"
           document.getElementById('div_gamaexpandida').style.display = "inline-block"
           
           
         
       }
       var thecleanprofiles = selectPerfiles.filter(onlyUnique)
        
        var theselectPerfiles = document.getElementById("informacion_impresion")
       thecleanprofiles.sort() 
            for (var i = 0; i<selectPerfiles.length; i++){
            var opt = document.createElement('option');
            opt.value = selectPerfiles[i][1];
            opt.innerHTML = selectPerfiles[i][0];
            theselectPerfiles.appendChild(opt);
        }
    
    }
    
   
   
   
    var perfiles = []
    var thematerials = []
    var themachines = []
    var thelinescreens = []
    
    
    function llena_perfiles(){
    
        if (document.getElementById("cliente").value != ''){
            if (document.getElementById("impresor").value == ""){
                document.getElementById("impresor").value = document.getElementById("cliente").value
            }
            var busca_cliente = api.custom_objects.list_with_options("AR-BOSISIO_clientes",["DENOMINACION","equal to",document.getElementById("cliente").value]).results
            
            if (busca_cliente.length > 0){
                   perfiles = busca_cliente[0].datos_tecnicos
               
                
                for (i=0;i<perfiles.length;i++){
                    var onename_material = perfiles[i].MATERIAL_N
                    var onename_machine = perfiles[i].MAQUINAIMPRESORA
                    var onename_linescreen = perfiles[i].ESPESORPOLIMERO_N
                    
                    if (onename_material.indexOf(" - ") === -1){
                        thematerials.push(onename_material.toUpperCase())
                    } else {
                        var onemat_array = onename_material.split(" - ")
                        thematerials.push(onemat_array[1].toUpperCase())
                    }
                
                    if (onename_machine.indexOf(" - ") === -1){
                        themachines.push(onename_machine.toUpperCase())
                    } else {
                        var onemach_array = onename_machine.split(" - ")
                        themachines.push(onemach_array[1].toUpperCase())
                    }
                    
                    
                    thelinescreens.push(onename_linescreen.toUpperCase())
                    
                    
                }
                
            }
            
            var material_clean = thematerials.filter(onlyUnique)
            
             var options=''; // variable to store the options
        for(var i = 0; i < material_clean.length; i++){
            
        options += '<option value="'+material_clean[i]+'" />';

        }
         document.getElementById('materialcliente').innerHTML = options;
         
          var machines_clean = themachines.filter(onlyUnique)
            
             var options=''; // variable to store the options
        for(var i = 0; i < machines_clean.length; i++){
            
        options += '<option value="'+machines_clean[i]+'" />';

        }
         document.getElementById('maquinascliente').innerHTML = options;
         
         
         var linescreen_clean = thelinescreens.filter(onlyUnique)
            
             var options=''; // variable to store the options
        for(var i = 0; i < linescreen_clean.length; i++){
            
        options += '<option value="'+linescreen_clean[i]+'" />';

        }
         document.getElementById('espessorpolimetocliente').innerHTML = options;
         
         
            
          
            
       //   document.getElementById("informacion_impresion").value =  
                
                
         
        }
        
    }
    
    function lasordenes_anteriores(){
        
        
        
           var thecliente = document.getElementById("cliente").value
        
            var numeros_orden_antigos = api.custom_objects.list_with_options("AR-BOSISIO_calypso",["cliente","equal to",thecliente,'and',"tipo_trabajo","not equal to","REPOSICION SIN CAMBIOS"],[],["numero_op","fecha_ingreso"]).results
           
           
              var options2=''; // variable to store the options
        for(var i = 0; i < numeros_orden_antigos.length; i++){
            
        options2 += '<option value="'+numeros_orden_antigos[i].numero_op+'" />';

        }
         document.getElementById('ordenes_anteriores').innerHTML = options2;
          
    }
    
    var theveryoneprofile = ""
    
    function llena_nombre(que_hacer){
        
     
       campos_perfil = []
        document.getElementById("div_aviso").style.display = "none"
         document.getElementById("material").readOnly = true
         document.getElementById("material").style.borderColor = "#236423"
         document.getElementById("material").style.color = "#495057"
         document.getElementById("material").style.backgroundColor = "#e9ecef"
        document.getElementById("sentido").readOnly = true
        document.getElementById("sentido").style.borderColor = "#236423"
         document.getElementById("sentido").style.color = "#495057"
         document.getElementById("sentido").style.backgroundColor = "#e9ecef"
        document.getElementById("maquina").readOnly = true
        document.getElementById("maquina").style.borderColor = "#236423"
         document.getElementById("maquina").style.color = "#495057"
         document.getElementById("maquina").style.backgroundColor = "#e9ecef"
        document.getElementById("lineatura").readOnly = true
        document.getElementById("lineatura").style.borderColor = "#236423"
         document.getElementById("lineatura").style.color = "#495057"
         document.getElementById("lineatura").style.backgroundColor = "#e9ecef"
        document.getElementById("fabricante_polimero").readOnly = true
        document.getElementById("fabricante_polimero").style.borderColor = "#236423"
         document.getElementById("fabricante_polimero").style.color = "#495057"
         document.getElementById("fabricante_polimero").style.backgroundColor = "#e9ecef"
        document.getElementById("espesor_polimero").readOnly = true
        document.getElementById("espesor_polimero").style.borderColor = "#236423"
         document.getElementById("espesor_polimero").style.color = "#495057"
         document.getElementById("espesor_polimero").style.backgroundColor = "#e9ecef"
        document.getElementById("fabricante_polimeroblanco").readOnly = true
        document.getElementById("fabricante_polimeroblanco").style.borderColor = "#236423"
         document.getElementById("fabricante_polimeroblanco").style.color = "#495057"
         document.getElementById("fabricante_polimeroblanco").style.backgroundColor = "#e9ecef"
        document.getElementById("fabricante_polimerobarniz").readOnly = true
        document.getElementById("fabricante_polimerobarniz").style.borderColor = "#236423"
         document.getElementById("fabricante_polimerobarniz").style.color = "#495057"
         document.getElementById("fabricante_polimerobarniz").style.backgroundColor = "#e9ecef"
        
        var cualcomposicao = document.getElementById("color_gamaexpandida").value
        
        selectPerfiles = []
        
        if (cualcomposicao != "undefined"){
        
            if (cualcomposicao === "CMYKO"){
                for (i=0;i<thecmyko_profiles.length;i++){
                   selectPerfiles.push([thecmyko_profiles[i].CODIGO.replaceAll("_CMYKO",""),thecmyko_profiles[i].CODIGO]) 
                }
            }
             
             if (cualcomposicao === "CMYKV"){
                for (i=0;i<thecmykv_profiles.length;i++){
                   selectPerfiles.push([thecmykv_profiles[i].CODIGO.replaceAll("_CMYKV",""),thecmykv_profiles[i].CODIGO]) 
                }
             }
               
                 if (cualcomposicao === "CMYKG"){
                for (i=0;i<thecmykg_profiles.length;i++){
                   selectPerfiles.push([thecmykg_profiles[i].CODIGO.replaceAll("_CMYKG",""),thecmykg_profiles[i].CODIGO]) 
                }
                 }
               
                  if (cualcomposicao === "CMYKOG"){
                for (i=0;i<thecmykog_profiles.length;i++){
                   selectPerfiles.push([thecmykog_profiles[i].CODIGO.replaceAll("_CMYKOG",""),thecmykog_profiles[i].CODIGO]) 
                }
            }
            
              if (cualcomposicao === "CMYKOV"){
                for (i=0;i<thecmykov_profiles.length;i++){
                   selectPerfiles.push([thecmykov_profiles[i].CODIGO.replaceAll("_CMYKOV",""),thecmykov_profiles[i].CODIGO]) 
                }
            }
              if (cualcomposicao === "CMYKGV"){
                for (i=0;i<thecmykgv_profiles.length;i++){
                   selectPerfiles.push([thecmykgv_profiles[i].CODIGO.replaceAll("_CMYKGV",""),thecmykgv_profiles[i].CODIGO]) 
                }
            }
              if (cualcomposicao === "CMYKOGV"){
                for (i=0;i<thecmykogv_profiles.length;i++){
                   selectPerfiles.push([thecmykogv_profiles[i].CODIGO.replaceAll("_CMYKOGV",""),thecmykogv_profiles[i].CODIGO]) 
                }
            }
            
            
         $("#informacion_impresion").find('option').not(':first').remove() 
        var theselectPerfiles = document.getElementById("informacion_impresion")
       
            for (var i = 0; i<selectPerfiles.length; i++){
            var opt = document.createElement('option');
            opt.value = selectPerfiles[i][1];
            opt.innerHTML = selectPerfiles[i][0];
            theselectPerfiles.appendChild(opt);
        }
            
        }
             
        // document.getElementById("div_lapis").style.display = "inline-block"
             
        document.getElementById("div_aviso").style.display = "none"
        document.getElementById("material").value = ""
        document.getElementById("sentido").value= ""
        document.getElementById("maquina").value = ""
        document.getElementById("lineatura").value = ""
        document.getElementById("fabricante_polimero").value = ""
        document.getElementById("espesor_polimero").value = ""
        document.getElementById("fabricante_polimeroblanco").value = ""
        document.getElementById("fabricante_polimerobarniz").value = ""
        document.getElementById("nombre_perfil").value = ""
        document.getElementById("nombre_perfil").style.backgroundColor = "#e9ecef"
        theveryoneprofile = []
        
        
        if (que_hacer != undefined){
            preenche_tabela_receita()    
    
        }
    }
    
    
    function llena_infoperfil(){
        
        var perfilseleccionado = document.getElementById("informacion_impresion").value
        
        if (perfilseleccionado != "undefined"){
       
        if (document.getElementById("gamaexpandida_no").checked == true){
       
        for (i=0;i<thecmyk_profiles.length;i++){
            if (thecmyk_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmyk_profiles[i]
              
                document.getElementById("nombre_perfil").value = thecmyk_profiles[i].CODIGO
                document.getElementById("nombre_perfil").style.color = "white"
                document.getElementById("nombre_perfil").style.backgroundColor = "green"
             
                if (theveryoneprofile.MATERIAL_N.indexOf(" - ") > -1){
                    var material_array = theveryoneprofile.MATERIAL_N.split(" - ")
                    document.getElementById("material").value = material_array[1]
                } else {
                document.getElementById("material").value = theveryoneprofile.MATERIAL_N
                }
                if (theveryoneprofile.SENTIDOIMPRESION_N.indexOf(' - ') > -1){
                    var sentido_array = theveryoneprofile.SENTIDOIMPRESION_N.split(' - ')
                    document.getElementById("sentido").value = sentido_array[1]
                } else {
                document.getElementById("sentido").value = theveryoneprofile.SENTIDOIMPRESION_N
                }
                document.getElementById("maquina").value = theveryoneprofile.MAQUINAIMPRESORA
                if (theveryoneprofile.LINEATURA_N.indexOf(" - ") > -1){
                    var lineatura_array = theveryoneprofile.LINEATURA_N.split(" - ")
                    document.getElementById("lineatura").value = lineatura_array[1]
                    var thecurrentlinescreen = lineatura_array[1]
                    
                } else {
                document.getElementById("lineatura").value = theveryoneprofile.LINEATURA_N
                    thecurrentlinescreen = theveryoneprofile.LINEATURA_N
                }
                if (theveryoneprofile.FABRICANTEPOLIMERO_N.indexOf(" - ") > -1){
                    var fabricante_array = theveryoneprofile.FABRICANTEPOLIMERO_N.split(" - ")
                    document.getElementById("fabricante_polimero").value = fabricante_array[1]
                } else {
                document.getElementById("fabricante_polimero").value = theveryoneprofile.FABRICANTEPOLIMERO_N
                }
                document.getElementById("espesor_polimero").value = theveryoneprofile.ESPESORPOLIMERO_N
                if (theveryoneprofile.FABRICANTEPOLIMEROBLA.indexOf(' - ') > -1){
                    var blanco_array = theveryoneprofile.FABRICANTEPOLIMEROBLA.split(" - ")
                    document.getElementById("fabricante_polimeroblanco").value = blanco_array[1]
                } else {
                document.getElementById("fabricante_polimeroblanco").value = theveryoneprofile.FABRICANTEPOLIMEROBLA
                }
                if (theveryoneprofile.FABRICANTEPOLIMEROBAR.indexOf(" - ") > -1){
                    var barniz_array = theveryoneprofile.FABRICANTEPOLIMEROBAR.split(" - ") 
                    document.getElementById("fabricante_polimerobarniz").value = barniz_array[1]
                } else {
                document.getElementById("fabricante_polimerobarniz").value = theveryoneprofile.FABRICANTEPOLIMEROBAR
                }
                 document.getElementById("lineatura_flexo").value = thecurrentlinescreen
            }
        }     
            
        } else {
            
            if (document.getElementById("color_gamaexpandida").value == "CMYKO"){
                 for (i=0;i<thecmyko_profiles.length;i++){
            if (thecmyko_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmyko_profiles[i]
              
            }
                 }
            }
            
            if (document.getElementById("color_gamaexpandida").value == "CMYKV"){
                 for (i=0;i<thecmykv_profiles.length;i++){
            if (thecmykv_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmykv_profiles[i]
            }
                 }
            }
            
            if (document.getElementById("color_gamaexpandida").value == "CMYKG"){
                 for (i=0;i<thecmykg_profiles.length;i++){
            if (thecmykg_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmykg_profiles[i]
              
                
            }
                 }
            }
            
             if (document.getElementById("color_gamaexpandida").value == "CMYKOG"){
                 for (i=0;i<thecmykog_profiles.length;i++){
            if (thecmykog_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmykog_profiles[i]
                    }
                }   
            }
            
             if (document.getElementById("color_gamaexpandida").value == "CMYKOV"){
                 for (i=0;i<thecmykov_profiles.length;i++){
            if (thecmykov_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmykov_profiles[i]
                    }
                }   
            }
            
            if (document.getElementById("color_gamaexpandida").value == "CMYKGV"){
                 for (i=0;i<thecmykgv_profiles.length;i++){
            if (thecmykgv_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmykgv_profiles[i]
                    }
                }   
            }
            
            if (document.getElementById("color_gamaexpandida").value == "CMYKOGV"){
                 for (i=0;i<thecmykogv_profiles.length;i++){
            if (thecmykogv_profiles[i].CODIGO == perfilseleccionado){
              document.getElementById("div_lapis").style.display = "none"
                theveryoneprofile = thecmykogv_profiles[i]
                    }
                }   
                
            }
            
        
           document.getElementById("nombre_perfil").value = theveryoneprofile.CODIGO
                document.getElementById("nombre_perfil").style.color = "white"
                document.getElementById("nombre_perfil").style.backgroundColor = "green"
             
                if (theveryoneprofile.MATERIAL_N.indexOf(" - ") > -1){
                    var material_array = theveryoneprofile.MATERIAL_N.split(" - ")
                    document.getElementById("material").value = material_array[1]
                } else {
                document.getElementById("material").value = theveryoneprofile.MATERIAL_N
                }
                if (theveryoneprofile.SENTIDOIMPRESION_N.indexOf(' - ') > -1){
                    var sentido_array = theveryoneprofile.SENTIDOIMPRESION_N.split(' - ')
                    document.getElementById("sentido").value = sentido_array[1]
                } else {
                document.getElementById("sentido").value = theveryoneprofile.SENTIDOIMPRESION_N
                }
                document.getElementById("maquina").value = theveryoneprofile.MAQUINAIMPRESORA
                if (theveryoneprofile.LINEATURA_N.indexOf(" - ") > -1){
                    var lineatura_array = theveryoneprofile.LINEATURA_N.split(" - ")
                    document.getElementById("lineatura").value = lineatura_array[1]
                    var thecurrentlinescreen = lineatura_array[1]
                    
                } else {
                document.getElementById("lineatura").value = theveryoneprofile.LINEATURA_N
                    thecurrentlinescreen = theveryoneprofile.LINEATURA_N
                }
                if (theveryoneprofile.FABRICANTEPOLIMERO_N.indexOf(" - ") > -1){
                    var fabricante_array = theveryoneprofile.FABRICANTEPOLIMERO_N.split(" - ")
                    document.getElementById("fabricante_polimero").value = fabricante_array[1]
                } else {
                document.getElementById("fabricante_polimero").value = theveryoneprofile.FABRICANTEPOLIMERO_N
                }
                document.getElementById("espesor_polimero").value = theveryoneprofile.ESPESORPOLIMERO_N
                if (theveryoneprofile.FABRICANTEPOLIMEROBLA.indexOf(' - ') > -1){
                    var blanco_array = theveryoneprofile.FABRICANTEPOLIMEROBLA.split(" - ")
                    document.getElementById("fabricante_polimeroblanco").value = blanco_array[1]
                } else {
                document.getElementById("fabricante_polimeroblanco").value = theveryoneprofile.FABRICANTEPOLIMEROBLA
                }
                if (theveryoneprofile.FABRICANTEPOLIMEROBAR.indexOf(" - ") > -1){
                    var barniz_array = theveryoneprofile.FABRICANTEPOLIMEROBAR.split(" - ") 
                    document.getElementById("fabricante_polimerobarniz").value = barniz_array[1]
                } else {
                document.getElementById("fabricante_polimerobarniz").value = theveryoneprofile.FABRICANTEPOLIMEROBAR
                }
            }
        
    }
    
        }
    
</script>
<script>
    function mostra_info_tinta(){
        if (document.getElementById("masinfotinta").style.display == "none"){
            document.getElementById("masinfotinta").style.display = "inline-block"
            document.getElementById("btn-masinfotinta").style.display = "none"
            document.getElementById("btn-menosinfotinta").style.display = "inline-block"
        } else {
            document.getElementById("masinfotinta").style.display = "none"
            document.getElementById("btn-masinfotinta").style.display = "inline-block"
            document.getElementById("btn-menosinfotinta").style.display = "none"
        }
    }
    
     function mostra_info_tinta2(){
        if (document.getElementById("masinfotinta").style.display == "none"){
            document.getElementById("masinfotinta").style.display = "inline-block"
            document.getElementById("btn-masinfotinta").style.display = "none"
            document.getElementById("btn-menosinfotinta").style.display = "inline-block"
        } else {
            document.getElementById("masinfotinta").style.display = "none"
            document.getElementById("btn-masinfotinta").style.display = "inline-block"
            document.getElementById("btn-menosinfotinta").style.display = "none"
        }
    }
</script>
<script>
    function existe_trama_solidos(){
        if (document.getElementById("hay_tramasolidos").checked === true){
            document.getElementById("tramasolidos").style.display = "inline-block"
        } else {
            
            document.getElementById("tramasolidos").style.display = "none"
        }
    }
</script>
<script>
 

    function llena_datos_orden(){
        
         var cuerpos_libres = []
        
        document.getElementById("codigo_anterior").value = ""
        
        if (document.getElementById("orden_anterior").value != "undefined"){
            var busca_orden = api.custom_objects.list_with_options("AR-BOSISIO_calypso",["numero_op","equal to",document.getElementById("orden_anterior").value]).results
            document.getElementById("cliente").value = busca_orden[0].cliente
         //   document.getElementById("facturable_a").value = busca_orden[0].info_facturacion.facturable_a
            document.getElementById("tipo_ordem").value = busca_orden[0].tipo_orden
            //document.getElementById("tipo_trabajo").value = busca_orden[0].tipo_trabajo
            document.getElementById("nombre_producto").value = busca_orden[0].nombre_producto
            document.getElementById("codigo_producto").value = busca_orden[0].codigo_producto
          
            if (busca_orden[0].datos_tecnicos.perfil.indexOf("CMYKO") > -1 ||
                busca_orden[0].datos_tecnicos.perfil.indexOf("CMYKV") > -1 ||
                busca_orden[0].datos_tecnicos.perfil.indexOf("CMYKG") > -1){
                    document.getElementById("gamaexpandida_si").checked = true
                } else {
                    document.getElementById("gamaexpandida_no").checked = true
                }
            
            for (i=0;i<perfiles.length;i++){
                var regexcodigo = new RegExp(".*"+perfiles[i].CODIGO.substring(0,perfiles[i].CODIGO.lastIndexOf("_"))+".*")
              if (regexcodigo.test(busca_orden[0].datos_tecnicos.perfil) === true){
                
                
                theveryoneprofile = perfiles[i]
                document.getElementById("nombre_perfil").value = theveryoneprofile.CODIGO
                document.getElementById("nombre_perfil").style.color = "white"
                document.getElementById("nombre_perfil").style.backgroundColor = "green"
                if (theveryoneprofile.MATERIAL_N.indexOf(" - ") > -1){
                    var material_array = theveryoneprofile.MATERIAL_N.split(" - ")
                    document.getElementById("material").value = material_array[1]
                } else {
                document.getElementById("material").value = theveryoneprofile.MATERIAL_N
                }
                if (theveryoneprofile.SENTIDOIMPRESION_N.indexOf(' - ') > -1){
                    var sentido_array = theveryoneprofile.SENTIDOIMPRESION_N.split(' - ')
                    document.getElementById("sentido").value = sentido_array[1]
                } else {
                document.getElementById("sentido").value = theveryoneprofile.SENTIDOIMPRESION_N
                }
                
                // bloquea campos caso existe sentido
                
                if (document.getElementById("sentido").value.toUpperCase() === "DORSO" ||
                    document.getElementById("sentido").value.toUpperCase() === "FRENTE"){
                        
                        var thesentido_select = document.getElementById("lado_impressao")
                       if (document.getElementById("sentido").value.toUpperCase() === "DORSO"){
                        thesentido_select.value = "Interna"
                       } else {
                         thesentido_select.value = "Externa"  
                       }
                       
                       for (v=0;v<thesentido_select.options.length;v++){
                           thesentido_select.options[v].disabled = true
                       }
                      thesentido_select.style.backgroundColor = "#e9ecef"
                      
                      muda_figura()
                    }
                
                
                document.getElementById("maquina").value = theveryoneprofile.MAQUINAIMPRESORA
                if (theveryoneprofile.LINEATURA_N.indexOf(" - ") > -1){
                    var lineatura_array = theveryoneprofile.LINEATURA_N.split(" - ")
                    document.getElementById("lineatura").value = lineatura_array[1]
                    var thecurrentlinescreen = lineatura_array[1]
                    
                } else {
                document.getElementById("lineatura").value = theveryoneprofile.LINEATURA_N
                    thecurrentlinescreen = theveryoneprofile.LINEATURA_N
                }
                if (theveryoneprofile.FABRICANTEPOLIMERO_N.indexOf(" - ") > -1){
                    var fabricante_array = theveryoneprofile.FABRICANTEPOLIMERO_N.split(" - ")
                    document.getElementById("fabricante_polimero").value = fabricante_array[1]
                } else {
                document.getElementById("fabricante_polimero").value = theveryoneprofile.FABRICANTEPOLIMERO_N
                }
                document.getElementById("espesor_polimero").value = theveryoneprofile.ESPESORPOLIMERO_N
                if (theveryoneprofile.FABRICANTEPOLIMEROBLA.indexOf(' - ') > -1){
                    var blanco_array = theveryoneprofile.FABRICANTEPOLIMEROBLA.split(" - ")
                    document.getElementById("fabricante_polimeroblanco").value = blanco_array[1]
                } else {
                document.getElementById("fabricante_polimeroblanco").value = theveryoneprofile.FABRICANTEPOLIMEROBLA
                }
                if (theveryoneprofile.FABRICANTEPOLIMEROBAR.indexOf(" - ") > -1){
                    var barniz_array = theveryoneprofile.FABRICANTEPOLIMEROBAR.split(" - ") 
                    document.getElementById("fabricante_polimerobarniz").value = barniz_array[1]
                } else {
                document.getElementById("fabricante_polimerobarniz").value = theveryoneprofile.FABRICANTEPOLIMEROBAR
                }
                document.getElementById("lineatura_flexo").value = thecurrentlinescreen
                
              }
              
            }
                
                if (busca_orden[0].corte.medida_corte != undefined){
                   document.getElementById("medida_corte").value = busca_orden[0].corte.medida_corte
                }
                if (busca_orden[0].corte.repeticion_corte != undefined){
                   document.getElementById("repeticion_corte").value = busca_orden[0].corte.repeticion_corte
                }
                if (busca_orden[0].corte.total_corte != undefined){
                   document.getElementById("total_corte").value = busca_orden[0].corte.total_corte
                }
                if (busca_orden[0].corte.deformacionmedida_corte != undefined){
                   document.getElementById("deformacionmedida_corte").value = busca_orden[0].corte.deformacionmedida_corte
                }
                if (busca_orden[0].corte.deformacionfactor_corte != undefined){
                   document.getElementById("deformacionfactor_corte").value = busca_orden[0].corte.deformacionfactor_corte
                }
              
                 if (busca_orden[0].desarollo.medida_desarollo != undefined){
                 if (busca_orden[0].tipo_orden === "Flexografia"){    
                   document.getElementById("medida_desarollo").value = busca_orden[0].desarollo.medida_desarollo
                 } else {
                        document.getElementById("medida_desarollo").value = busca_orden[0].desarollo.cutoff
                
                 }
                }
                
                if (busca_orden[0].desarollo.repeticion_desarollo != undefined){
                   document.getElementById("repeticion_desarollo").value = busca_orden[0].desarollo.repeticion_desarollo
                }
                if (busca_orden[0].desarollo.total_desarollo != undefined){
                  if (busca_orden[0].tipo_orden === "Flexografia"){ 
                   document.getElementById("total_desarollo").value = busca_orden[0].desarollo.total_desarollo
                  } 
                }
                
                 if (busca_orden[0].tipo_orden === "Huecograbado"){
                 
                     document.getElementById("total_desarollo").value =  busca_orden[0].desarollo.medida_desarollo
                  }
                  
                if (busca_orden[0].desarollo.deformacionmedida_desarollo != undefined){
                   document.getElementById("deformacionmedida_desarollo").value = busca_orden[0].desarollo.deformacionmedida_desarollo
                }
                if (busca_orden[0].desarollo.deformacionfactor_desarollo != undefined){
                   document.getElementById("deformacionfactor_desarollo").value = parseFloat(busca_orden[0].desarollo.deformacionfactor_desarollo).toFixed(6)
                }
                
                if (busca_orden[0].info_fotocelula.ancho != undefined){
                   document.getElementById("ancho_fotocelula").value = busca_orden[0].info_fotocelula.ancho
                   document.getElementById("fotocelula_seaplica").checked = false
                   document.getElementById("fotocelula_segunplano").disabled = false
                   document.getElementById("mostra_fotocelula1").style.display = "inline-block"
                   document.getElementById("mostra_fotocelula2").style.display = "inline-block"
                   document.getElementById("mostra_fotocelula3").style.display = "inline-block"
                   document.getElementById("div_dimensoes_taco").style.display = "inline-block"
                }
                if (busca_orden[0].info_fotocelula.alto != undefined){
                   document.getElementById("alto_fotocelula").value = busca_orden[0].info_fotocelula.alto
                }
                
                if (busca_orden[0].info_pieimprenta.posicion_pie != undefined){
                    if (busca_orden[0].info_pieimprenta.posicion_pie != "" &&  busca_orden[0].info_pieimprenta.posicion_pie != "SIN"){
                     document.getElementById("div_pie_imprenta").style.display = "inline-block"
                     document.getElementById("pie_imprenta_si").checked = true
                     if (busca_orden[0].info_pieimprenta.posicion_pie != undefined){
                     document.getElementById("posicion_pie").value = busca_orden[0].info_pieimprenta.posicion_pie
                     }
                     if (busca_orden[0].info_pieimprenta.texto_pie != undefined){
                     document.getElementById("texto_pie").value = busca_orden[0].info_pieimprenta.texto_pie
                     }
                     if (busca_orden[0].info_pieimprenta.alto != undefined){
                     document.getElementById("alto_pie").value = busca_orden[0].info_pieimprenta.alto
                     }
                     if (busca_orden[0].info_pieimprenta.ancho != undefined){
                     document.getElementById("ancho_pie").value = busca_orden[0].info_pieimprenta.ancho
                     }
                     
                    }
                }
                  
                 if (busca_orden[0].codigos_barra.length > 0){
                     
                     document.getElementById("numero_codigobarras").value = busca_orden[0].codigos_barra[0].codigo
                     document.getElementById("magnificacion_codigobarras").value = busca_orden[0].codigos_barra[0].magnificacion
                     document.getElementById("bwr_codigobarras").value = busca_orden[0].codigos_barra[0].bwr
                    
                     document.getElementById("codigo_barras_si").checked = true
                     document.getElementById("div_numerocodigo").style.display = "inline-block"
                     document.getElementById("div_magcodigo").style.display = "inline-block"
                     document.getElementById("div_bwrcodigo").style.display = "inline-block"
                     document.getElementById("div_caladocodigo").style.display = "inline-block"
                     
                     
                 }
                 
                 tintas_flexo = []
                 for (i=0;i<busca_orden[0].tintas.length;i++){
                     
                if (busca_orden[0].tipo_orden == "Flexografia"){
                     var info_tinta = {}
                info_tinta["nombre_tinta"] = busca_orden[0].tintas[i].nombre
                info_tinta["lineatura_flexo"] = busca_orden[0].tintas[i].lineatura
                info_tinta["lineatura_flexo2"] = busca_orden[0].tintas[i].lineatura2
                
                info_tinta["trama_flexo"] = busca_orden[0].tintas[i].trama1
                info_tinta["trama_flexo2"] = busca_orden[0].tintas[i].trama2
                info_tinta["angulo_flexo"] = busca_orden[0].tintas[i].angulo1
                info_tinta["angulo_flexo2"] = busca_orden[0].tintas[i].angulo2
                info_tinta["trama_solidos_flexo"] = busca_orden[0].tintas[i].TratamientoSolidos
                info_tinta["codigo_facturacion"] = ""
                info_tinta["fotocelula"] = false
                info_tinta["linea_refile"] = false
                info_tinta["pie_imprenta"] = false
                info_tinta["codigo_barras"] = false
                info_tinta["doble_copia"] = false
                if (busca_orden[0].tintas[i].nombre == "Cyan"){
                info_tinta["hex"] = "#00FFFF"    
                }
                else if (busca_orden[0].tintas[i].nombre == "Magenta"){
                info_tinta["hex"] = "#FF00FF"    
                }
                else if (busca_orden[0].tintas[i].nombre == "Yellow"){
                info_tinta["hex"] = "#FFFF00"    
                }
                else if (busca_orden[0].tintas[i].nombre == "Black"){
                info_tinta["hex"] = "#000000"    
                }
                else if (busca_orden[0].tintas[i].nombre == "Green"){
                info_tinta["hex"] = "#00FF00"    
                }
                else if (busca_orden[0].tintas[i].nombre == "Orange"){
                info_tinta["hex"] = "#FFA500"    
                }
                else if (busca_orden[0].tintas[i].nombre == "Violet"){
                info_tinta["hex"] = "#8F00FF"    
                } else {
                info_tinta["hex"] = "#FFFFFF"
                }
                info_tinta["producir"] = busca_orden[0].tintas[i].producir
                if (busca_orden[0].tintas[i].TipoArmado != undefined){
                if (busca_orden[0].tintas[i].TipoArmado.indexOf("-") === -1){
                info_tinta["armado"] = busca_orden[0].tintas[i].TipoArmado
                } else {
                 info_tinta["armado"] =  busca_orden[0].tintas[i].TipoArmado.split(" - ")[1]  
                }
                }
                info_tinta["cantidad_planchas"] = busca_orden[0].tintas[i].cantidad_repeticiones
                
                info_tinta["herramental"] = busca_orden[0].tintas[i].herramental
                info_tinta["lineatura_2"] =  busca_orden[0].tintas[i].lineatura2
                if (busca_orden[0].tintas[i].TipoCorte != undefined){
                if ( busca_orden[0].tintas[i].TipoCorte.indexOf("-") === -1){
                info_tinta["tipo_corte"] =  busca_orden[0].tintas[i].TipoCorte
                } else {
                 info_tinta["tipo_corte"] =  busca_orden[0].tintas[i].TipoCorte.split(" - ")[1]   
                }
                }
                
                info_tinta["desplazado"] =  busca_orden[0].tintas[i].desplazado
                info_tinta["corte_especial"] =  busca_orden[0].tintas[i].itcorteespecial
                info_tinta["desarollo_especial"] =  busca_orden[0].tintas[i].itdesarollo_especial 
                info_tinta["secuencia"] = parseInt(busca_orden[0].tintas[i].secuencia)
                
                } else {
                    
                var info_tinta = {}
                info_tinta["nombre_tinta"] = busca_orden[0].tintas[i].nombre
                 info_tinta["diametro"] =  busca_orden[0].tintas[i].diametro
                info_tinta["distorcion"] =  busca_orden[0].tintas[i].distorcion
                info_tinta["en_planta"] =  busca_orden[0].tintas[i].en_planta
                info_tinta["herciline"] =  busca_orden[0].tintas[i].herciline
                info_tinta["alma"] =  busca_orden[0].tintas[i].nro_alma
                info_tinta["tabla"] =  busca_orden[0].tintas[i].tabla
                info_tinta["tabla_2"] =  busca_orden[0].tintas[i].tabla_2
                info_tinta["tipo_grabacion"] =  busca_orden[0].tintas[i].tipo_grabacion
                info_tinta["observaciones"] =  ""
                info_tinta["secuencia"] = busca_orden[0].tintas[i].secuencia
                info_tinta["fotocelula"] = false
                info_tinta["pie_imprenta"] = false
                info_tinta["codigo_barras"] = false
                info_tinta["hex"] = "#CCC"
                info_tinta["producir"] = false
                info_tinta["doble_copia"] = false
        
                  
                    
                    
                }
                
                 
                     
                 tintas_flexo.push(info_tinta)    
                     
                     
                 }
                 
                  tintas_flexo = tintas_flexo.sort((a, b) => {
                  if (a.secuencia < b.secuencia) {
                    return -1;
                  }
                });
                
                 
                for (i=0;i<tintas_flexo.length;i++){
                     cuerpos_libres.push(tintas_flexo[i].secuencia)
                 }
                 
                 var faltan = findMissingNumbers(cuerpos_libres)
                 
                 for (i=0;i<faltan.length;i++){
                 var info_tinta = {}
                info_tinta["nombre_tinta"] = "Cuerpo Libre"
                 info_tinta["diametro"] = "N/A"
                info_tinta["distorcion"] = "N/A"
                info_tinta["en_planta"] = "N/A"
                info_tinta["herciline"] =  ""
                info_tinta["alma"] = ""
                info_tinta["tabla"] =  "N/A"
                info_tinta["tabla_2"] =  "N/A"
                info_tinta["tipo_grabacion"] = ""
                info_tinta["observaciones"] =  ""
                info_tinta["secuencia"] = faltan[i]
                info_tinta["fotocelula"] = false
                info_tinta["pie_imprenta"] = false
                info_tinta["codigo_barras"] = false
                info_tinta["hex"] = "#CCC"
                info_tinta["producir"] = false
                info_tinta["doble_copia"] = false
                tintas_flexo.push(info_tinta)    
                     
                 }
                 
                 
                                 
                
                 
                tintas_flexo = tintas_flexo.sort((a, b) => {
                  if (a.secuencia < b.secuencia) {
                    return -1;
                  }
                });
                
               
                
              
             if (busca_orden[0].tipo_orden == "Flexografia"){   
            
          preenche_tabela_receita()
             } else {
                 
                preenche_tabela_receita2() 
             }
                     
        }
        
        // busca carpetas
        var numero_orden_corregido = document.getElementById("orden_anterior").value

    if (numero_orden_corregido != ""){
    
    
     var quecarpetas_buscar =  api.folder.list_with_options(["name","contains",numero_orden_corregido],[],["name","subfolders","cloudflow"]).results
    
    
    if (quecarpetas_buscar.length === 0){
      if (numero_orden_corregido[0] === "9" &&
         numero_orden_corregido[1] === "0" &&
        numero_orden_corregido[2] === "0" &&
        numero_orden_corregido[3] === "0"){
         numero_orden_corregido = numero_orden_corregido.substring(4,numero_orden_corregido.length)   
        } 
        
     quecarpetas_buscar =  api.folder.list_with_options(["name","contains",numero_orden_corregido],[],["name","subfolders","cloudflow"]).results
       
    }
     if (quecarpetas_buscar.length === 0){
        if (numero_orden_corregido[0] === "9" &&
         numero_orden_corregido[1] === "0" &&
        numero_orden_corregido[2] === "0" &&
        numero_orden_corregido[3] === "1"){
         numero_orden_corregido = numero_orden_corregido.substring(3,numero_orden_corregido.length)   
        } 
        quecarpetas_buscar =  api.folder.list_with_options(["name","contains",numero_orden_corregido],[],["name","subfolders","cloudflow"]).results
        
     }
        console.log(numero_orden_corregido)
        
    //   var quecarpetas_buscar =  api.folder.list_with_options(["name","contains",numero_orden_corregido],[],["name","subfolders","cloudflow"]).results
    
     
       if (quecarpetas_buscar.length > 0){
        document.getElementById("div_mostrareferencia").style.display = "inline-block"
         document.getElementById("div_asignararchivos").style.display = "inline-block"
        var thefolder = api.folder.list_with_options(["_id","equal to",quecarpetas_buscar[0]._id],[],["name","subfolders","cloudflow"]).results
        console.log(thefolder[0])
        busca_foldersref = thefolder
        preenche_foldersref(thefolder)
       
   }
           
       }
}
          
        
    
    
    function busca_codigo_anterior(){
       // document.getElementById("orden_anterior").value = "undefined"
        if (document.getElementById("codigo_anterior").value  != ""){
            var busca_orden = api.custom_objects.list_with_options("AR-BOSISIO_ordenes",["codigo_item","contains text like",document.getElementById("codigo_anterior").value]).results
            if (busca_orden.length > 0){
             document.getElementById("cliente").value = busca_orden[0].cliente
             document.getElementById("facturable_a").value = busca_orden[0].info_facturacion.facturable_a
            document.getElementById("tipo_ordem").value = busca_orden[0].tipo_ordem
            document.getElementById("nombre_producto").value = busca_orden[0].nombre_producto
            document.getElementById("codigo_producto").value = busca_orden[0].codigo_producto
            
            } else {
              busca_orden = api.custom_objects.list_with_options("AR-BOSISIO_calypso",["codigo_item","contains text like",document.getElementById("codigo_anterior").value]).results
              if (busca_orden.length > 0){
             document.getElementById("cliente").value = busca_orden[0].cliente
             document.getElementById("facturable_a").value = busca_orden[0].info_facturacion.facturable_a
            document.getElementById("tipo_ordem").value = busca_orden[0].tipo_ordem
            document.getElementById("nombre_producto").value = busca_orden[0].nombre_producto
            document.getElementById("codigo_producto").value = busca_orden[0].codigo_producto
        
            } else {
                document.getElementById("error_codigo_anterior").innerText = "No fue possible encontrar este código"
                document.getElementById("codigo_anterior").style.borderColor = "red"
                setTimeout(function(){document.getElementById("error_codigo_anterior").innerText= "";
                                       document.getElementById("codigo_anterior").style.borderColor = "#236423" 
                },5000)
            }
            }
            
            
        }
    }
</script>

<script>
    function verifica_campos(duplicar){
        document.getElementById("button_nuevaorden").disabled = true
        var data = {}
        data["cliente"] = document.getElementById("cliente").value
        data["impresor"] = document.getElementById("impresor").value
        data["tipo_orden"] = document.getElementById("tipo_ordem").value
        if (document.getElementById("liberado_preprensa").value == "Si"){
        data["liberado_preprensa"] = true
        } else {
         data["liberado_preprensa"] = false     
        }
        
        if (theart_asset.length === 0){
         data["liberado_preprensa"] = false   
        }
       
       
       
        data["tipo_trabajo"] = document.getElementById("tipo_trabajo").value
        data["orden_anterior"] = document.getElementById("orden_anterior").value
        
        var informacion_trabajo = {}
        informacion_trabajo["nombre_producto"] = document.getElementById("nombre_producto").value
        informacion_trabajo["codigo_producto"] = document.getElementById("codigo_producto").value
        informacion_trabajo["prioridad"] = document.getElementById("prioridad").value
        var info = document.getElementsByClassName("multi-select-button")
        var string_enviarcon = info[0].innerHTML
        informacion_trabajo["enviar_polimeroscon"] = string_enviarcon.split(",")
        var string_producto = info[1].innerHTML
        informacion_trabajo["producto"] = string_producto.split(",")
        informacion_trabajo["enviar_polimeroscon"] = string_enviarcon.split(",")
        var string_requiere = info[2].innerHTML
        informacion_trabajo["requiere"] = string_requiere.split(",")
        data["informacion_trabajo"] = informacion_trabajo
        
        data["datos_tecnicos"] = theveryoneprofile
        data["indicaciones"] = indicaciones
        
        var informacion_arte = {}
        informacion_arte["medida_corte"] = document.getElementById("medida_corte").value
        informacion_arte["repeticion_corte"] = document.getElementById("repeticion_corte").value
        informacion_arte["total_corte"] = document.getElementById("total_corte").value
        informacion_arte["deformacionmedida_corte"] = document.getElementById("deformacionmedida_corte").value
        informacion_arte["deformacionfactor_corte"] = document.getElementById("deformacionfactor_corte").value
        
        informacion_arte["medida_desarollo"] = document.getElementById("medida_desarollo").value
        informacion_arte["repeticion_desarollo"] = document.getElementById("repeticion_desarollo").value
        informacion_arte["separacion"] = document.getElementById("separacion").value
        informacion_arte["total_desarollo"] = document.getElementById("total_desarollo").value
        informacion_arte["deformacionmedida_desarollo"] = document.getElementById("deformacionmedida_desarollo").value
        informacion_arte["deformacionfactor_desarollo"] = document.getElementById("deformacionfactor_desarollo").value
       
        informacion_arte["fotocelula_ubicacion"] = fotocelulas
        informacion_arte["ancho_fotocelula"] = document.getElementById("ancho_fotocelula").value
        informacion_arte["alto_fotocelula"] = document.getElementById("alto_fotocelula").value
        informacion_arte["fotocelula_caladotintas"] = document.getElementById("fotocelula_caladotintas").checked
        informacion_arte["fotocelula_caladobarniz"] = document.getElementById("fotocelula_caladobarniz").checked
        informacion_arte["color_calle"] = document.getElementById("color_calle").value
        
        informacion_arte["pie_imprenta_si"] = document.getElementById("pie_imprenta_si").checked
        informacion_arte["pie_imprenta_no"] = document.getElementById("pie_imprenta_no").checked
        informacion_arte["ancho_pie"] = document.getElementById("ancho_pie").value
        informacion_arte["alto_pie"] = document.getElementById("alto_pie").value
        informacion_arte["pie_caladotintas"] = document.getElementById("pie_caladotintas").checked
        informacion_arte["posicion_pie"] = document.getElementById("posicion_pie").value
        informacion_arte["texto_pie"] = document.getElementById("texto_pie").value
        
        informacion_arte["linea_refile_si"] = document.getElementById("linea_refile_si").checked
        informacion_arte["linea_refile_no"] = document.getElementById("linea_refile_no").checked
        informacion_arte["ancho_linearefile"] = document.getElementById("ancho_linearefile").value
        informacion_arte["posicion_linearefile"] = document.getElementById("posicion_linearefile").value
        
        informacion_arte["codigo_barras_si"] = document.getElementById("codigo_barras_si").checked
        informacion_arte["codigo_barras_no"] = document.getElementById("codigo_barras_no").checked
        informacion_arte["numero_codigobarras"] = document.getElementById("numero_codigobarras").value
        informacion_arte["magnificacion_codigobarras"] = document.getElementById("magnificacion_codigobarras").value
        informacion_arte["bwr_codigobarras"] = document.getElementById("bwr_codigobarras").value
        informacion_arte["codigobarras_caladotintas"] = document.getElementById("codigobarras_caladotintas").checked
        informacion_arte["codigobarras_caladobarniz"] = document.getElementById("codigobarras_caladobarniz").checked
        
        informacion_arte["codigo_plano"] = document.getElementById("codigo_plano").value
        informacion_arte["sentido_impresion"] = document.getElementById("sentido_impresion").value
        informacion_arte["lado_fotocelula"] = document.getElementById("lado_fotocelula").value
        informacion_arte["lado_impressao"] = document.getElementById("lado_impressao").value
        informacion_arte["referencia_arte"] = document.getElementById("referencia_arte").value
        
        informacion_arte["textolegal_si"] = document.getElementById("textolegal_si").checked
        informacion_arte["textolegal_no"] = document.getElementById("textolegal_no").checked
        informacion_arte["senasa"] = document.getElementById("senasa").value
        informacion_arte["rne"] = document.getElementById("rne").value
        informacion_arte["rnpa"] = document.getElementById("rnpa").value
        informacion_arte["rin"] = document.getElementById("rin").value
        informacion_arte["pams"] = document.getElementById("pams").value
        
        data["informacion_arte"] = informacion_arte
        
            
        data["tintas"] = tintas_flexo
        
        data["fecha_ingreso"] = new Date()
        data["ingresado_por"] = usuario
        
        // calcula dificultad
     var busca_dificultad = api.custom_objects.list("AR-BOSISIO_dificultad").results   
      
    var dificuldade = 0
        if (data.tipo_orden != "undefined"){
            var factor1 = busca_dificultad[0].tipo_trabajo['factores'][data.tipo_orden]
            var valor1 = busca_dificultad[0].tipo_trabajo.valores[data.tipo_trabajo]
            dificuldade = dificuldade+(valor1*factor1)
        }
    
        if (data.informacion_trabajo.prioridad != "undefined"){
            var factor2 = busca_dificultad[0].requerimientos['factores'][data.informacion_trabajo.prioridad]
            var produtos_base = data.informacion_trabajo.producto
            for (j=0;j<produtos_base.length;j++){
                var valor2_1 = busca_dificultad[0].requerimientos["valores"][produtos_base[j]]
                dificuldade - dificuldade+(factor2*valor2_1)
            }
        }
        
        if (data.informacion_trabajo.requiere.length > 0){
        var requer = data.informacion_trabajo.requiere
            for (k=0;k<requer.length;k++){
            var valor2_2 = busca_dificultad[0].requerimientos["valores"][requer[k]]
            dificuldade - dificuldade+(factor2*valor2_2)
            }
         }
    
        if (data.informacion_trabajo.enviar_polimeroscon.length > 0){ 
            var polimeros_con = data.informacion_trabajo.enviar_polimeroscon
            for (m=0;m<requer.length;m++){
                var valor2_3 = busca_dificultad[0].requerimientos["valores"][polimeros_con[m]]
                dificuldade - dificuldade+(factor2*valor2_3)
            }
         }
   
        if (data.datos_tecnicos != ""){
            var datoscolor = data.datos_tecnicos.CODIGO
            datoscolor = datoscolor.split("_")
            datoscolor = datoscolor[datoscolor.length-1]
            if (datoscolor === "CMYK"){
                var factor3 = busca_dificultad[0].tintas.factores.gamaexpandida_no
            } else {
                var factor3 = busca_dificultad[0].tintas.factores.gamaexpandida_si
             }
            dificuldade = dificuldade+factor3
        }
    
        if (data.indicaciones != undefined){
            var factor4 = data.indicaciones.length
            var valor4 = busca_dificultad[0].indicaciones.factores.modificaciones
            dificuldade = dificuldade+(factor4*valor4)
        }
  
        data["dificultad"] = dificuldade
        
        
        
        
        // calcula tiempos processo
        
        
                var tempo_etapa = new Date()
                var proximas_etapas = []
                var o_tempo = {}
                var os_tempos = []
                
                var proxima_etapa = {}
                if (data.tipo_trabajo != "REPOSICIÓN POR RECLAMO"){
                 if (data.liberado_preprensa === false){
                proxima_etapa["forms"] = "ingreso.html"
                proxima_etapa["nomes"] = "soporte"
                proxima_etapa["quien"] = usuario.fullname
                 proximas_etapas.push(proxima_etapa)
                } else {
                proxima_etapa["forms"] = "programacion.html"
                proxima_etapa["nomes"] = "programacion"
                proxima_etapa["quien"] = "Programación"
                 proximas_etapas.push(proxima_etapa)
                }
               
               
                
                    
                }
                else if (data.tipo_trabajo != "REPOSICIÓN SIN CAMBIOS"){
                if (data.liberado_preprensa === false){
                proxima_etapa["forms"] = "ingreso.html"
                proxima_etapa["nomes"] = "soporte"
                proxima_etapa["quien"] = usuario.fullname
                } else {
                proxima_etapa["forms"] = "programacion.html"
                proxima_etapa["nomes"] = "programacion"
                proxima_etapa["quien"] = "Programación"
                }
                }
                else {
                proxima_etapa["forms"] = "polimeros.html"
                proxima_etapa["nomes"] = "polimeros"
                proxima_etapa["quien"] = "Producción Flexo"  
                }
                
                if (data.tipo_trabajo == "REPOSICIÓN POR RECLAMO"){
                var proxima_etapa = {}
                proxima_etapa["forms"] = "gerencia.html"
                proxima_etapa["nomes"] = "gerencia"
                proxima_etapa["quien"] = "Gerência"
                proximas_etapas.push(proxima_etapa)
                }
                
                proximas_etapas.push(proxima_etapa)
                
                
                var tempos_processo = []
                var tempo_processo = {}
                var the_time = []
                var os_tempos = {}
                os_tempos["inicio"] = new Date(hoje)
                if (data.liberado_preprensa === true){
                os_tempos["final"] = new Date()
                os_tempos["finalizado_por"] = usuario.fullname
                }
                tempo_processo["etapa"] = "Ingreso"
                tempo_processo["creado_por"] = usuario.fullname
                tempo_processo["ejecutado_por"] = ""
                the_time.push(os_tempos)
                tempo_processo["tiempos"] = the_time
                tempos_processo.push(tempo_processo)
                
                if (data.liberado_preprensa === true){
                var tempo_processo = {}
                var the_time = []
                var os_tempos = {}
                os_tempos["inicio"] = new Date()
                tempo_processo["etapa"] = "Programación"
                tempo_processo["creado_por"] = usuario.fullname
                tempo_processo["ejecutado_por"] = ""
                the_time.push(os_tempos)
                tempo_processo["tiempos"] = the_time
                 tempos_processo.push(tempo_processo)   
                }
                
                
        data["tiempos_proceso"] = tempos_processo
        data["proxima_etapa"] = proximas_etapas
        data["cambios_perfil"] = campos_perfil
        data["terminado"] = false
        if (theart_asset != undefined){
        data["arte_producao"] = theart_asset
        } else {
            data["arte_producao"] = {}
        }
        if (thepedido_asset != undefined){
        data["pedido"] = thepedido_asset
        } else {
           data["pedido"] = {} 
        }
        if (theplanta_asset != undefined){
        data["plano"] = theplanta_asset
        } else {
           data["plano"] = {} 
        }
        if (thereference_asset != undefined){
        data["arte_referencia"] = thereference_asset
        } else {
             data["arte_referencia"] =  {}
        }
        
        
      
        
        var cantas_hay = api.custom_objects.list_with_options("AR-BOSISIO_ordenes",[],[],["numero_op"]).results
        
        if (cantas_hay.length === 0){
            data["numero_op"] = "300000"
        } else {
            cantas_hay.sort((a, b) => {
             if (parseInt(a.numero_op) < parseInt(a.numero_op)) {
            return -1;
            }
            });
            var ultima = parseInt(cantas_hay[cantas_hay.length-1]["numero_op"])+1
            data["numero_op"] = ultima.toString()
            
        }
        console.log(data)
       var cria_ot = api.hub.start_from_whitepaper_with_variables("[INGRESO]","entrada",{"datos":data})
       document.getElementById("msg_ot").innerText = "OT creada con êxito!"
        if (duplicar === undefined){
       setTimeout(function(){window.open("ordenes_dash.html","_self")},4000)
        } else {
         setTimeout(function(){document.getElementById("msg_ot").innerText = ""; $('html,body').scrollTop(0);},3000)  
        }
        
       
        
    }
</script>
<script>
    function calcula_total_corte(){
        
        if (document.getElementById("medida_corte").value != "" && document.getElementById("repeticion_corte").value != ""){
            var valormarcas = parseFloat(document.getElementById("marcas_corte").value.replace(",","."))
            var valordeformacion = parseFloat(document.getElementById("deformacionfactor_corte").value.replace(",","."))
            console.log(valordeformacion)
            var valormedida = parseFloat(document.getElementById("medida_corte").value.replace(",","."))
            var valorrepeticion = parseInt(document.getElementById("repeticion_corte").value)
            document.getElementById("total_corte").value = (valormedida*valorrepeticion)
            document.getElementById("deformacionmedida_corte").value = ((valormedida*valorrepeticion))*valordeformacion
        }
    }
    
     function calcula_total_desarollo(){
        
        if (document.getElementById("medida_desarollo").value != "" && document.getElementById("repeticion_desarollo").value != ""){
           var valormedida = parseFloat(document.getElementById("medida_desarollo").value.replace(",","."))
           var valorrepeticion = parseInt(document.getElementById("repeticion_desarollo").value)
           var valorseparacion = parseInt(document.getElementById("separacion").value)
            document.getElementById("total_desarollo").value = ((valormedida*valorrepeticion)+valorseparacion).toFixed(2)
          
           var valordeformacion = parseFloat(document.getElementById("deformacionfactor_desarollo").value.replace(",","."))
          if (document.getElementById("tipo_ordem").value == "Flexografia"){
            document.getElementById("deformacionmedida_desarollo").value = (valormedida*valorrepeticion*valordeformacion).toFixed(3)
          } else {
            document.getElementById("diametro").value = (parseFloat(document.getElementById("deformacionmedida_desarollo").value.replace(",","."))/Math.PI).toFixed(2)
          }
        }
    }
    
     function calcula_factor_hueco(){
        if (document.getElementById("tipo_ordem").value == "Huecograbado"){
             var valormedida = parseFloat(document.getElementById("medida_desarollo").value.replace(",","."))
             
              var valorseparacion = parseInt(document.getElementById("separacion").value)
         
         
            var valorrepeticion = parseInt(document.getElementById("repeticion_desarollo").value) 
            document.getElementById("deformacionfactor_desarollo").value = ((parseFloat(document.getElementById("deformacionmedida_desarollo").value.replace(",","."))/(valormedida*valorrepeticion+valorseparacion))*100).toFixed(6)
            
        }
    }

</script>
<script>

    var array_perfil_campos = ["material","sentido","maquina","lineatura","fabricante_polimero","espesor_polimero","fabricante_polimeroblanco","fabricante_polimerobarniz"]
   var todos_campos = ["material","sentido","maquina","lineatura","fabricante_polimero","espesor_polimero","fabricante_polimeroblanco","fabricante_polimerobarniz"]

    function edit_perfil(){
        
       
        
        
       // quita los campos que ya se cambiaron del array de campos
      
     
        for(i=0;i<campos_perfil.length;i++){
            for (j=0;j<array_perfil_campos.length;j++){
                if (campos_perfil[i].campo == array_perfil_campos[j]){
                    var tira = array_perfil_campos.splice(j,1)
                }
            }
        }
        
        
       
         
        // en caso de que los campos esten bloqueados desbloquea todos cambiando el color solo de los que coinciden con el perfil
        
        if (document.getElementById("material").readOnly == true){
        
        for (i=0;i<array_perfil_campos.length;i++){
        
        document.getElementById(array_perfil_campos[i]).style.backgroundColor = "white"
        }
   
        for (i=0;i<todos_campos.length;i++){
        document.getElementById(todos_campos[i]).readOnly = false
        }
        
            
        } else {
           // bloquea campos manteniendo el color de destaque para los campos cambiados
           
           for (i=0;i<todos_campos.length;i++){
        document.getElementById(todos_campos[i]).readOnly = true
           }
           for (i=0;i<array_perfil_campos.length;i++){
        document.getElementById(array_perfil_campos[i]).style.backgroundColor = "#e9ecef"
        } 
        
        
        var perfil_existente = false
        var theexisting_profiles = []
        
        for (i=0;i<perfiles.length;i++){
        
        
        if (document.getElementById("gamaexpandida_si").checked === true){
        if (perfiles[i]["CLIENTE_N"].toUpperCase() === document.getElementById("cliente").value &&
        perfiles[i]["ESPESORPOLIMERO_N"].toUpperCase() === document.getElementById("espesor_polimero").value &&
        contienedash(perfiles[i]["FABRICANTEPOLIMERO_N"]).toUpperCase() === document.getElementById("fabricante_polimero").value &&
        contienedash(perfiles[i]["FABRICANTEPOLIMEROBLA"]).toUpperCase() === document.getElementById("fabricante_polimeroblanco").value &&
        contienedash(perfiles[i]["FABRICANTEPOLIMEROBAR"]).toUpperCase() === document.getElementById("fabricante_polimerobarniz").value &&
        contienedash(perfiles[i]["LINEATURA_N"]).toUpperCase() === document.getElementById("lineatura").value &&
        contienedash(perfiles[i]["MAQUINAIMPRESORA"]).toUpperCase() === document.getElementById("maquina").value &&
        contienedash(perfiles[i]["MATERIAL_N"]).toUpperCase() === document.getElementById("material").value &&
        contienedash(perfiles[i]["SENTIDOIMPRESION_N"]).toUpperCase() === document.getElementById("sentido").value &&
        contienedash(perfiles[i]["TINTASDOCUMENTO_N"]).toUpperCase() === document.getElementById("color_gamaexpandida").value){
           theexisting_profiles.push(perfiles[i])
           perfil_existente = true  
        } 
        }
        else {
        if (perfiles[i]["ESPESORPOLIMERO_N"].toUpperCase() === document.getElementById("espesor_polimero").value &&
        contienedash(perfiles[i]["FABRICANTEPOLIMERO_N"]).toUpperCase() === document.getElementById("fabricante_polimero").value &&
        contienedash(perfiles[i]["FABRICANTEPOLIMEROBLA"]).toUpperCase() === document.getElementById("fabricante_polimeroblanco").value &&
        contienedash(perfiles[i]["FABRICANTEPOLIMEROBAR"]).toUpperCase() === document.getElementById("fabricante_polimerobarniz").value &&
        contienedash(perfiles[i]["LINEATURA_N"]).toUpperCase() === document.getElementById("lineatura").value &&
        contienedash(perfiles[i]["MAQUINAIMPRESORA"]).toUpperCase() === document.getElementById("maquina").value &&
        contienedash(perfiles[i]["MATERIAL_N"]).toUpperCase() === document.getElementById("material").value &&
        contienedash(perfiles[i]["SENTIDOIMPRESION_N"]).toUpperCase() === document.getElementById("sentido").value &&
        contienedash(perfiles[i]["TINTASDOCUMENTO_N"]).toUpperCase() === "CMYK"){  
         theexisting_profiles.push(perfiles[i])
           perfil_existente = true 
        }
        }
        }
            
        
          //  console.log(perfil_existente)
        
        
        // verifica si hay un perfil 
        if (perfil_existente === true) {
            if (theexisting_profiles.length > 0){
              $("#informacion_impresion").find('option').not(':first').remove();
      
            var selectImpression = document.getElementById("informacion_impresion")
            for (i=0;i<theexisting_profiles.length;i++){
            var opt = document.createElement('option');
         opt.value =  theexisting_profiles[i]["CODIGO"].substring(0,theexisting_profiles[i]["CODIGO"].lastIndexOf("_"));
         opt.innerHTML =  theexisting_profiles[i]["CODIGO"].substring(0,theexisting_profiles[i]["CODIGO"].lastIndexOf("_"));
         selectImpression.appendChild(opt);
            }
            }
            
            
          //  document.getElementById("informacion_impresion").value = theveryoneprofile["CODIGO"].substring(0,theveryoneprofile["CODIGO"].lastIndexOf("_"))
        //    llena_nombre()
        }
       
    }
        
        
    }
</script>
<script>
    function contienedash(info){
        if (info.indexOf(" - ") === -1){
            return info
        } else {
            var info_array = info.split(" - ")
            return info_array[1]
        }
    }
    
    var campos_perfil = []
    
    function calcula_cambio_perfil(){
     if (document.getElementById("informacion_impresion").value != "undefined"){
       
    
    var hay_cambiado = false
    
    var material_profile = contienedash(theveryoneprofile.MATERIAL_N)
    var sentido_profile = contienedash(theveryoneprofile.SENTIDOIMPRESION_N)
    var maquina_profile = contienedash(theveryoneprofile.MAQUINAIMPRESORA)
    var lineatura_profile = contienedash(theveryoneprofile.LINEATURA_N)
    var fabpol_profile = contienedash(theveryoneprofile.FABRICANTEPOLIMERO_N)
    var espessor_profile = theveryoneprofile.ESPESORPOLIMERO_N
    var fabpolbla_profile = contienedash(theveryoneprofile.FABRICANTEPOLIMEROBLA)
    var fabpolbar_profile = contienedash(theveryoneprofile.FABRICANTEPOLIMEROBAR)
    
    if (document.getElementById("material").value.toUpperCase() != material_profile.toUpperCase()){
      
        var data = {}
        data["de"] = material_profile
        data["para"] = document.getElementById("material").value
        data["campo"] = "material"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("material").style.borderColor = "#b19cd9"
        document.getElementById("material").style.backgroundColor = "red"
        document.getElementById("material").style.color = "yellow"
    
        }
   
    if (document.getElementById("sentido").value.toUpperCase() != sentido_profile.toUpperCase()){
        var data = {}
        data["de"] = sentido_profile
        data["para"] = document.getElementById("sentido").value
        data["campo"] = "sentido"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("sentido").style.borderColor = "#b19cd9"
        document.getElementById("sentido").style.backgroundColor = "red"
        document.getElementById("sentido").style.color = "yellow"
         }
    
    if (document.getElementById("maquina").value.toUpperCase() != maquina_profile.toUpperCase()){
        var data = {}
        data["de"] = maquina_profile
        data["para"] = document.getElementById("maquina").value
        data["campo"] = "maquina"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("maquina").style.borderColor = "#b19cd9"
        document.getElementById("maquina").style.backgroundColor = "red"
        document.getElementById("maquina").style.color = "yellow"
        }
   
    if (document.getElementById("lineatura").value.toUpperCase() != lineatura_profile.toUpperCase()){
        var data = {}
        data["de"] = lineatura_profile
        data["para"] = document.getElementById("lineatura").value
        data["campo"] = "lineatura"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("lineatura").style.borderColor = "#b19cd9"
        document.getElementById("lineatura").style.backgroundColor = "red"
        document.getElementById("lineatura").style.color = "yellow"
        }
   
    if (document.getElementById("fabricante_polimero").value.toUpperCase() != fabpol_profile.toUpperCase()){
        var data = {}
        data["de"] = fabpol_profile
        data["para"] = document.getElementById("fabricante_polimero").value
        data["campo"] = "fabricante_polimero"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("fabricante_polimero").style.borderColor = "#b19cd9"
        document.getElementById("fabricante_polimero").style.backgroundColor = "red"
        document.getElementById("fabricante_polimero").style.color = "yellow"
        }
   
    if (document.getElementById("espesor_polimero").value.toUpperCase() != espessor_profile.toUpperCase()){
        var data = {}
        data["de"] = espessor_profile
        data["para"] = document.getElementById("espesor_polimero").value
        data["campo"] = "espesor_polimero"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("espesor_polimero").style.borderColor = "#b19cd9"
        document.getElementById("espesor_polimero").style.backgroundColor = "red"
        document.getElementById("espesor_polimero").style.color = "yellow"
        }
   
    if (document.getElementById("fabricante_polimeroblanco").value.toUpperCase() != fabpolbla_profile.toUpperCase()){
        var data = {}
        data["de"] = fabpolbla_profile
        data["para"] = document.getElementById("fabricante_polimeroblanco").value
        data["campo"] = "fabricante_polimeroblanco"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("fabricante_polimeroblanco").style.borderColor = "#b19cd9"
        document.getElementById("fabricante_polimeroblanco").style.backgroundColor = "red"
        document.getElementById("fabricante_polimeroblanco").style.color = "yellow"
        }
    
    if (document.getElementById("fabricante_polimerobarniz").value.toUpperCase() != fabpolbar_profile.toUpperCase()){
        var data = {}
        data["de"] = fabpolbar_profile
        data["para"] = document.getElementById("fabricante_polimerobarniz").value
        data["campo"] = "fabricante_polimeroblanco"
        data["fecha"] = new Date()
        data["responsable"] = usuario.fullname
        campos_perfil.push(data)
        hay_cambiado = true
        document.getElementById("fabricante_polimerobarniz").style.borderColor = "#b19cd9"
        document.getElementById("fabricante_polimerobarniz").style.backgroundColor = "red"
        document.getElementById("fabricante_polimerobarniz").style.color = "yellow"
        }
        
    if (hay_cambiado === true){
        document.getElementById("nombre_perfil").value = document.getElementById("nombre_perfil").value+" - COM CÂMBIOS!" 
        document.getElementById("nombre_perfil").style.borderColor = "#b19cd9"
                document.getElementById("nombre_perfil").style.backgroundColor = "red"
                document.getElementById("nombre_perfil").style.color = "yellow"
    }
    
     }
    }

</script>
<script>
    function mostra_fotocelula(){
        if (document.getElementById("fotocelula_segunplano").checked === true){
            document.getElementById("mostra_fotocelula1").style.display = "none"
            document.getElementById("mostra_fotocelula2").style.display = "none"
            document.getElementById("mostra_fotocelula3").style.display = "none"
        } else {
            if (document.getElementById("fotocelula_seaplica").checked === false){
          document.getElementById("mostra_fotocelula1").style.display = "inline-block"
            document.getElementById("mostra_fotocelula2").style.display = "inline-block"
            document.getElementById("mostra_fotocelula3").style.display = "inline-block" 
            }
        }
        
    }
    
    function mostra_aplica(){
       if (document.getElementById("fotocelula_seaplica").checked === true){
           document.getElementById("fotocelula_segunplano").checked = false
           document.getElementById("fotocelula_segunplano").disabled = true
           document.getElementById("div_dimensoes_taco").style.display = "none"
           document.getElementById("mostra_fotocelula1").style.display = "none"
            document.getElementById("mostra_fotocelula2").style.display = "none"
            document.getElementById("mostra_fotocelula3").style.display = "none"
       } else {
           document.getElementById("fotocelula_segunplano").disabled = false
         document.getElementById("div_dimensoes_taco").style.display = "inline-block"  
         if (document.getElementById("fotocelula_segunplano").checked === false){
           document.getElementById("mostra_fotocelula1").style.display = "inline-block"
            document.getElementById("mostra_fotocelula2").style.display = "inline-block"
            document.getElementById("mostra_fotocelula3").style.display = "inline-block"   
         }
       }
        
    }
</script>
<script>
 var ind_soporte = 1
    var ind_preprensa = 1
    var ind_programacion = 1
    var ind_grabacion = 1
    var ind_facturacion = 1
    var ind_calidad = 1
    var ind_general = 1


    function adiciona_indicacion(){
       if (document.getElementById("depto_indicaciones").value != "undefined" &&
            document.getElementById("indicacion").value != ""){ 
        
        var data = {}
        if (document.getElementById("depto_indicaciones").value == "Soporte"){
        data["secuencia"] = ind_soporte
        ind_soporte = ind_soporte+1
        }
        if (document.getElementById("depto_indicaciones").value == "Preprensa"){
        data["secuencia"] = ind_preprensa
        ind_preprensa = ind_preprensa+1
        }
        if (document.getElementById("depto_indicaciones").value == "Programación"){
        data["secuencia"] = ind_programacion
        ind_programacion = ind_programacion+1
        }
         if (document.getElementById("depto_indicaciones").value == "Grabación"){
        data["secuencia"] = ind_grabacion
        ind_grabacion = ind_grabacion+1
        }
         if (document.getElementById("depto_indicaciones").value == "Facturación"){
        data["secuencia"] = ind_facturacion
        ind_facturacion = ind_facturacion+1
        }
          if (document.getElementById("depto_indicaciones").value == "General"){
        data["secuencia"] = ind_general
        ind_general = ind_general+1
        }
          if (document.getElementById("depto_indicaciones").value == "Calidad"){
        data["secuencia"] = ind_calidad
        ind_calidad = ind_calidad+1
        }
        
        
        
        
        
        data["fecha_creacion"] = new Date()
        data["creado_por"] = usuario.fullname
        data["depto"] = document.getElementById("depto_indicaciones").value
        data["indicacion"] = document.getElementById("indicacion").value 
        data["verificada"] = false
        indicaciones.push(data)
            } else {
                if (document.getElementById("depto_indicaciones").value == "undefined"){
                    document.getElementById("depto_indicaciones").style.borderColor = "red"
                }
            }
            
        document.getElementById("depto_indicaciones").value = "undefined"
        document.getElementById("indicacion").value = ""
        preenche_indicaciones()
    }
    
   
    
     function preenche_indicaciones(){
        
        
        clearTable(document.getElementById("tabela_indicaciones"))
          
          
         var table = document.getElementById("tabela_indicaciones")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<indicaciones.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            
            var cell6 = row.insertCell(5);
            
            var cell7 = row.insertCell(6);
            
           
           
           cell1.style.textAlign = "left"
          
           cell1.innerHTML = '<div style="font-size:1em;">'+dateFormat(new Date(indicaciones[i].fecha_creacion),"dd/mm/yyyy HH:MM")+'hs</div>'
           cell2.innerHTML = '<div style="font-size:1em;">'+indicaciones[i].creado_por+'</div>'
           cell3.innerHTML = '<div style="font-size:1em;">'+indicaciones[i].secuencia+' ) '+indicaciones[i].depto+'</div>'
           cell4.innerHTML = '<div style="font-size:1em; cursor: pointer"><textarea  id="indicacion_'+i+'" class="form-control" rows="2" readonly>'+indicaciones[i].indicacion+'</textarea></div>'
           cell5.innerHTML = '<div><img id="indicacionapoagar_'+i+'" src="Icons/edit.png" height="20px" onclick="editarIndicacion()" style="cursor: pointer;"></div>'
           cell6.innerHTML = '<div><img id="indicacioneditar_'+i+'" src="Icons/delete.png" height="20px" onclick="apagarIndicacion()" style="cursor: pointer;"></div>'
            qtasrow = qtasrow +1
      
         
                
            }
            
   
        
   
    }
    
         function apagarIndicacion(){
        var linha = event.srcElement.id
        var linha_array = parseInt(linha.split("_")[1])
        var depart = indicaciones[linha_array].depto
        var tira = indicaciones.splice(linha_array,1)
        for (i=0;i<indicaciones.length;i++){
            var numero_indica = i+1
            if (indicaciones[i].depto == depart){
                indicaciones[i].secuencia = numero_indica
            }
        }
        
        
        preenche_indicaciones()
     }
    
    function editarIndicacion(){
     var linha = event.srcElement.id
    console.log(linha)
    var linha_array = linha.split("_")
    var div_lineatura = "indicacion_"+linha_array[1]
   
    
    if (document.getElementById(div_lineatura).readOnly === true){
        document.getElementById(div_lineatura).readOnly = false
       
       
    } else {
         document.getElementById(div_lineatura).readOnly = true
       
        
        var cual_tinta = parseInt(linha_array[1])
        indicaciones[cual_tinta]["indicacion"] = document.getElementById(div_lineatura).value
        
        
    }
    
    }
</script>
<script>
var busca_folders = []
var busca_foldersref = []

    function select_folder(){
        if (document.getElementById("carpeta_trabajo").value != "undefined"){
        document.getElementById("div_asignararchivos").style.display = "inline-block"
        var thefolder = api.folder.list_with_options(["_id","equal to",document.getElementById("carpeta_trabajo").value],[],["name","subfolders","cloudflow"]).results
        console.log(thefolder[0])
        busca_folders = thefolder
        preenche_folders(thefolder)
        } else {
            document.getElementById("div_asignararchivos").style.display = "none"
            clearTable(document.getElementById("tabela_pastas"))
            clearTable(document.getElementById("tabela_subpastas"))
        }
        
    }
  
      function preenche_folders(busca_folders){
  	     
  	     clearTable(document.getElementById("tabela_pastas"))
  	     
  	    
  	    
  	    
  	    
         var table = document.getElementById("tabela_pastas")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<busca_folders.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
           
           
            
            cell1.innerHTML = '<img id="'+busca_folders[i]._id+'_'+i+'" onclick="abre_pasta()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+busca_folders[i].name+'</div>'
            
           qtasrow = qtasrow +1
      
      
         
        
        
    }
    
  	    }
  	    

  	
  	function abre_pasta(){
  	    
  	    var linha = event.srcElement.id
  	    var numerolin = linha.split("_")
  	    var numero_linarray = parseInt(numerolin[1])
  	    var numerolintab = parseInt(numerolin[1])+1
  	    var imagem_or = event.srcElement.src
  	    console.log(linha)
  	    console.log(imagem_or)
  	    var is_on = new RegExp(".*_off.*")
  	    if (is_on.test(imagem_or) === true){
  	    document.getElementById(linha).src="./Icons/folder_on.png"
  	    var tabela = document.getElementById("tabela_pastas")
  	    var linhas_tabela = tabela.rows
  	    console.log("numero da linha é "+numerolintab)
  	    for (i=1;i<linhas_tabela.length;i++){
  	        if (i != numerolintab){
  	        if (linhas_tabela[i].childNodes[0].childNodes[0].src == "http://vpn3.bosisio.com.ar:9090/portal.cgi/PP_FILE_STORE/Sistema/Icons/folder_on.png"){
  	            linhas_tabela[i].childNodes[0].childNodes[0].src = "./Icons/folder_off.png"
  	        }
  	        }
  	    }
  	    var subfolders = []
  	    if (busca_folders[numero_linarray].subfolders != undefined){
  	        
  	        subfolders = busca_folders[numero_linarray].subfolders
  	    }
  	    preenche_subfolders(busca_folders[numero_linarray].cloudflow.folder,numero_linarray)
  	    
  	    } else {
  	 clearTable(document.getElementById("tabela_subpastas"))
  	    document.getElementById(linha).src="./Icons/folder_off.png"
  	    }
  	    
  	}
  	
  	
  	  function preenche_subfolders(folderID,qualsub){
  	     
  	     console.log(qualsub)
  	     console.log(folderID)

  	     clearTable(document.getElementById("tabela_subpastas"))
  	     
  	     
         var table = document.getElementById("tabela_subpastas")
        var qtasrow = table.rows.length
      
           var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            cell1.innerHTML = '<img id="'+folderID+'_'+199+'" onclick="volta_anterior()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">..</div>'
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'
             cell5.innerHTML = '<div></div>'
             
             qtasrow = qtasrow +1
           
           
           
            if (busca_folders[qualsub].subfolders != undefined){ 
            var thebuscakeys = Object.keys(busca_folders[qualsub].subfolders)
           
            for (i=0;i<thebuscakeys.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
           
           
           
            
            cell1.innerHTML = '<img id="'+thebuscakeys[i]+'" onclick="abre_subpasta()" src="./Icons/folder_off.png" width="40px" style="cursor:pointer">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+busca_folders[qualsub].subfolders[thebuscakeys[i]]+'</div>'
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'
             cell5.innerHTML = '<div></div>'
           qtasrow = qtasrow +1
            }
      
      
         
        
        
    }
    
    var busca_files = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",folderID,"and","total_pagecount","equal to",undefined],[],["file_name","file_extension","metadata","cloudflow.file","modification"]).results
    
    for (i=0;i<busca_files.length;i++){
        var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            
            var icone_file = "./Icons/unknown_file.png"
            if (busca_files[i].file_extension == ".ai"){
                icone_file = "./Icons/ai_file.png"
            }
            if (busca_files[i].file_extension == ".pdf"){
                icone_file = "./Icons/pdf_file.png"
            }
            if (busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif" || busca_files[i].file_extension == ".jpg"){
                icone_file = "./Icons/psd_file.png"
            }
            
            
             var filelocation = busca_files[i].cloudflow.file
             var filelocation_encoded = encodeURIComponent(filelocation)
            
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf" || busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif"){
             var theviewlink = "http://vpn3.bosisio.com.ar:9090/portal.cgi?proofscope&url="+filelocation_encoded+"&topbar=false"
             cell1.innerHTML = '<a href="'+theviewlink+'" target="_Blank"><img style="cursor:pointer" src="'+icone_file+'" width="40px"></a>'
            } else {
              cell1.innerHTML = '<img src="'+icone_file+'" width="40px">'
              
            }
            cell2.innerHTML = '<div style="text-align: left">'+busca_files[i].file_name+'</div>'
           if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf"){
            cell3.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="arte_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>'   
            cell4.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="planta_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>'   
            cell5.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="pedido_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>' 
            } else {
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'  
            cell5.innerHTML = '<div></div>'  
            }
           qtasrow = qtasrow +1
            
        
        
    }
    
    
  	    }
  	    
  	 function abre_subpasta(){
  	  var linha = event.srcElement.id
  	  console.log(linha)
  	  var subpaste = api.folder.list_with_options(["_id","equal to",linha],[],["cloudflow","name","subfolders"]).results[0]  
  	  
  	   clearTable(document.getElementById("tabela_subpastas"))
  	     
  	     
         var table = document.getElementById("tabela_subpastas")
        var qtasrow = table.rows.length
      
  	   var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            cell1.innerHTML = '<img id="'+subpaste.cloudflow.enclosing_folder+'" onclick="volta_anterior()" src="./Icons/folder_off.png" width="40px" style="cursor:pointer">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">. . . '+subpaste.name+'</div>'
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'
             cell5.innerHTML = '<div></div>'
             qtasrow = qtasrow +1
             
        if (subpaste.subfolders != undefined){ 
            var thebuscakeys = Object.keys(subpaste.subfolders)
           
            for (i=0;i<thebuscakeys.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
           
           
           
            
            cell1.innerHTML = '<img id="'+thebuscakeys[i]+'" onclick="abre_subpasta()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+subpaste.subfolders[thebuscakeys[i]]+'</div>'
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'
             cell5.innerHTML = '<div></div>'
           qtasrow = qtasrow +1
            }
        }
        
         var busca_files = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",subpaste.cloudflow.folder,"and","total_pagecount","equal to",undefined],[],["file_name","file_extension","metadata","cloudflow.file","modification"]).results
   
         for (i=0;i<busca_files.length;i++){
        var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            
            var icone_file = "./Icons/unknown_file.png"
            if (busca_files[i].file_extension == ".ai"){
                icone_file = "./Icons/ai_file.png"
            }
            if (busca_files[i].file_extension == ".pdf"){
                icone_file = "./Icons/pdf_file.png"
            }
            if (busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif" || busca_files[i].file_extension == ".jpg"){
                icone_file = "./Icons/psd_file.png"
            }
            
            
             var filelocation = busca_files[i].cloudflow.file
             var filelocation_encoded = encodeURIComponent(filelocation)
            
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf" || busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif"){
             var theviewlink = "http://vpn3.bosisio.com.ar:9090/portal.cgi?proofscope&url="+filelocation_encoded+"&topbar=false"
             cell1.innerHTML = '<a href="'+theviewlink+'" target="_Blank"><img style="cursor:pointer" src="'+icone_file+'" width="40px"></a>'
            } else {
              cell1.innerHTML = '<img src="'+icone_file+'" width="40px">'
              
            }
            cell2.innerHTML = '<div style="text-align: left">'+busca_files[i].file_name+'</div>'
          if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf"){
            cell3.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="arte_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>'   
            cell4.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="planta_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>'   
            cell5.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="pedido_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>' 
            } else {
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'  
            cell5.innerHTML = '<div></div>'  
            }
            qtasrow = qtasrow +1
            
        
        
    }
  	     
  	 }
  	
  	
  	function volta_anterior(){
  	   
  	   var linha = event.srcElement.id
  	  
  	  console.log(linha)
  	  var subpaste = api.folder.list_with_options(["cloudflow.folder","equal to",linha],[],["cloudflow","name","subfolders"]).results[0]  
  	   clearTable(document.getElementById("tabela_subpastas"))
  	     
  	     
         var table = document.getElementById("tabela_subpastas")
        var qtasrow = table.rows.length
      
  	   var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            cell1.innerHTML = '<img id="'+subpaste.cloudflow.enclosing_folder+'" onclick="volta_anterior()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">..</div>'
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'
             cell5.innerHTML = '<div></div>'
             qtasrow = qtasrow +1
             
        if (subpaste.subfolders != undefined){ 
            var thebuscakeys = Object.keys(subpaste.subfolders)
           
            for (i=0;i<thebuscakeys.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
           
           
           
            
            cell1.innerHTML = '<img id="'+thebuscakeys[i]+'" onclick="abre_subpasta()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+subpaste.subfolders[thebuscakeys[i]]+'</div>'
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'
             cell5.innerHTML = '<div></div>'
           qtasrow = qtasrow +1
            }
        }
        
         var busca_files = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",subpaste.cloudflow.folder,"and","total_pagecount","equal to",undefined],[],["file_name","file_extension","metadata","cloudflow.file","modification"]).results
   
         for (i=0;i<busca_files.length;i++){
        var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            
            var icone_file = "./Icons/unknown_file.png"
            if (busca_files[i].file_extension == ".ai"){
                icone_file = "./Icons/ai_file.png"
            }
            if (busca_files[i].file_extension == ".pdf"){
                icone_file = "./Icons/pdf_file.png"
            }
            if (busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif" || busca_files[i].file_extension == ".jpg"){
                icone_file = "./Icons/psd_file.png"
            }
            
            
             var filelocation = busca_files[i].cloudflow.file
             var filelocation_encoded = encodeURIComponent(filelocation)
            
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf" || busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif"){
             var theviewlink = "http://vpn3.bosisio.com.ar:9090/portal.cgi?proofscope&url="+filelocation_encoded+"&topbar=false"
             cell1.innerHTML = '<a href="'+theviewlink+'" target="_Blank"><img style="cursor:pointer" src="'+icone_file+'" width="40px"></a>'
            } else {
              cell1.innerHTML = '<img src="'+icone_file+'" width="40px">'
              
            }
            cell2.innerHTML = '<div style="text-align: left">'+busca_files[i].file_name+'</div>'
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf"){
            cell3.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="arte_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>'   
            cell4.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="planta_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>'   
            cell5.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="pedido_'+busca_files[i]._id+'" onclick="adiciona_arte()"></div>' 
            } else {
            cell3.innerHTML = '<div></div>'
            cell4.innerHTML = '<div></div>'  
            cell5.innerHTML = '<div></div>'  
            }
            qtasrow = qtasrow +1
            
        
        
    }
  	    
  	}
  	    
  
</script>
<script>
       function preenche_foldersref(busca_folders){
  	     
  	     clearTable(document.getElementById("tabela_pastasref"))
  	     
  	    
  	    
  	    
  	    
         var table = document.getElementById("tabela_pastasref")
        var qtasrow = table.rows.length
      
            
            for (i=0;i<busca_folders.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
           
           
            
            cell1.innerHTML = '<img id="'+busca_folders[i]._id+'_'+i+'" onclick="abre_pastaref()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+busca_folders[i].name+'</div>'
            
           qtasrow = qtasrow +1
      
      
         
        
        
    }
    
  	    }
  	    

  	
  	function abre_pastaref(){
  	    
  	    var linha = event.srcElement.id
  	    var numerolin = linha.split("_")
  	    var numero_linarray = parseInt(numerolin[1])
  	    var numerolintab = parseInt(numerolin[1])+1
  	    var imagem_or = event.srcElement.src
  	    console.log(linha)
  	    console.log(imagem_or)
  	    var is_on = new RegExp(".*_off.*")
  	    if (is_on.test(imagem_or) === true){
  	    document.getElementById(linha).src="./Icons/folder_on.png"
  	    var tabela = document.getElementById("tabela_pastasref")
  	    var linhas_tabela = tabela.rows
  	    console.log("numero da linha é "+numerolintab)
  	    for (i=1;i<linhas_tabela.length;i++){
  	        if (i != numerolintab){
  	        if (linhas_tabela[i].childNodes[0].childNodes[0].src == "http://vpn3.bosisio.com.ar:9090/portal.cgi/PP_FILE_STORE/Sistema/Icons/folder_on.png"){
  	            linhas_tabela[i].childNodes[0].childNodes[0].src = "./Icons/folder_off.png"
  	        }
  	        }
  	    }
  	    var subfolders = []
  	    if (busca_foldersref[numero_linarray].subfolders != undefined){
  	        
  	        subfolders = busca_foldersref[numero_linarray].subfolders
  	    }
  	    preenche_subfoldersref(busca_foldersref[numero_linarray].cloudflow.folder,numero_linarray)
  	    
  	    } else {
  	 clearTable(document.getElementById("tabela_subpastasref"))
  	    document.getElementById(linha).src="./Icons/folder_off.png"
  	    }
  	    
  	}
  	
  	
  	  function preenche_subfoldersref(folderID,qualsub){
  	     
  	     console.log(qualsub)
  	     console.log(folderID)

  	     clearTable(document.getElementById("tabela_subpastasref"))
  	     
  	     
         var table = document.getElementById("tabela_subpastasref")
        var qtasrow = table.rows.length
      
           var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            cell1.innerHTML = '<img id="'+folderID+'_'+199+'" onclick="volta_anteriorref()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">..</div>'
            cell3.innerHTML = '<div></div>'
             
             qtasrow = qtasrow +1
           
           
           
            if (busca_foldersref[qualsub].subfolders != undefined){ 
            var thebuscakeys = Object.keys(busca_foldersref[qualsub].subfolders)
           
            for (i=0;i<thebuscakeys.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
           
           
           
            
            cell1.innerHTML = '<img id="'+thebuscakeys[i]+'" onclick="abre_subpastaref()" src="./Icons/folder_off.png" width="40px" style="cursor:pointer">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+busca_foldersref[qualsub].subfolders[thebuscakeys[i]]+'</div>'
            cell3.innerHTML = '<div></div>'
           qtasrow = qtasrow +1
            }
      
      
         
        
        
    }
    
    var busca_files = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",folderID,"and","total_pagecount","equal to",undefined],[],["file_name","file_extension","metadata","cloudflow.file","modification"]).results
    
    for (i=0;i<busca_files.length;i++){
        var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            
            var icone_file = "./Icons/unknown_file.png"
            if (busca_files[i].file_extension == ".ai"){
                icone_file = "./Icons/ai_file.png"
            }
            if (busca_files[i].file_extension == ".pdf"){
                icone_file = "./Icons/pdf_file.png"
            }
            if (busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif" || busca_files[i].file_extension == ".jpg"){
                icone_file = "./Icons/psd_file.png"
            }
            
            
             var filelocation = busca_files[i].cloudflow.file
             var filelocation_encoded = encodeURIComponent(filelocation)
            
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf" || busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif"){
             var theviewlink = "http://vpn3.bosisio.com.ar:9090/portal.cgi?proofscope&url="+filelocation_encoded+"&topbar=false"
             cell1.innerHTML = '<a href="'+theviewlink+'" target="_Blank"><img style="cursor:pointer" src="'+icone_file+'" width="40px"></a>'
            } else {
              cell1.innerHTML = '<img src="'+icone_file+'" width="40px">'
              
            }
            cell2.innerHTML = '<div style="text-align: left">'+busca_files[i].file_name+'</div>'
           if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf"){
            cell3.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="arte_'+busca_files[i]._id+'" onclick="adiciona_arteref()"></div>'   
            } else {
            cell3.innerHTML = '<div></div>'
            }
           qtasrow = qtasrow +1
            
        
        
    }
    
    
  	    }
  	    
  	 function abre_subpastaref(){
  	  var linha = event.srcElement.id
  	  console.log(linha)
  	  var subpaste = api.folder.list_with_options(["_id","equal to",linha],[],["cloudflow","name","subfolders"]).results[0]  
  	  
  	   clearTable(document.getElementById("tabela_subpastasref"))
  	     
  	     
         var table = document.getElementById("tabela_subpastasref")
        var qtasrow = table.rows.length
      
  	   var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            cell1.innerHTML = '<img id="'+subpaste.cloudflow.enclosing_folder+'" onclick="volta_anteriorref()" src="./Icons/folder_off.png" width="40px" style="cursor:pointer">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">. . . '+subpaste.name+'</div>'
            cell3.innerHTML = '<div></div>'
             qtasrow = qtasrow +1
             
        if (subpaste.subfolders != undefined){ 
            var thebuscakeys = Object.keys(subpaste.subfolders)
           
            for (i=0;i<thebuscakeys.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
           
           
           
            
            cell1.innerHTML = '<img id="'+thebuscakeys[i]+'" onclick="abre_subpastaref()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+subpaste.subfolders[thebuscakeys[i]]+'</div>'
            cell3.innerHTML = '<div></div>'
           qtasrow = qtasrow +1
            }
        }
        
         var busca_files = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",subpaste.cloudflow.folder,"and","total_pagecount","equal to",undefined],[],["file_name","file_extension","metadata","cloudflow.file","modification"]).results
   
         for (i=0;i<busca_files.length;i++){
        var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            
            var icone_file = "./Icons/unknown_file.png"
            if (busca_files[i].file_extension == ".ai"){
                icone_file = "./Icons/ai_file.png"
            }
            if (busca_files[i].file_extension == ".pdf"){
                icone_file = "./Icons/pdf_file.png"
            }
            if (busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif" || busca_files[i].file_extension == ".jpg"){
                icone_file = "./Icons/psd_file.png"
            }
            
            
             var filelocation = busca_files[i].cloudflow.file
             var filelocation_encoded = encodeURIComponent(filelocation)
            
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf" || busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif"){
             var theviewlink = "http://vpn3.bosisio.com.ar:9090/portal.cgi?proofscope&url="+filelocation_encoded+"&topbar=false"
             cell1.innerHTML = '<a href="'+theviewlink+'" target="_Blank"><img style="cursor:pointer" src="'+icone_file+'" width="40px"></a>'
            } else {
              cell1.innerHTML = '<img src="'+icone_file+'" width="40px">'
              
            }
            cell2.innerHTML = '<div style="text-align: left">'+busca_files[i].file_name+'</div>'
          if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf"){
            cell3.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="arte_'+busca_files[i]._id+'" onclick="adiciona_arteref()"></div>'   
            } else {
            cell3.innerHTML = '<div></div>'
            }
            qtasrow = qtasrow +1
            
        
        
    }
  	     
  	 }
  	
  	
  	function volta_anteriorref(){
  	   
  	   var linha = event.srcElement.id
  	  
  	  console.log(linha)
  	  var subpaste = api.folder.list_with_options(["cloudflow.folder","equal to",linha],[],["cloudflow","name","subfolders"]).results[0]  
  	   clearTable(document.getElementById("tabela_subpastasref"))
  	     
  	     
         var table = document.getElementById("tabela_subpastasref")
        var qtasrow = table.rows.length
      
  	   var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            cell1.innerHTML = '<img id="'+subpaste.cloudflow.enclosing_folder+'" onclick="volta_anteriorref()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">..</div>'
            cell3.innerHTML = '<div></div>'
             qtasrow = qtasrow +1
             
        if (subpaste.subfolders != undefined){ 
            var thebuscakeys = Object.keys(subpaste.subfolders)
           
            for (i=0;i<thebuscakeys.length;i++){
            var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            
           
           
            
            cell1.innerHTML = '<img id="'+thebuscakeys[i]+'" onclick="abre_subpastaref()" src="./Icons/folder_off.png" width="40px">'
            cell2.innerHTML = '<div style="font-size:1em; text-align: left;">'+subpaste.subfolders[thebuscakeys[i]]+'</div>'
            cell3.innerHTML = '<div></div>'
             qtasrow = qtasrow +1
            }
        }
        
         var busca_files = api.asset.list_with_options(["cloudflow.enclosing_folder","equal to",subpaste.cloudflow.folder,"and","total_pagecount","equal to",undefined],[],["file_name","file_extension","metadata","cloudflow.file","modification"]).results
   
         for (i=0;i<busca_files.length;i++){
        var row =  table.insertRow(qtasrow);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            
            var icone_file = "./Icons/unknown_file.png"
            if (busca_files[i].file_extension == ".ai"){
                icone_file = "./Icons/ai_file.png"
            }
            if (busca_files[i].file_extension == ".pdf"){
                icone_file = "./Icons/pdf_file.png"
            }
            if (busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif" || busca_files[i].file_extension == ".jpg"){
                icone_file = "./Icons/psd_file.png"
            }
            
            
             var filelocation = busca_files[i].cloudflow.file
             var filelocation_encoded = encodeURIComponent(filelocation)
            
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf" || busca_files[i].file_extension == ".psd" || busca_files[i].file_extension == ".tif"){
             var theviewlink = "http://vpn3.bosisio.com.ar:9090/portal.cgi?proofscope&url="+filelocation_encoded+"&topbar=false"
             cell1.innerHTML = '<a href="'+theviewlink+'" target="_Blank"><img style="cursor:pointer" src="'+icone_file+'" width="40px"></a>'
            } else {
              cell1.innerHTML = '<img src="'+icone_file+'" width="40px">'
              
            }
            cell2.innerHTML = '<div style="text-align: left">'+busca_files[i].file_name+'</div>'
            
            if (busca_files[i].file_extension == ".ai" || busca_files[i].file_extension == ".pdf"){
            cell3.innerHTML = '<div style="text-align: left"><img src="./Icons/prioriza_off.png" width="30px" id="arte_'+busca_files[i]._id+'" onclick="adiciona_arteref()"></div>'   
            } else {
            cell3.innerHTML = '<div></div>'
            }
            qtasrow = qtasrow +1
            
        
        
    }
  	    
  	}
</script>
<script>
    function adiciona_arte(){
        var linha = event.srcElement.id
        var opcoes = ["arte","planta","pedido"]
        var linha_array = linha.split("_")
        var imagem = event.srcElement.src
      //  console.log(imagem)
        var imagem_array = imagem.split("_")
    //    console.log(imagem_array)
        
         for (i=0;i<opcoes.length;i++){
            if (opcoes[i] == linha_array[0]){
                var tira = opcoes.splice(i,1)
            }
        }
        
        if (arteselec.indexOf(linha_array[1]) === -1 &&
            plantaselec.indexOf(linha_array[1]) === -1 &&
            pedidoselec.indexOf(linha_array[1]) === -1) {
              var jatemessa = false  
            } else {
              var jatemessa = true
            }
       
        console.log("ja tem essa "+jatemessa)
       
        if (imagem_array[3] == "off.png"){
       
        document.getElementById(linha).src = "./Icons/prioriza_on.png"
       
        for (i=0;i<opcoes.length;i++){
            var divoutra = opcoes[i]+"_"+linha_array[1]
         if (document.getElementById(divoutra) != undefined){
            document.getElementById(divoutra).src = "./Icons/prioriza_off.png"
         }
        }
        
       
        if (linha_array[0] === "arte"){
        if (arteselec.length > 0){
            var divapagar = "arte_"+arteselec[0]
            if (document.getElementById(divapagar) != undefined){
            document.getElementById(divapagar).src = "./Icons/prioriza_off.png"
            }
            arteselec = []
             if (plantaselec.indexOf(linha_array[1]) > -1){
                plantaselec = []
            }
            if (pedidoselec.indexOf(linha_array[1]) > -1){
                pedidoselec = []
            }
            
            arteselec.push(linha_array[1])
            }
         else {
            if (pedidoselec.indexOf(linha_array[1]) > -1){
                arteselec = []
            }
            if (plantaselec.indexOf(linha_array[1]) > -1){
                plantaselec = []
            }
                arteselec.push(linha_array[1])
            
        }
        }
        
         if (linha_array[0] === "planta"){
        if (plantaselec.length > 0){
            var divapagar = "planta_"+plantaselec[0]
            document.getElementById(divapagar).src = "./Icons/prioriza_off.png"
            plantaselec = []
            if (arteselec.indexOf(linha_array[1]) > -1){
                arteselec = []
            }
            if (pedidoselec.indexOf(linha_array[1]) > -1){
                pedidoselec = []
            }
            
            plantaselec.push(linha_array[1])
            
            
        } else {
            if (arteselec.indexOf(linha_array[1]) > -1){
                arteselec = []
            }
            if (plantaselec.indexOf(linha_array[1]) > -1){
                pedidoselec = []
            }
            
                plantaselec.push(linha_array[1])
            
        }
        }
        
         if (linha_array[0] === "pedido"){
        if (pedidoselec.length > 0){
            var divapagar = "pedido_"+pedidoselec[0]
            document.getElementById(divapagar).src = "./Icons/prioriza_off.png"
            pedidoselec = []
            if (arteselec.indexOf(linha_array[1]) > -1){
                arteselec = []
            }
            if (plantaselec.indexOf(linha_array[1]) > -1){
                plantaselec = []
            }
            
            pedidoselec.push(linha_array[1])
            
            
        } else {
            if (arteselec.indexOf(linha_array[1]) > -1){
                arteselec = []
            }
            if (plantaselec.indexOf(linha_array[1]) > -1){
                plantaselec = []
            }
                pedidoselec.push(linha_array[1])
            
        }
        }
        
        
            
        } else {
        document.getElementById(linha).src = "./Icons/prioriza_off.png" 
        if (linha_array[0] == "arte"){
            arteselec = []
        }
        if (linha_array[0] == "pedido"){
            pedidoselec = []
        }
        if (linha_array[0] == "planta"){
            plantaselec = []
        }
        }
        
       
        
    
        preenche_selectedfiles()
        
        
    }
    
    var theart_asset = {}
    var theplanta_asset = {}
    var thepedido_asset = {}
   
    
    function preenche_selectedfiles(){
        if (arteselec.length === 0){
            document.getElementById("div_arte").style.display = "none"
        } else {
            document.getElementById("div_arte").style.display = "inline-block"
            theart_asset = api.asset.list_with_options(["_id","equal to",arteselec[0]],[],["file_name","thumb","file_extension","cloudflow","path","metadata.output_color_space.colorants","url"]).results[0]
            if (theart_asset.thumb == undefined){
                document.getElementById("preview_arte").src = "./Icons/pdf_file.png"
                
            } else {
                document.getElementById("preview_arte").src = theart_asset.thumb
            }
            document.getElementById("div_filename").innerText = theart_asset.file_name
        }
        
        if (plantaselec.length === 0){
            document.getElementById("div_plano").style.display = "none"
        } else {
            document.getElementById("div_plano").style.display = "inline-block"
            theplanta_asset = api.asset.list_with_options(["_id","equal to",plantaselec[0]],[],["file_name","thumb","file_extension","cloudflow","path","metadata.output_color_space.colorants","url"]).results[0]
            if (theplanta_asset.thumb == undefined){
                document.getElementById("preview_plano").src = "./Icons/pdf_file.png"
                
            } else {
              document.getElementById("preview_plano").src = theplanta_asset.thumb  
            }
            document.getElementById("div_filename2").innerText = theplanta_asset.file_name
        }
        
        if (pedidoselec.length === 0){
            document.getElementById("div_pedido").style.display = "none"
        } else {
            document.getElementById("div_pedido").style.display = "inline-block"
            thepedido_asset = api.asset.list_with_options(["_id","equal to",pedidoselec[0]],[],["file_name","thumb","file_extension","cloudflow","path","metadata.output_color_space.colorants","url"]).results[0]
            if (thepedido_asset.thumb == undefined){
                document.getElementById("preview_pedido").src = "./Icons/pdf_file.png"
                
            } else {
              document.getElementById("preview_pedido").src = thepedido_asset.thumb  
            }
            document.getElementById("div_filename3").innerText = thepedido_asset.file_name
        }
    }
</script>

<script>

var thereference_asset = {}
var arterefselect = []

    function adiciona_arteref(){
        var linha = event.srcElement.id
        var linha_array = linha.split("_")
        var imagem = event.srcElement.src
      //  console.log(imagem)
        var imagem_array = imagem.split("_")
    //    console.log(imagem_array)
        
     
        if (imagem_array[3] == "off.png"){
       
        document.getElementById(linha).src = "./Icons/prioriza_on.png"
        
           
       
        
        } else {
        
        document.getElementById(linha).src = "./Icons/prioriza_off.png"
    }
       
      
        if (arterefselect.length === 0){
          
            
            arterefselect.push(linha_array[1])
          
        } else {
           arterefselect[0] = [linha_array[1]]
        }
       
        
    
        preenche_selectedfilesref()
        
        
    
    
    }
    
    
    function preenche_selectedfilesref(){
        if (arterefselect.length === 0){
            document.getElementById("div_arteref").style.display = "none"
        } else {
            document.getElementById("div_arteref").style.display = "inline-block"
            thereference_asset = api.asset.list_with_options(["_id","equal to",arterefselect[0]],[],["file_name","thumb","file_extension","cloudflow","path","metadata.output_color_space.colorants","url"]).results[0]
            if (thereference_asset.thumb == undefined){
                document.getElementById("preview_arteref").src = "./Icons/pdf_file.png"
                
            } else {
                document.getElementById("preview_arteref").src = thereference_asset.thumb
            }
            document.getElementById("div_filenameref").innerText = thereference_asset.file_name
        }
        
    
    }
</script>
<script>
      window.onload = function () { 

        document.getElementsByClassName("toggle-off")[1].style.lineHeight= null; 
        document.getElementsByClassName("toggle-on")[1].style.lineHeight = null
    }
</script>
<script>
  function filtro_tabela() {
   //   clearInterval(inicia)
      var input, filter, table, tr, td, td2,td3,td4,td5,td6,td7,td8, i, txtValue;
      input = document.getElementById("filtrarTabela");
      filter = input.value.toUpperCase();
      table = document.getElementById("tabela_prioridades");
      tr = table.getElementsByTagName("tr");
      for (i = 1; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[2];
        td2 = tr[i].getElementsByTagName("td")[3];
        td3 = tr[i].getElementsByTagName("td")[4];
        td4 = tr[i].getElementsByTagName("td")[5];
        td5 = tr[i].getElementsByTagName("td")[6];
        td8 = tr[i].getElementsByTagName("td")[7];
        td6 = tr[i].getElementsByTagName("td")[9];
        td7 = tr[i].getElementsByTagName("td")[8].children[0].children[0]
        if (td || td2 || td3 || td4 || td5 || td6 || td7) {
          txtValue = td.textContent || td.innerText;
          txtValue2 = td2.textContent || td2.innerText;
          txtValue3 = td3.textContent || td3.innerText;
          txtValue4 = td4.textContent || td4.innerText;
          txtValue5 = td5.textContent || td5.innerText;
          txtValue6 = td6.textContent || td6.innerText;
          txtValue7 = td7.src;
          txtValue8 = td8.textContent || td8.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1 
                || txtValue2.toUpperCase().indexOf(filter) > -1
                || txtValue3.toUpperCase().indexOf(filter) > -1
                || txtValue4.toUpperCase().indexOf(filter) > -1
                || txtValue5.toUpperCase().indexOf(filter) > -1
                || txtValue6.toUpperCase().indexOf(filter) > -1
                || txtValue7.toUpperCase().indexOf(filter) > -1
                || txtValue8.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
           // var outro_numero = i+1
            //if (tr[outro_numero].style.display == ""){
            //tr[outro_numero].style.display = "none"
                
            //}
            tr[i].style.display = "none";
          //  tr[i+1].style.display = "none"
          }
        }
        i=i+2
      }
    }
</script>
    </body>

</html>